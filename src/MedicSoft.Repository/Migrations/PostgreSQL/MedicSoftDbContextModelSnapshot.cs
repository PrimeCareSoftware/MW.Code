// <auto-generated />
using System;
using System.Collections.Generic;
using MedicSoft.Repository.Context;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

#nullable disable

namespace MedicSoft.Repository.Migrations.PostgreSQL
{
    [DbContext(typeof(MedicSoftDbContext))]
    partial class MedicSoftDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "8.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccessProfile", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ConsultationFormProfileId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDefault")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("ConsultationFormProfileId");

                    b.HasIndex("IsDefault");

                    b.HasIndex("TenantId", "IsActive");

                    b.HasIndex("TenantId", "ClinicId", "Name");

                    b.ToTable("AccessProfiles", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountLockout", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("FailedAttempts")
                        .HasColumnType("integer");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("LockedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UnlockedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UnlockedBy")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("UnlocksAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.HasKey("Id");

                    b.HasIndex("IsActive");

                    b.HasIndex("TenantId");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "IsActive", "UnlocksAt");

                    b.ToTable("AccountLockouts", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountsPayable", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("BankAccount")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("BankName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("DocumentNumber")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("DueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("InstallmentNumber")
                        .HasColumnType("integer");

                    b.Property<DateTime>("IssueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal>("OutstandingAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PaidAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("PaymentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PixKey")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<Guid?>("SupplierId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int?>("TotalInstallments")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category");

                    b.HasIndex("DocumentNumber");

                    b.HasIndex("DueDate");

                    b.HasIndex("Status");

                    b.HasIndex("SupplierId");

                    b.HasIndex("TenantId");

                    b.ToTable("AccountsPayable", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountsReceivable", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<decimal?>("DiscountRate")
                        .HasColumnType("decimal(5,2)");

                    b.Property<string>("DocumentNumber")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("DueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("FineRate")
                        .HasColumnType("decimal(5,2)");

                    b.Property<Guid?>("HealthInsuranceOperatorId")
                        .HasColumnType("uuid");

                    b.Property<int?>("InstallmentNumber")
                        .HasColumnType("integer");

                    b.Property<decimal?>("InterestRate")
                        .HasColumnType("decimal(5,2)");

                    b.Property<DateTime>("IssueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal>("OutstandingAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PaidAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid?>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("SettlementDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int?>("TotalInstallments")
                        .HasColumnType("integer");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("DocumentNumber");

                    b.HasIndex("DueDate");

                    b.HasIndex("HealthInsuranceOperatorId");

                    b.HasIndex("PatientId");

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.ToTable("AccountsReceivable", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Alert", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AcknowledgedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("AcknowledgedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("ActionLabel")
                        .HasColumnType("text");

                    b.Property<string>("ActionUrl")
                        .HasColumnType("text");

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int[]>("DeliveryChannels")
                        .IsRequired()
                        .HasColumnType("integer[]");

                    b.Property<DateTime?>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Metadata")
                        .HasColumnType("text");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<int>("RecipientType")
                        .HasColumnType("integer");

                    b.Property<Guid?>("RelatedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("RelatedEntityType")
                        .HasColumnType("text");

                    b.Property<string>("ResolutionNotes")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ResolvedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ResolvedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Role")
                        .HasColumnType("text");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<int>("SuggestedAction")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("Alerts");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AlertConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ActionLabelTemplate")
                        .HasColumnType("text");

                    b.Property<string>("ActionUrlTemplate")
                        .HasColumnType("text");

                    b.Property<int>("AlertsGeneratedCount")
                        .HasColumnType("integer");

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DeliveryChannels")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int?>("ExpirationHours")
                        .HasColumnType("integer");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsGlobal")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastTriggeredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("MessageTemplate")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<string>("RecipientFilter")
                        .HasColumnType("text");

                    b.Property<int>("RecipientType")
                        .HasColumnType("integer");

                    b.Property<int>("SuggestedAction")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TitleTemplate")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerConditions")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("AlertConfigurations");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AnamnesisResponse", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AnswersJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("DoctorId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsComplete")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ResponseDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("TemplateId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("DoctorId");

                    b.HasIndex("PatientId");

                    b.HasIndex("ResponseDate")
                        .HasDatabaseName("IX_AnamnesisResponses_ResponseDate");

                    b.HasIndex("TemplateId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_AnamnesisResponses_TenantId");

                    b.HasIndex("TenantId", "AppointmentId")
                        .IsUnique()
                        .HasDatabaseName("IX_AnamnesisResponses_TenantId_AppointmentId");

                    b.HasIndex("TenantId", "DoctorId")
                        .HasDatabaseName("IX_AnamnesisResponses_TenantId_DoctorId");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_AnamnesisResponses_TenantId_PatientId");

                    b.ToTable("AnamnesisResponses", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AnamnesisTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("SectionsJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Specialty")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_AnamnesisTemplates_IsActive");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_AnamnesisTemplates_TenantId");

                    b.HasIndex("TenantId", "Specialty")
                        .HasDatabaseName("IX_AnamnesisTemplates_TenantId_Specialty");

                    b.HasIndex("TenantId", "Specialty", "IsDefault")
                        .HasDatabaseName("IX_AnamnesisTemplates_TenantId_Specialty_IsDefault");

                    b.ToTable("AnamnesisTemplates", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Appointment", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("CheckInTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("CheckOutTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("DurationMinutes")
                        .HasColumnType("integer");

                    b.Property<Guid?>("HealthInsurancePlanId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsPaid")
                        .HasColumnType("boolean");

                    b.Property<int>("Mode")
                        .HasColumnType("integer");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("PaidAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("PaidByUserId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("PaymentAmount")
                        .HasColumnType("numeric");

                    b.Property<int?>("PaymentMethod")
                        .HasColumnType("integer");

                    b.Property<int?>("PaymentReceivedBy")
                        .HasColumnType("integer");

                    b.Property<int>("PaymentType")
                        .HasColumnType("integer");

                    b.Property<Guid?>("ProfessionalId")
                        .HasColumnType("uuid");

                    b.Property<string>("RoomNumber")
                        .HasColumnType("text");

                    b.Property<DateTime>("ScheduledDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<TimeSpan>("ScheduledTime")
                        .HasColumnType("interval");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("HealthInsurancePlanId");

                    b.HasIndex("PatientId");

                    b.HasIndex("ProfessionalId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Appointments_TenantId");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_Appointments_TenantId_Patient");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_Appointments_TenantId_Status");

                    b.HasIndex("TenantId", "ScheduledDate", "ClinicId")
                        .HasDatabaseName("IX_Appointments_TenantId_Date_Clinic");

                    b.ToTable("Appointments", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AppointmentProcedure", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("PerformedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("PriceCharged")
                        .HasPrecision(18, 2)
                        .HasColumnType("numeric(18,2)");

                    b.Property<Guid>("ProcedureId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId")
                        .HasDatabaseName("IX_AppointmentProcedures_AppointmentId");

                    b.HasIndex("PatientId")
                        .HasDatabaseName("IX_AppointmentProcedures_PatientId");

                    b.HasIndex("ProcedureId");

                    b.ToTable("AppointmentProcedures", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AssinaturaDigital", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<byte[]>("AssinaturaDigitalBytes")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<Guid>("CertificadoId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataHoraAssinatura")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataTimestamp")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataUltimaValidacao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("DocumentoId")
                        .HasColumnType("uuid");

                    b.Property<string>("HashDocumento")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("IpAssinatura")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("LocalAssinatura")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<Guid>("MedicoId")
                        .HasColumnType("uuid");

                    b.Property<bool>("TemTimestamp")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("TimestampBytes")
                        .HasColumnType("bytea");

                    b.Property<int>("TipoDocumento")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("Valida")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.HasIndex("CertificadoId");

                    b.HasIndex("DocumentoId");

                    b.HasIndex("MedicoId");

                    b.HasIndex("TenantId");

                    b.HasIndex("DocumentoId", "TipoDocumento");

                    b.ToTable("AssinaturasDigitais", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AuditLog", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ActionDescription")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ChangedFields")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DataCategory")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("EntityDisplayName")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("EntityId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("EntityType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FailureReason")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("HttpMethod")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("NewValues")
                        .HasColumnType("text");

                    b.Property<string>("OldValues")
                        .HasColumnType("text");

                    b.Property<string>("Purpose")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("RequestPath")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Result")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Severity")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int?>("StatusCode")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("UserEmail")
                        .IsRequired()
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.HasKey("Id");

                    b.HasIndex("Timestamp")
                        .HasDatabaseName("IX_AuditLogs_Timestamp");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_AuditLogs_UserId");

                    b.HasIndex("TenantId", "Severity")
                        .HasDatabaseName("IX_AuditLogs_Tenant_Severity");

                    b.HasIndex("TenantId", "Timestamp")
                        .HasDatabaseName("IX_AuditLogs_Tenant_Time");

                    b.HasIndex("TenantId", "Action", "Timestamp")
                        .HasDatabaseName("IX_AuditLogs_Tenant_Action_Time");

                    b.HasIndex("TenantId", "EntityType", "EntityId")
                        .HasDatabaseName("IX_AuditLogs_Tenant_Entity");

                    b.HasIndex("TenantId", "Severity", "Timestamp")
                        .HasDatabaseName("IX_AuditLogs_Tenant_HighSeverity_Time")
                        .HasFilter("\"Severity\" IN ('WARNING', 'ERROR', 'CRITICAL')");

                    b.HasIndex("TenantId", "UserId", "Timestamp")
                        .HasDatabaseName("IX_AuditLogs_Tenant_User_Time");

                    b.ToTable("AuditLogs", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AuthorizationRequest", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AuthorizationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("AuthorizationNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ClinicalIndication")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DenialReason")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Diagnosis")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("ExpirationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("PatientHealthInsuranceId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("ProcedureCode")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ProcedureDescription")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer");

                    b.Property<DateTime>("RequestDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("RequestNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("AuthorizationNumber")
                        .HasDatabaseName("IX_AuthorizationRequests_AuthorizationNumber");

                    b.HasIndex("PatientHealthInsuranceId");

                    b.HasIndex("PatientId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_AuthorizationRequests_TenantId");

                    b.HasIndex("TenantId", "RequestNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_AuthorizationRequests_TenantId_RequestNumber");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_AuthorizationRequests_TenantId_Status");

                    b.ToTable("AuthorizationRequests", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.BlockedTimeSlot", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("Date")
                        .HasColumnType("timestamp with time zone");

                    b.Property<TimeSpan>("EndTime")
                        .HasColumnType("interval");

                    b.Property<bool>("IsRecurring")
                        .HasColumnType("boolean");

                    b.Property<Guid?>("ProfessionalId")
                        .HasColumnType("uuid");

                    b.Property<string>("Reason")
                        .HasColumnType("text");

                    b.Property<Guid?>("RecurringPatternId")
                        .HasColumnType("uuid");

                    b.Property<TimeSpan>("StartTime")
                        .HasColumnType("interval");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("ProfessionalId");

                    b.HasIndex("RecurringPatternId");

                    b.ToTable("BlockedTimeSlots");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.BusinessConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<bool>("ApiAccess")
                        .HasColumnType("boolean");

                    b.Property<bool>("BiReports")
                        .HasColumnType("boolean");

                    b.Property<int>("BusinessType")
                        .HasColumnType("integer");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("CreditCardPayments")
                        .HasColumnType("boolean");

                    b.Property<bool>("ElectronicPrescription")
                        .HasColumnType("boolean");

                    b.Property<bool>("FinancialModule")
                        .HasColumnType("boolean");

                    b.Property<bool>("GroupSessions")
                        .HasColumnType("boolean");

                    b.Property<bool>("HealthInsurance")
                        .HasColumnType("boolean");

                    b.Property<bool>("HomeVisit")
                        .HasColumnType("boolean");

                    b.Property<bool>("InventoryManagement")
                        .HasColumnType("boolean");

                    b.Property<bool>("LabIntegration")
                        .HasColumnType("boolean");

                    b.Property<bool>("MultiRoom")
                        .HasColumnType("boolean");

                    b.Property<bool>("OnlineBooking")
                        .HasColumnType("boolean");

                    b.Property<bool>("PatientReviews")
                        .HasColumnType("boolean");

                    b.Property<int>("PrimarySpecialty")
                        .HasColumnType("integer");

                    b.Property<bool>("PublicProfile")
                        .HasColumnType("boolean");

                    b.Property<bool>("ReceptionQueue")
                        .HasColumnType("boolean");

                    b.Property<bool>("Telemedicine")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("VaccineControl")
                        .HasColumnType("boolean");

                    b.Property<bool>("WhiteLabel")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_BusinessConfigurations_TenantId");

                    b.HasIndex("TenantId", "ClinicId")
                        .IsUnique()
                        .HasDatabaseName("IX_BusinessConfigurations_TenantId_ClinicId");

                    b.ToTable("BusinessConfigurations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.AutomationAction", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Channel")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Condition")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("EmailTemplateId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("MarketingAutomationId")
                        .HasColumnType("uuid");

                    b.Property<string>("MessageTemplate")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int>("Order")
                        .HasColumnType("integer");

                    b.Property<int?>("ScoreChange")
                        .HasColumnType("integer");

                    b.Property<string>("TagToAdd")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("EmailTemplateId");

                    b.HasIndex("MarketingAutomationId");

                    b.HasIndex("TenantId");

                    b.HasIndex("Type");

                    b.ToTable("AutomationActions", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.ChurnPrediction", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<double>("AverageSatisfactionScore")
                        .HasColumnType("double precision");

                    b.Property<int>("CancelledAppointmentsCount")
                        .HasColumnType("integer");

                    b.Property<double>("ChurnProbability")
                        .HasColumnType("double precision");

                    b.Property<int>("ComplaintsCount")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("DaysSinceLastVisit")
                        .HasColumnType("integer");

                    b.Property<decimal>("LifetimeValue")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("NoShowCount")
                        .HasColumnType("integer");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("PredictedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("RiskLevel")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TotalVisits")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<List<string>>("_recommendedActions")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("RecommendedActions");

                    b.Property<List<string>>("_riskFactors")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("RiskFactors");

                    b.HasKey("Id");

                    b.HasIndex("PatientId");

                    b.HasIndex("PredictedAt");

                    b.HasIndex("RiskLevel");

                    b.HasIndex("TenantId");

                    b.ToTable("ChurnPredictions", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Complaint", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AssignedToUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("AssignedToUserName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ClosedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("FirstResponseAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<string>("ProtocolNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("ReceivedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("ResolutionTimeMinutes")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ResolvedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("ResponseTimeMinutes")
                        .HasColumnType("integer");

                    b.Property<string>("SatisfactionFeedback")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int?>("SatisfactionRating")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AssignedToUserId");

                    b.HasIndex("PatientId");

                    b.HasIndex("Priority");

                    b.HasIndex("ProtocolNumber")
                        .IsUnique();

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.ToTable("Complaints", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.ComplaintInteraction", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ComplaintId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("InteractionDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsInternal")
                        .HasColumnType("boolean");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.HasKey("Id");

                    b.HasIndex("ComplaintId");

                    b.HasIndex("TenantId");

                    b.HasIndex("UserId");

                    b.ToTable("ComplaintInteractions", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.EmailTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("HtmlBody")
                        .IsRequired()
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("PlainTextBody")
                        .IsRequired()
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<List<string>>("_availableVariables")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("AvailableVariables");

                    b.HasKey("Id");

                    b.HasIndex("Name");

                    b.HasIndex("TenantId");

                    b.ToTable("EmailTemplates", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.JourneyStage", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("DurationDays")
                        .HasColumnType("integer");

                    b.Property<DateTime>("EnteredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ExitTrigger")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("ExitedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("PatientJourneyId")
                        .HasColumnType("uuid");

                    b.Property<int>("Stage")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("PatientJourneyId");

                    b.HasIndex("Stage");

                    b.HasIndex("TenantId");

                    b.ToTable("JourneyStages", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Lead", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AssignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("AssignedToUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CapturedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("City")
                        .HasColumnType("text");

                    b.Property<string>("CompanyName")
                        .HasColumnType("text");

                    b.Property<string>("ContactName")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DeletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Email")
                        .HasColumnType("text");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastActivityAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("LastStepReached")
                        .HasColumnType("integer");

                    b.Property<string>("LeadSource")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Metadata")
                        .HasColumnType("text");

                    b.Property<DateTime?>("NextFollowUpDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasColumnType("text");

                    b.Property<string>("Phone")
                        .HasColumnType("text");

                    b.Property<string>("PlanId")
                        .HasColumnType("text");

                    b.Property<string>("PlanName")
                        .HasColumnType("text");

                    b.Property<string>("Referrer")
                        .HasColumnType("text");

                    b.Property<int>("Score")
                        .HasColumnType("integer");

                    b.Property<string>("SessionId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("State")
                        .HasColumnType("text");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("Tags")
                        .HasColumnType("text");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UtmCampaign")
                        .HasColumnType("text");

                    b.Property<string>("UtmMedium")
                        .HasColumnType("text");

                    b.Property<string>("UtmSource")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Leads");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.LeadActivity", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ActivityDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DeletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<int?>("DurationMinutes")
                        .HasColumnType("integer");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<Guid>("LeadId")
                        .HasColumnType("uuid");

                    b.Property<string>("Outcome")
                        .HasColumnType("text");

                    b.Property<Guid?>("PerformedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("PerformedByUserName")
                        .HasColumnType("text");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("LeadId");

                    b.ToTable("LeadActivities");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.MarketingAutomation", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("DelayMinutes")
                        .HasColumnType("integer");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastExecutedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("SegmentFilter")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<double>("SuccessRate")
                        .HasColumnType("double precision");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TimesExecuted")
                        .HasColumnType("integer");

                    b.Property<string>("TriggerEvent")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int?>("TriggerStage")
                        .HasColumnType("integer");

                    b.Property<int>("TriggerType")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<List<string>>("_tags")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("Tags");

                    b.HasKey("Id");

                    b.HasIndex("IsActive");

                    b.HasIndex("TenantId");

                    b.HasIndex("TriggerStage");

                    b.HasIndex("TriggerType");

                    b.ToTable("MarketingAutomations", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.PatientJourney", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<int>("ChurnRisk")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("CurrentStage")
                        .HasColumnType("integer");

                    b.Property<int>("EngagementScore")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<decimal>("LifetimeValue")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("NpsScore")
                        .HasColumnType("integer");

                    b.Property<Guid>("PacienteId")
                        .HasColumnType("uuid");

                    b.Property<double>("SatisfactionScore")
                        .HasColumnType("double precision");

                    b.Property<List<string>>("Tags")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TotalTouchpoints")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ChurnRisk");

                    b.HasIndex("CurrentStage");

                    b.HasIndex("PacienteId");

                    b.HasIndex("TenantId");

                    b.ToTable("PatientJourneys", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.PatientTouchpoint", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Channel")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int>("Direction")
                        .HasColumnType("integer");

                    b.Property<Guid>("JourneyStageId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("SentimentAnalysisId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("JourneyStageId");

                    b.HasIndex("TenantId");

                    b.HasIndex("Timestamp");

                    b.HasIndex("Type");

                    b.ToTable("PatientTouchpoints", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SentimentAnalysis", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AnalyzedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<double>("ConfidenceScore")
                        .HasColumnType("double precision");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<double>("NegativeScore")
                        .HasColumnType("double precision");

                    b.Property<double>("NeutralScore")
                        .HasColumnType("double precision");

                    b.Property<double>("PositiveScore")
                        .HasColumnType("double precision");

                    b.Property<int>("Sentiment")
                        .HasColumnType("integer");

                    b.Property<Guid?>("SourceId")
                        .HasColumnType("uuid");

                    b.Property<string>("SourceText")
                        .IsRequired()
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("SourceType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<List<string>>("_topics")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("Topics");

                    b.HasKey("Id");

                    b.HasIndex("Sentiment");

                    b.HasIndex("SourceId");

                    b.HasIndex("SourceType");

                    b.HasIndex("TenantId");

                    b.ToTable("SentimentAnalyses", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Survey", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<double>("AverageScore")
                        .HasColumnType("double precision");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("DelayHours")
                        .HasColumnType("integer");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("ResponseRate")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TotalResponses")
                        .HasColumnType("integer");

                    b.Property<string>("TriggerEvent")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int?>("TriggerStage")
                        .HasColumnType("integer");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("IsActive");

                    b.HasIndex("TenantId");

                    b.HasIndex("TriggerStage");

                    b.HasIndex("Type");

                    b.ToTable("Surveys", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyQuestion", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsRequired")
                        .HasColumnType("boolean");

                    b.Property<string>("OptionsJson")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int>("Order")
                        .HasColumnType("integer");

                    b.Property<string>("QuestionText")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("SurveyId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("SurveyId");

                    b.HasIndex("TenantId");

                    b.ToTable("SurveyQuestions", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyQuestionResponse", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AnsweredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("NumericAnswer")
                        .HasColumnType("integer");

                    b.Property<Guid>("SurveyQuestionId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("SurveyResponseId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TextAnswer")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("SurveyQuestionId");

                    b.HasIndex("SurveyResponseId");

                    b.HasIndex("TenantId");

                    b.ToTable("SurveyQuestionResponses", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyResponse", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("CsatScore")
                        .HasColumnType("integer");

                    b.Property<bool>("IsCompleted")
                        .HasColumnType("boolean");

                    b.Property<int?>("NpsScore")
                        .HasColumnType("integer");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("StartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("SurveyId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CsatScore");

                    b.HasIndex("NpsScore");

                    b.HasIndex("PatientId");

                    b.HasIndex("SurveyId");

                    b.HasIndex("TenantId");

                    b.ToTable("SurveyResponses", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.WebhookDelivery", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<int>("AttemptCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DeliveredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<int>("Event")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("FailedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("NextRetryAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Payload")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ResponseBody")
                        .HasColumnType("text");

                    b.Property<int?>("ResponseStatusCode")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<Guid>("SubscriptionId")
                        .HasColumnType("uuid");

                    b.Property<string>("TargetUrl")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAt");

                    b.HasIndex("NextRetryAt");

                    b.HasIndex("Status");

                    b.HasIndex("SubscriptionId");

                    b.HasIndex("TenantId");

                    b.ToTable("WebhookDeliveries", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.WebhookSubscription", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("FailedDeliveries")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastDeliveryAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LastFailureAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LastSuccessAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("MaxRetries")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(3);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("RetryDelaySeconds")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(60);

                    b.Property<string>("Secret")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("SubscribedEvents")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<int>("SuccessfulDeliveries")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("TargetUrl")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TotalDeliveries")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("IsActive");

                    b.HasIndex("TenantId");

                    b.ToTable("WebhookSubscriptions", "crm");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CashFlowEntry", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid?>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<string>("BankAccount")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid?>("PayableId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("PaymentId")
                        .HasColumnType("uuid");

                    b.Property<string>("PaymentMethod")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("ReceivableId")
                        .HasColumnType("uuid");

                    b.Property<string>("Reference")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("TransactionDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("Category");

                    b.HasIndex("PayableId");

                    b.HasIndex("PaymentId");

                    b.HasIndex("ReceivableId");

                    b.HasIndex("TenantId");

                    b.HasIndex("TransactionDate");

                    b.HasIndex("Type");

                    b.ToTable("CashFlowEntries", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CertificadoDigital", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<byte[]>("CertificadoA1Criptografado")
                        .HasColumnType("bytea");

                    b.Property<byte[]>("ChavePrivadaA1Criptografada")
                        .HasColumnType("bytea");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataCadastro")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataEmissao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataExpiracao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IssuerName")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("MedicoId")
                        .HasColumnType("uuid");

                    b.Property<string>("NumeroCertificado")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("SubjectName")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Thumbprint")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Tipo")
                        .HasColumnType("integer");

                    b.Property<int>("TotalAssinaturas")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("Valido")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.HasIndex("MedicoId");

                    b.HasIndex("TenantId");

                    b.HasIndex("Thumbprint")
                        .IsUnique();

                    b.ToTable("CertificadosDigitais", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatConversation", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("CreatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("LastMessageAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastMessageId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CreatedByUserId")
                        .HasDatabaseName("IX_ChatConversations_CreatedByUserId");

                    b.HasIndex("LastMessageAt")
                        .HasDatabaseName("IX_ChatConversations_LastMessageAt");

                    b.HasIndex("LastMessageId")
                        .HasDatabaseName("IX_ChatConversations_LastMessageId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ChatConversations_TenantId");

                    b.ToTable("ChatConversations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatMessage", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<Guid>("ConversationId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DeletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("EditedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsEdited")
                        .HasColumnType("boolean");

                    b.Property<Guid?>("ReplyToMessageId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("SenderId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("SentAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ConversationId")
                        .HasDatabaseName("IX_ChatMessages_ConversationId");

                    b.HasIndex("ReplyToMessageId");

                    b.HasIndex("SenderId")
                        .HasDatabaseName("IX_ChatMessages_SenderId");

                    b.HasIndex("SentAt")
                        .HasDatabaseName("IX_ChatMessages_SentAt");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ChatMessages_TenantId");

                    b.HasIndex("ConversationId", "SentAt")
                        .HasDatabaseName("IX_ChatMessages_ConversationId_SentAt");

                    b.ToTable("ChatMessages", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatParticipant", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ConversationId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsMuted")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("JoinedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LastReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastReadMessageId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("LeftAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Role")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("UnreadCount")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("ConversationId")
                        .HasDatabaseName("IX_ChatParticipants_ConversationId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ChatParticipants_TenantId");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_ChatParticipants_UserId");

                    b.HasIndex("ConversationId", "UserId")
                        .IsUnique()
                        .HasDatabaseName("IX_ChatParticipants_ConversationId_UserId");

                    b.HasIndex("UserId", "IsActive")
                        .HasDatabaseName("IX_ChatParticipants_UserId_IsActive");

                    b.ToTable("ChatParticipants", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Clinic", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Address")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("AllowEmergencySlots")
                        .HasColumnType("boolean");

                    b.Property<int>("AppointmentDurationMinutes")
                        .HasColumnType("integer");

                    b.Property<string>("ClinicType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<TimeSpan>("ClosingTime")
                        .HasColumnType("interval");

                    b.Property<Guid?>("CompanyId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DefaultPaymentReceiverType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Document")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("DocumentType")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<bool>("EnableOnlineAppointmentScheduling")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("NotifyPrimaryDoctorOnOtherDoctorAppointment")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<int>("NumberOfRooms")
                        .HasColumnType("integer");

                    b.Property<TimeSpan>("OpeningTime")
                        .HasColumnType("interval");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)");

                    b.Property<bool>("ShowOnPublicSite")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Subdomain")
                        .HasColumnType("text");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TradeName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("WhatsAppNumber")
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)");

                    b.HasKey("Id");

                    b.HasIndex("CompanyId")
                        .HasDatabaseName("IX_Clinics_CompanyId");

                    b.HasIndex("ShowOnPublicSite")
                        .HasDatabaseName("IX_Clinics_ShowOnPublicSite");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Clinics_TenantId");

                    b.HasIndex("TenantId", "Document")
                        .IsUnique()
                        .HasDatabaseName("IX_Clinics_TenantId_Document");

                    b.ToTable("Clinics", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicCustomization", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("BackgroundImageUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("FontColor")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("LogoUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("PrimaryColor")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("SecondaryColor")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId")
                        .IsUnique();

                    b.HasIndex("TenantId");

                    b.ToTable("ClinicCustomizations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicSubscription", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CancellationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("CurrentPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("EndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("FrozenEndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("FrozenStartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsFrozen")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsUpgrade")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastPaymentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("ManualOverrideActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("ManualOverrideReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("ManualOverrideSetAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ManualOverrideSetBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("NextPaymentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("PendingPlanId")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("PendingPlanPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("PlanChangeDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("StartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<Guid>("SubscriptionPlanId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("TrialEndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("NextPaymentDate");

                    b.HasIndex("PendingPlanId");

                    b.HasIndex("Status");

                    b.HasIndex("SubscriptionPlanId");

                    b.HasIndex("TenantId", "Status");

                    b.ToTable("ClinicSubscriptions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicTag", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AssignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("AssignedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsAutoAssigned")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<Guid>("TagId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId")
                        .HasDatabaseName("IX_ClinicTags_ClinicId");

                    b.HasIndex("TagId")
                        .HasDatabaseName("IX_ClinicTags_TagId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ClinicTags_TenantId");

                    b.HasIndex("ClinicId", "TagId")
                        .IsUnique()
                        .HasDatabaseName("IX_ClinicTags_ClinicId_TagId");

                    b.ToTable("ClinicTags", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicalExamination", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("BloodPressureDiastolic")
                        .HasPrecision(5, 1)
                        .HasColumnType("numeric(5,1)");

                    b.Property<decimal?>("BloodPressureSystolic")
                        .HasPrecision(5, 1)
                        .HasColumnType("numeric(5,1)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("GeneralState")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int?>("HeartRate")
                        .HasColumnType("integer");

                    b.Property<decimal?>("Height")
                        .HasPrecision(4, 2)
                        .HasColumnType("numeric(4,2)");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("OxygenSaturation")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<int?>("RespiratoryRate")
                        .HasColumnType("integer");

                    b.Property<string>("SystematicExamination")
                        .IsRequired()
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<decimal?>("Temperature")
                        .HasPrecision(4, 1)
                        .HasColumnType("numeric(4,1)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("Weight")
                        .HasPrecision(6, 2)
                        .HasColumnType("numeric(6,2)");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ClinicalExaminations_TenantId");

                    b.HasIndex("TenantId", "MedicalRecordId")
                        .HasDatabaseName("IX_ClinicalExaminations_TenantId_MedicalRecord");

                    b.ToTable("ClinicalExaminations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Company", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Document")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("DocumentType")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)");

                    b.Property<string>("Subdomain")
                        .HasMaxLength(63)
                        .HasColumnType("character varying(63)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TradeName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Document")
                        .IsUnique()
                        .HasDatabaseName("IX_Companies_Document");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Companies_IsActive");

                    b.HasIndex("Subdomain")
                        .IsUnique()
                        .HasDatabaseName("IX_Companies_Subdomain")
                        .HasFilter("\"Subdomain\" IS NOT NULL");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Companies_TenantId");

                    b.ToTable("Companies", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ConsultaDiaria", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<int>("ConsultasCanceladas")
                        .HasColumnType("integer");

                    b.Property<int>("ConsultasRealizadas")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("Data")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataConsolidacao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("EspecialidadeId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("MedicoId")
                        .HasColumnType("uuid");

                    b.Property<int>("NoShow")
                        .HasColumnType("integer");

                    b.Property<decimal?>("NpsMedio")
                        .HasColumnType("numeric");

                    b.Property<decimal>("ReceitaPendente")
                        .HasColumnType("numeric");

                    b.Property<decimal>("ReceitaRecebida")
                        .HasColumnType("numeric");

                    b.Property<decimal>("ReceitaTotal")
                        .HasColumnType("numeric");

                    b.Property<int>("TempoMedioConsultaMinutos")
                        .HasColumnType("integer");

                    b.Property<int>("TempoMedioEsperaMinutos")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("TotalAvaliacoes")
                        .HasColumnType("integer");

                    b.Property<int>("TotalConsultas")
                        .HasColumnType("integer");

                    b.Property<int>("TotalPacientesNovos")
                        .HasColumnType("integer");

                    b.Property<int>("TotalPacientesRetorno")
                        .HasColumnType("integer");

                    b.Property<DateTime>("UltimaAtualizacao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("ConsultasDiarias");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ConsultationFormConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<string>("ConfigurationName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CustomFieldsJson")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("jsonb")
                        .HasDefaultValue("[]");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<Guid?>("ProfileId")
                        .HasColumnType("uuid");

                    b.Property<bool>("RequireChiefComplaint")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireClinicalExamination")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireCurrentMedications")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireDiagnosticHypothesis")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireFamilyHistory")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireHistoryOfPresentIllness")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireInformedConsent")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireLifestyleHabits")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequirePastMedicalHistory")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireTherapeuticPlan")
                        .HasColumnType("boolean");

                    b.Property<bool>("ShowChiefComplaint")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowCurrentMedications")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowFamilyHistory")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowHistoryOfPresentIllness")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowLifestyleHabits")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowPastMedicalHistory")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("ProfileId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ConsultationFormConfigurations_TenantId");

                    b.HasIndex("TenantId", "ProfileId")
                        .HasDatabaseName("IX_ConsultationFormConfigurations_TenantId_ProfileId");

                    b.HasIndex("TenantId", "ClinicId", "IsActive")
                        .HasDatabaseName("IX_ConsultationFormConfigurations_TenantId_ClinicId_IsActive");

                    b.ToTable("ConsultationFormConfigurations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ConsultationFormProfile", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CustomFieldsJson")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("jsonb")
                        .HasDefaultValue("[]");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsSystemDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("RequireChiefComplaint")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireClinicalExamination")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireCurrentMedications")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireDiagnosticHypothesis")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireFamilyHistory")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireHistoryOfPresentIllness")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireInformedConsent")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireLifestyleHabits")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequirePastMedicalHistory")
                        .HasColumnType("boolean");

                    b.Property<bool>("RequireTherapeuticPlan")
                        .HasColumnType("boolean");

                    b.Property<bool>("ShowChiefComplaint")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowCurrentMedications")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowFamilyHistory")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowHistoryOfPresentIllness")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowLifestyleHabits")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("ShowPastMedicalHistory")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<int>("Specialty")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ConsultationFormProfiles_TenantId");

                    b.HasIndex("TenantId", "IsSystemDefault")
                        .HasDatabaseName("IX_ConsultationFormProfiles_TenantId_IsSystemDefault");

                    b.HasIndex("TenantId", "Specialty", "IsActive")
                        .HasDatabaseName("IX_ConsultationFormProfiles_TenantId_Specialty_IsActive");

                    b.ToTable("ConsultationFormProfiles", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ControlledMedicationRegistry", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("ActiveIngredient")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("AnvisaList")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<decimal>("Balance")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<string>("Concentration")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("Date")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DoctorCRM")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("DoctorName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("DocumentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DocumentNumber")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("DocumentType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("MedicationName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("PatientCPF")
                        .HasMaxLength(14)
                        .HasColumnType("character varying(14)");

                    b.Property<string>("PatientName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("PharmaceuticalForm")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("PrescriptionId")
                        .HasColumnType("uuid");

                    b.Property<decimal>("QuantityIn")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<decimal>("QuantityOut")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<DateTime>("RegisteredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("RegisteredByUserId")
                        .HasColumnType("uuid");

                    b.Property<int>("RegistryType")
                        .HasColumnType("integer");

                    b.Property<string>("SupplierCNPJ")
                        .HasMaxLength(18)
                        .HasColumnType("character varying(18)");

                    b.Property<string>("SupplierName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DocumentNumber")
                        .HasDatabaseName("IX_ControlledMedicationRegistries_DocumentNumber");

                    b.HasIndex("PrescriptionId");

                    b.HasIndex("RegisteredByUserId");

                    b.HasIndex("TenantId", "AnvisaList")
                        .HasDatabaseName("IX_ControlledMedicationRegistries_TenantId_AnvisaList");

                    b.HasIndex("TenantId", "Date")
                        .HasDatabaseName("IX_ControlledMedicationRegistries_TenantId_Date");

                    b.HasIndex("TenantId", "MedicationName")
                        .HasDatabaseName("IX_ControlledMedicationRegistries_TenantId_MedicationName");

                    b.HasIndex("TenantId", "PrescriptionId")
                        .HasDatabaseName("IX_ControlledMedicationRegistries_TenantId_PrescriptionId");

                    b.HasIndex("TenantId", "RegistryType", "Date")
                        .HasDatabaseName("IX_ControlledMedicationRegistries_TenantId_Type_Date");

                    b.ToTable("ControlledMedicationRegistries", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CustomDashboard", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsPublic")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Layout")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CreatedBy")
                        .HasDatabaseName("IX_CustomDashboards_CreatedBy");

                    b.HasIndex("IsDefault")
                        .HasDatabaseName("IX_CustomDashboards_IsDefault");

                    b.HasIndex("IsPublic")
                        .HasDatabaseName("IX_CustomDashboards_IsPublic");

                    b.ToTable("CustomDashboards", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DashboardWidget", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Config")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("DashboardId")
                        .HasColumnType("uuid");

                    b.Property<int>("GridHeight")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(3);

                    b.Property<int>("GridWidth")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(4);

                    b.Property<int>("GridX")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("GridY")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("Query")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<int>("RefreshInterval")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DashboardId")
                        .HasDatabaseName("IX_DashboardWidgets_DashboardId");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_DashboardWidgets_Type");

                    b.ToTable("DashboardWidgets", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DataAccessLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AccessReason")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DenialReason")
                        .HasColumnType("text");

                    b.Property<string>("EntityId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("EntityType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<List<string>>("FieldsAccessed")
                        .IsRequired()
                        .HasColumnType("text[]");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Location")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("PatientName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UserRole")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("WasAuthorized")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.ToTable("DataAccessLogs");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DataConsentLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ConsentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ConsentMethod")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ConsentText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ConsentVersion")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("ExpirationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("PatientName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Purpose")
                        .HasColumnType("integer");

                    b.Property<string>("RevocationReason")
                        .HasColumnType("text");

                    b.Property<DateTime?>("RevokedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("DataConsentLogs");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DataDeletionRequest", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("LegalApprovalDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LegalApprover")
                        .HasColumnType("text");

                    b.Property<string>("PatientEmail")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("PatientName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ProcessedByUserId")
                        .HasColumnType("text");

                    b.Property<string>("ProcessedByUserName")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ProcessedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ProcessingNotes")
                        .HasColumnType("text");

                    b.Property<string>("Reason")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("RejectionReason")
                        .HasColumnType("text");

                    b.Property<DateTime>("RequestDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("RequestType")
                        .HasColumnType("integer");

                    b.Property<bool>("RequiresLegalApproval")
                        .HasColumnType("boolean");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("DataDeletionRequests");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DataProcessingConsent", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ConsentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ConsentMethod")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ConsentText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DataCategories")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsRevoked")
                        .HasColumnType("boolean");

                    b.Property<string>("Purpose")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("PurposeDescription")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("RevokedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("ConsentDate");

                    b.HasIndex("TenantId");

                    b.HasIndex("UserId");

                    b.ToTable("DataProcessingConsents", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DiagnosticHypothesis", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime>("DiagnosedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ICD10Code")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_DiagnosticHypotheses_TenantId");

                    b.HasIndex("TenantId", "ICD10Code")
                        .HasDatabaseName("IX_DiagnosticHypotheses_TenantId_ICD10Code");

                    b.HasIndex("TenantId", "MedicalRecordId")
                        .HasDatabaseName("IX_DiagnosticHypotheses_TenantId_MedicalRecord");

                    b.ToTable("DiagnosticHypotheses", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DigitalPrescription", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DigitalSignature")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("DoctorCRM")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("DoctorCRMState")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<Guid>("DoctorId")
                        .HasColumnType("uuid");

                    b.Property<string>("DoctorName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("IssuedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<string>("Notes")
                        .HasMaxLength(1500)
                        .HasColumnType("character varying(1500)");

                    b.Property<string>("PatientDocument")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("PatientName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("ReportedToSNGPCAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("RequiresSNGPCReport")
                        .HasColumnType("boolean");

                    b.Property<string>("SequenceNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("SignatureCertificate")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("SignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("VerificationCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.HasKey("Id");

                    b.HasIndex("DoctorId");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("PatientId");

                    b.HasIndex("VerificationCode")
                        .IsUnique()
                        .HasDatabaseName("IX_DigitalPrescriptions_VerificationCode");

                    b.HasIndex("TenantId", "DoctorId")
                        .HasDatabaseName("IX_DigitalPrescriptions_TenantId_DoctorId");

                    b.HasIndex("TenantId", "MedicalRecordId")
                        .HasDatabaseName("IX_DigitalPrescriptions_TenantId_MedicalRecordId");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_DigitalPrescriptions_TenantId_PatientId");

                    b.HasIndex("TenantId", "SequenceNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_DigitalPrescriptions_TenantId_SequenceNumber")
                        .HasFilter("\"SequenceNumber\" IS NOT NULL");

                    b.HasIndex("TenantId", "Type")
                        .HasDatabaseName("IX_DigitalPrescriptions_TenantId_Type");

                    b.HasIndex("TenantId", "IsActive", "ExpiresAt")
                        .HasDatabaseName("IX_DigitalPrescriptions_Active_Expiration");

                    b.HasIndex("TenantId", "RequiresSNGPCReport", "ReportedToSNGPCAt")
                        .HasDatabaseName("IX_DigitalPrescriptions_SNGPC_Reporting");

                    b.ToTable("DigitalPrescriptions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DigitalPrescriptionItem", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("ActiveIngredient")
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("AdministrationRoute")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("AnvisaRegistration")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("BatchNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int?>("ControlledList")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("DigitalPrescriptionId")
                        .HasColumnType("uuid");

                    b.Property<string>("Dosage")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("DurationDays")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Frequency")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("GenericName")
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("Instructions")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsControlledSubstance")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ManufactureDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("MedicationId")
                        .HasColumnType("uuid");

                    b.Property<string>("MedicationName")
                        .IsRequired()
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("PharmaceuticalForm")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DigitalPrescriptionId");

                    b.HasIndex("MedicationId")
                        .HasDatabaseName("IX_DigitalPrescriptionItems_MedicationId");

                    b.HasIndex("TenantId", "DigitalPrescriptionId")
                        .HasDatabaseName("IX_DigitalPrescriptionItems_TenantId_PrescriptionId");

                    b.HasIndex("TenantId", "IsControlledSubstance")
                        .HasDatabaseName("IX_DigitalPrescriptionItems_TenantId_Controlled");

                    b.ToTable("DigitalPrescriptionItems", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DocumentTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid?>("GlobalTemplateId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSystem")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Specialty")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .IsRequired()
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Variables")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("GlobalTemplateId")
                        .HasDatabaseName("ix_documenttemplates_globaltemplateid");

                    b.HasIndex("IsSystem")
                        .HasDatabaseName("IX_DocumentTemplates_IsSystem");

                    b.HasIndex("Specialty")
                        .HasDatabaseName("IX_DocumentTemplates_Specialty");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_DocumentTemplates_TenantId");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_DocumentTemplates_Type");

                    b.HasIndex("TenantId", "ClinicId")
                        .HasDatabaseName("IX_DocumentTemplates_TenantId_ClinicId");

                    b.ToTable("DocumentTemplates", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ElectronicInvoice", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AccessKey")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ApuracaoImpostosId")
                        .HasColumnType("uuid");

                    b.Property<string>("AuthorizationCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("AuthorizationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("CancellationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CancellationProtocol")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ClientAddress")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ClientCity")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("ClientCpfCnpj")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ClientEmail")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("ClientName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("ClientPhone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ClientState")
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("ClientZipCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<decimal>("CofinsAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("CsllAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("ErrorCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal>("InssAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("IrAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("IssAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("IssRate")
                        .HasColumnType("decimal(5,2)");

                    b.Property<bool>("IssRetained")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("IssueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ItemCode")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<decimal>("NetAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("Number")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<Guid?>("PaymentId")
                        .HasColumnType("uuid");

                    b.Property<string>("PdfUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<decimal>("PisAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("Protocol")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ProviderAddress")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ProviderCity")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("ProviderCnpj")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ProviderMunicipalRegistration")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ProviderName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("ProviderState")
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("ProviderStateRegistration")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ProviderZipCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<Guid?>("ReplacedInvoiceId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ReplacementInvoiceId")
                        .HasColumnType("uuid");

                    b.Property<string>("RpsNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("Series")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<decimal>("ServiceAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("ServiceCode")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ServiceDescription")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalTaxes")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("VerificationCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("XmlContent")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("AccessKey")
                        .IsUnique()
                        .HasDatabaseName("IX_ElectronicInvoices_AccessKey")
                        .HasFilter("\"AccessKey\" IS NOT NULL");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("ApuracaoImpostosId");

                    b.HasIndex("PaymentId");

                    b.HasIndex("TenantId", "AppointmentId")
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_AppointmentId");

                    b.HasIndex("TenantId", "ClientCpfCnpj")
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_ClientCpfCnpj");

                    b.HasIndex("TenantId", "IssueDate")
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_IssueDate");

                    b.HasIndex("TenantId", "PaymentId")
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_PaymentId");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_Status");

                    b.HasIndex("TenantId", "Type")
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_Type");

                    b.HasIndex("TenantId", "Number", "Series")
                        .IsUnique()
                        .HasDatabaseName("IX_ElectronicInvoices_TenantId_Number_Series")
                        .HasFilter("\"Number\" <> ''");

                    b.ToTable("ElectronicInvoices", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.EmailVerificationToken", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsUsed")
                        .HasColumnType("boolean");

                    b.Property<string>("Purpose")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UsedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.Property<int>("VerificationAttempts")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.HasKey("Id");

                    b.HasIndex("TenantId", "ExpiresAt")
                        .HasDatabaseName("IX_EmailVerificationTokens_TenantId_ExpiresAt");

                    b.HasIndex("Code", "UserId", "TenantId")
                        .HasDatabaseName("IX_EmailVerificationTokens_Code_UserId_TenantId");

                    b.HasIndex("UserId", "TenantId", "CreatedAt")
                        .HasDatabaseName("IX_EmailVerificationTokens_UserId_TenantId_CreatedAt");

                    b.ToTable("EmailVerificationTokens", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.EncryptionKey", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Algorithm")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("EncryptedKeyMaterial")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("KeyId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("KeyVersion")
                        .HasColumnType("integer");

                    b.Property<string>("Purpose")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("RotatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("RotatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAt");

                    b.HasIndex("IsActive", "TenantId");

                    b.HasIndex("KeyId", "KeyVersion", "TenantId")
                        .IsUnique();

                    b.ToTable("EncryptionKeys", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ExamCatalog", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("ExamType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("Preparation")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Synonyms")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TussCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_ExamCatalogs_Category");

                    b.HasIndex("ExamType")
                        .HasDatabaseName("IX_ExamCatalogs_ExamType");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_ExamCatalogs_IsActive");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ExamCatalogs_TenantId");

                    b.HasIndex("TenantId", "Name")
                        .HasDatabaseName("IX_ExamCatalogs_TenantId_Name");

                    b.ToTable("ExamCatalogs", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ExamRequest", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("ExamName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("ExamType")
                        .HasColumnType("integer");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("RequestedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Results")
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<DateTime?>("ScheduledDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Urgency")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId")
                        .HasDatabaseName("IX_ExamRequests_AppointmentId");

                    b.HasIndex("PatientId")
                        .HasDatabaseName("IX_ExamRequests_PatientId");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_ExamRequests_Status");

                    b.HasIndex("Status", "Urgency")
                        .HasDatabaseName("IX_ExamRequests_Status_Urgency");

                    b.ToTable("ExamRequests", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Expense", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("DueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("PaidDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("PaymentMethod")
                        .HasColumnType("integer");

                    b.Property<string>("PaymentReference")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("SupplierDocument")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("SupplierName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category");

                    b.HasIndex("ClinicId");

                    b.HasIndex("DueDate");

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.ToTable("Expenses", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ExternalServiceConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AccessToken")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("AccountId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("AdditionalConfiguration")
                        .HasColumnType("text");

                    b.Property<string>("ApiKey")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("ApiSecret")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("ApiUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ClientId")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ClientSecret")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int>("ErrorCount")
                        .HasColumnType("integer");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("LastError")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("LastSyncAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ProjectId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("RefreshToken")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("Region")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("ServiceName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("ServiceType")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("TokenExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("WebhookUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId")
                        .HasDatabaseName("IX_ExternalServiceConfigurations_ClinicId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ExternalServiceConfigurations_TenantId");

                    b.HasIndex("TenantId", "IsActive")
                        .HasDatabaseName("IX_ExternalServiceConfigurations_TenantId_IsActive");

                    b.HasIndex("TenantId", "ServiceType", "ClinicId")
                        .IsUnique()
                        .HasDatabaseName("IX_ExternalServiceConfigurations_TenantId_ServiceType_ClinicId");

                    b.ToTable("ExternalServiceConfigurations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FilaEspera", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("Ativa")
                        .HasColumnType("boolean");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Nome")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("TempoMedioAtendimento")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Tipo")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("UsaAgendamento")
                        .HasColumnType("boolean");

                    b.Property<bool>("UsaPrioridade")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.HasIndex("ClinicaId");

                    b.HasIndex("TenantId");

                    b.HasIndex("ClinicaId", "Ativa");

                    b.ToTable("FilasEspera", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FinancialClosure", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("ClosureDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ClosureNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("DiscountAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("DiscountReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid?>("HealthInsuranceOperatorId")
                        .HasColumnType("uuid");

                    b.Property<decimal>("InsuranceAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal>("OutstandingAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PaidAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PatientAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<int>("PaymentType")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("SettlementDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("ClosureDate");

                    b.HasIndex("ClosureNumber")
                        .IsUnique();

                    b.HasIndex("HealthInsuranceOperatorId");

                    b.HasIndex("PatientId");

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.ToTable("FinancialClosures", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FinancialClosureItem", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClosureId")
                        .HasColumnType("uuid");

                    b.Property<bool>("CoverByInsurance")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<decimal>("Quantity")
                        .HasColumnType("decimal(18,3)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("UnitPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClosureId");

                    b.HasIndex("TenantId");

                    b.ToTable("FinancialClosureItems", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ApuracaoImpostos", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("AliquotaEfetiva")
                        .HasColumnType("decimal(5,2)");

                    b.Property<int>("Ano")
                        .HasColumnType("integer");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<string>("ComprovantesPagamento")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataApuracao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataPagamento")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("Deducoes")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("FaturamentoBruto")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("Mes")
                        .HasColumnType("integer");

                    b.Property<decimal?>("ReceitaBruta12Meses")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalCOFINS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("TotalCSLL")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("TotalINSS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("TotalIR")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("TotalISS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("TotalPIS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("ValorDAS")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.HasIndex("DataApuracao")
                        .HasDatabaseName("IX_ApuracoesImpostos_DataApuracao");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_ApuracoesImpostos_Status");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ApuracoesImpostos_TenantId");

                    b.HasIndex("ClinicaId", "Mes", "Ano")
                        .IsUnique()
                        .HasDatabaseName("IX_ApuracoesImpostos_ClinicaId_Mes_Ano");

                    b.ToTable("ApuracoesImpostos", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.BalancoPatrimonial", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal>("AmortizacaoAcumulada")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("AtivoCirculante")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("AtivoNaoCirculante")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("AtivoRealizavelLongoPrazo")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("CapitalSocial")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<decimal>("ContasReceber")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataGeracao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataReferencia")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("DepreciacaoAcumulada")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("DisponibilidadesCaixa")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("EmprestimosFinanciamentos")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("EmprestimosLongoPrazo")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("Estoques")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("FornecedoresPagar")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("Imobilizado")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("Intangivel")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("Investimentos")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("LucrosAcumulados")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ObrigacoesTrabalhistas")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ObrigacoesTributarias")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("OutrosAtivosCirculantes")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("OutrosPassivosCirculantes")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("OutrosPassivosNaoCirculantes")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PassivoCirculante")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PassivoNaoCirculante")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PatrimonioLiquido")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("PrejuizosAcumulados")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ReservasCapital")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ReservasLucros")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalAtivo")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("TotalPassivo")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DataGeracao")
                        .HasDatabaseName("IX_BalancosPatrimoniais_DataGeracao");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_BalancosPatrimoniais_TenantId");

                    b.HasIndex("ClinicaId", "DataReferencia")
                        .IsUnique()
                        .HasDatabaseName("IX_BalancosPatrimoniais_ClinicaId_DataReferencia");

                    b.ToTable("BalancosPatrimoniais", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ConfiguracaoFiscal", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal>("AliquotaCOFINS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaCSLL")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaINSS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaIR")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaISS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaPIS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<int?>("AnexoSimples")
                        .HasColumnType("integer");

                    b.Property<string>("CNAE")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<string>("CodigoServico")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("FatorR")
                        .HasColumnType("decimal(5,2)");

                    b.Property<bool>("ISS_Retido")
                        .HasColumnType("boolean");

                    b.Property<string>("InscricaoMunicipal")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("OptanteSimplesNacional")
                        .HasColumnType("boolean");

                    b.Property<int>("Regime")
                        .HasColumnType("integer");

                    b.Property<bool>("RetemINSS")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("VigenciaFim")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("VigenciaInicio")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Regime")
                        .HasDatabaseName("IX_ConfiguracoesFiscais_Regime");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ConfiguracoesFiscais_TenantId");

                    b.HasIndex("ClinicaId", "VigenciaInicio")
                        .HasDatabaseName("IX_ConfiguracoesFiscais_ClinicaId_VigenciaInicio");

                    b.ToTable("ConfiguracoesFiscais", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.DRE", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal>("CSLL")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("CustoServicos")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("DataGeracao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("Deducoes")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("DepreciacaoAmortizacao")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("DespesasAdministrativas")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("DespesasComerciais")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("DespesasFinanceiras")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("DespesasOperacionais")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("EBIT")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("EBITDA")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ImpostoRenda")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("LucroAntesIR")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("LucroBruto")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("LucroLiquido")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("MargemBruta")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("MargemEBITDA")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("MargemLiquida")
                        .HasColumnType("decimal(5,2)");

                    b.Property<DateTime>("PeriodoFim")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("PeriodoInicio")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("ReceitaBruta")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ReceitaLiquida")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ReceitasFinanceiras")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ResultadoFinanceiro")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DataGeracao")
                        .HasDatabaseName("IX_DREs_DataGeracao");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_DREs_TenantId");

                    b.HasIndex("ClinicaId", "PeriodoInicio", "PeriodoFim")
                        .HasDatabaseName("IX_DREs_ClinicaId_Periodo");

                    b.ToTable("DREs", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ImpostoNota", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal>("AliquotaCOFINS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaCSLL")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaINSS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaIR")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaISS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("AliquotaPIS")
                        .HasColumnType("decimal(5,2)");

                    b.Property<string>("CodigoServicoMunicipal")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataCalculo")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("INSSRetido")
                        .HasColumnType("boolean");

                    b.Property<bool>("ISSRetido")
                        .HasColumnType("boolean");

                    b.Property<Guid>("NotaFiscalId")
                        .HasColumnType("uuid");

                    b.Property<string>("RegimeTributario")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("ValorBruto")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorCOFINS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorCSLL")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorDesconto")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorINSS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorIR")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorISS")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorPIS")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.HasIndex("DataCalculo")
                        .HasDatabaseName("IX_ImpostosNotas_DataCalculo");

                    b.HasIndex("NotaFiscalId")
                        .IsUnique()
                        .HasDatabaseName("IX_ImpostosNotas_NotaFiscalId");

                    b.HasIndex("RegimeTributario")
                        .HasDatabaseName("IX_ImpostosNotas_RegimeTributario");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_ImpostosNotas_TenantId");

                    b.ToTable("ImpostosNotas", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.LancamentoContabil", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataLancamento")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DocumentoOrigemId")
                        .HasColumnType("uuid");

                    b.Property<string>("Historico")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid?>("LoteId")
                        .HasColumnType("uuid");

                    b.Property<string>("NumeroDocumento")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int>("Origem")
                        .HasColumnType("integer");

                    b.Property<Guid>("PlanoContasId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Tipo")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("Valor")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.HasIndex("DocumentoOrigemId")
                        .HasDatabaseName("IX_LancamentosContabeis_DocumentoOrigemId");

                    b.HasIndex("LoteId")
                        .HasDatabaseName("IX_LancamentosContabeis_LoteId");

                    b.HasIndex("Origem")
                        .HasDatabaseName("IX_LancamentosContabeis_Origem");

                    b.HasIndex("PlanoContasId")
                        .HasDatabaseName("IX_LancamentosContabeis_PlanoContasId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_LancamentosContabeis_TenantId");

                    b.HasIndex("Tipo")
                        .HasDatabaseName("IX_LancamentosContabeis_Tipo");

                    b.HasIndex("ClinicaId", "DataLancamento")
                        .HasDatabaseName("IX_LancamentosContabeis_ClinicaId_DataLancamento");

                    b.ToTable("LancamentosContabeis", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.PlanoContas", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<bool>("Analitica")
                        .HasColumnType("boolean");

                    b.Property<bool>("Ativa")
                        .HasColumnType("boolean");

                    b.Property<Guid>("ClinicaId")
                        .HasColumnType("uuid");

                    b.Property<string>("Codigo")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("ContaPaiId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Natureza")
                        .HasColumnType("integer");

                    b.Property<int>("Nivel")
                        .HasColumnType("integer");

                    b.Property<string>("Nome")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Observacoes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Tipo")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ContaPaiId")
                        .HasDatabaseName("IX_PlanoContas_ContaPaiId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_PlanoContas_TenantId");

                    b.HasIndex("Tipo")
                        .HasDatabaseName("IX_PlanoContas_Tipo");

                    b.HasIndex("ClinicaId", "Analitica")
                        .HasDatabaseName("IX_PlanoContas_ClinicaId_Analitica");

                    b.HasIndex("ClinicaId", "Ativa")
                        .HasDatabaseName("IX_PlanoContas_ClinicaId_Ativa");

                    b.HasIndex("ClinicaId", "Codigo")
                        .IsUnique()
                        .HasDatabaseName("IX_PlanoContas_ClinicaId_Codigo");

                    b.ToTable("PlanoContas", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.GlobalDocumentTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Specialty")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Variables")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("ix_globaldocumenttemplates_isactive");

                    b.HasIndex("Specialty")
                        .HasDatabaseName("ix_globaldocumenttemplates_specialty");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("ix_globaldocumenttemplates_tenantid");

                    b.HasIndex("Type")
                        .HasDatabaseName("ix_globaldocumenttemplates_type");

                    b.HasIndex("Name", "Type", "TenantId")
                        .HasDatabaseName("ix_globaldocumenttemplates_name_type_tenantid");

                    b.ToTable("globaldocumenttemplates", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.HealthInsuranceOperator", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("ApiEndpoint")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ApiKey")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("BatchSubmissionEmail")
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<string>("CompanyName")
                        .IsRequired()
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("ContactPerson")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Document")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("Email")
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<int>("IntegrationType")
                        .HasColumnType("integer");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Phone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("RegisterNumber")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<bool>("RequiresPriorAuthorization")
                        .HasColumnType("boolean");

                    b.Property<bool>("SupportsTissXml")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TissVersion")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("TradeName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("WebsiteUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_HealthInsuranceOperators_TenantId");

                    b.HasIndex("TradeName")
                        .HasDatabaseName("IX_HealthInsuranceOperators_TradeName");

                    b.HasIndex("TenantId", "RegisterNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_HealthInsuranceOperators_TenantId_RegisterNumber");

                    b.ToTable("HealthInsuranceOperators", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.HealthInsurancePlan", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<bool>("CoversConsultations")
                        .HasColumnType("boolean");

                    b.Property<bool>("CoversExams")
                        .HasColumnType("boolean");

                    b.Property<bool>("CoversProcedures")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("HolderName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("InsuranceName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("OldPlanType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("PlanType");

                    b.Property<Guid>("OperatorId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("PlanCode")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("PlanName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("PlanNumber")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("RegisterNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<bool>("RequiresPriorAuthorization")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("TissEnabled")
                        .HasColumnType("boolean");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ValidFrom")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ValidUntil")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("OperatorId")
                        .HasDatabaseName("IX_HealthInsurancePlans_OperatorId");

                    b.HasIndex("PatientId");

                    b.HasIndex("PlanCode")
                        .HasDatabaseName("IX_HealthInsurancePlans_PlanCode");

                    b.HasIndex("PlanNumber")
                        .HasDatabaseName("IX_HealthInsurancePlans_PlanNumber");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_HealthInsurancePlans_TenantId");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_HealthInsurancePlans_TenantId_PatientId");

                    b.ToTable("HealthInsurancePlans", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.InformedConsent", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AcceptedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ConsentText")
                        .IsRequired()
                        .HasMaxLength(10000)
                        .HasColumnType("character varying(10000)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DigitalSignature")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("IPAddress")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<bool>("IsAccepted")
                        .HasColumnType("boolean");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("RegisteredByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("PatientId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_InformedConsents_TenantId");

                    b.HasIndex("TenantId", "IsAccepted")
                        .HasDatabaseName("IX_InformedConsents_TenantId_IsAccepted");

                    b.HasIndex("TenantId", "MedicalRecordId")
                        .HasDatabaseName("IX_InformedConsents_TenantId_MedicalRecord");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_InformedConsents_TenantId_Patient");

                    b.ToTable("InformedConsents", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Invoice", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("CancellationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CustomerAddress")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("CustomerDocument")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CustomerName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("DueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("InvoiceNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("IssueDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("PaidDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("PaymentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("SentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<decimal>("TaxAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DueDate");

                    b.HasIndex("InvoiceNumber")
                        .IsUnique();

                    b.HasIndex("PaymentId")
                        .IsUnique();

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.ToTable("Invoices", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.InvoiceConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Address")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("AddressComplement")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("AddressNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<bool>("AutoIssueAfterPayment")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("CertificateExpirationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CertificatePassword")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("CertificateThumbprint")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("City")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("CityCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<string>("Cnpj")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("CompanyName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("CurrentInvoiceNumber")
                        .HasColumnType("integer");

                    b.Property<int>("CurrentRpsNumber")
                        .HasColumnType("integer");

                    b.Property<string>("DefaultInvoiceSeries")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<decimal>("DefaultIssRate")
                        .HasColumnType("decimal(5,2)");

                    b.Property<byte[]>("DigitalCertificate")
                        .HasColumnType("bytea");

                    b.Property<string>("Email")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("EmailTemplate")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int>("Gateway")
                        .HasColumnType("integer");

                    b.Property<string>("GatewayApiKey")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("GatewayEnvironment")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSimplifiedTaxRegime")
                        .HasColumnType("boolean");

                    b.Property<bool>("IssRetainedByDefault")
                        .HasColumnType("boolean");

                    b.Property<string>("MunicipalRegistration")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Neighborhood")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Phone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<bool>("SendEmailAfterIssuance")
                        .HasColumnType("boolean");

                    b.Property<string>("ServiceCode")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("SimplifiedTaxRegimeCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<string>("State")
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("StateRegistration")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TradeName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ZipCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.HasKey("Id");

                    b.HasIndex("Cnpj")
                        .HasDatabaseName("IX_InvoiceConfigurations_Cnpj");

                    b.HasIndex("TenantId")
                        .IsUnique()
                        .HasDatabaseName("IX_InvoiceConfigurations_TenantId");

                    b.HasIndex("TenantId", "IsActive")
                        .HasDatabaseName("IX_InvoiceConfigurations_TenantId_IsActive");

                    b.ToTable("InvoiceConfigurations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.LoginAttempt", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AttemptTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("FailureReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("WasSuccessful")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.HasIndex("AttemptTime");

                    b.HasIndex("IpAddress");

                    b.HasIndex("TenantId");

                    b.HasIndex("Username");

                    b.HasIndex("Username", "WasSuccessful", "AttemptTime");

                    b.ToTable("LoginAttempts", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Material", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<int>("MinimumStock")
                        .HasColumnType("integer");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("StockQuantity")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Unit")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<decimal>("UnitPrice")
                        .HasPrecision(18, 2)
                        .HasColumnType("numeric(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Code", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("IX_Materials_Code_TenantId");

                    b.ToTable("Materials", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecord", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<string>("ChiefComplaint")
                        .IsRequired()
                        .HasMaxLength(750)
                        .HasColumnType("character varying(750)");

                    b.Property<DateTime?>("ClosedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ClosedByUserId")
                        .HasColumnType("uuid");

                    b.Property<int>("ConsultationDurationMinutes")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ConsultationEndTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ConsultationStartTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CurrentMedications")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<int>("CurrentVersion")
                        .HasColumnType("integer");

                    b.Property<string>("Diagnosis")
                        .IsRequired()
                        .HasMaxLength(3000)
                        .HasColumnType("character varying(3000)");

                    b.Property<string>("FamilyHistory")
                        .HasMaxLength(3000)
                        .HasColumnType("character varying(3000)");

                    b.Property<string>("HistoryOfPresentIllness")
                        .IsRequired()
                        .HasMaxLength(7000)
                        .HasColumnType("character varying(7000)");

                    b.Property<bool>("IsClosed")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("LifestyleHabits")
                        .HasMaxLength(3000)
                        .HasColumnType("character varying(3000)");

                    b.Property<string>("Notes")
                        .IsRequired()
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("PastMedicalHistory")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("Prescription")
                        .IsRequired()
                        .HasMaxLength(7000)
                        .HasColumnType("character varying(7000)");

                    b.Property<string>("ProfessionalSignature")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ReopenReason")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ReopenedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ReopenedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("PatientId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_MedicalRecords_TenantId");

                    b.HasIndex("TenantId", "AppointmentId")
                        .IsUnique()
                        .HasDatabaseName("IX_MedicalRecords_TenantId_Appointment");

                    b.HasIndex("TenantId", "IsClosed")
                        .HasDatabaseName("IX_MedicalRecords_TenantId_IsClosed");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_MedicalRecords_TenantId_Patient");

                    b.ToTable("MedicalRecords", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordAccessLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AccessType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("AccessedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Details")
                        .HasColumnType("text");

                    b.Property<string>("IpAddress")
                        .HasColumnType("text");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .HasColumnType("text");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("UserId");

                    b.ToTable("MedicalRecordAccessLogs");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordSignature", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("CertificateData")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("MedicalRecordVersionId")
                        .HasColumnType("uuid");

                    b.Property<string>("SignatureType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("SignatureValue")
                        .HasColumnType("text");

                    b.Property<DateTime>("SignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("SignedById")
                        .HasColumnType("uuid");

                    b.Property<Guid>("SignedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordVersionId");

                    b.HasIndex("SignedById");

                    b.ToTable("MedicalRecordSignatures");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TemplateContent")
                        .IsRequired()
                        .HasMaxLength(10000)
                        .HasColumnType("character varying(10000)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId", "Category")
                        .HasDatabaseName("IX_MedicalRecordTemplates_TenantId_Category");

                    b.HasIndex("TenantId", "Name")
                        .HasDatabaseName("IX_MedicalRecordTemplates_TenantId_Name");

                    b.ToTable("MedicalRecordTemplates", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordVersion", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ChangeReason")
                        .HasColumnType("text");

                    b.Property<string>("ChangeType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("ChangedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ChangedById")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ChangedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("ChangesSummary")
                        .HasColumnType("text");

                    b.Property<string>("ContentHash")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<string>("PreviousVersionHash")
                        .HasColumnType("text");

                    b.Property<string>("SnapshotJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Version")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("ChangedById");

                    b.HasIndex("MedicalRecordId");

                    b.ToTable("MedicalRecordVersions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Medication", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("ActiveIngredient")
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("AdministrationRoute")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("AnvisaRegistration")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Barcode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Concentration")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int?>("ControlledList")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Dosage")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("GenericName")
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsControlled")
                        .HasColumnType("boolean");

                    b.Property<string>("Manufacturer")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("PharmaceuticalForm")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("RequiresPrescription")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_Medications_Category");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Medications_IsActive");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Medications_TenantId");

                    b.HasIndex("TenantId", "Name")
                        .HasDatabaseName("IX_Medications_TenantId_Name");

                    b.ToTable("Medications", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MessageReadReceipt", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("MessageId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("MessageId")
                        .HasDatabaseName("IX_MessageReadReceipts_MessageId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_MessageReadReceipts_TenantId");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_MessageReadReceipts_UserId");

                    b.HasIndex("MessageId", "UserId")
                        .IsUnique()
                        .HasDatabaseName("IX_MessageReadReceipts_MessageId_UserId");

                    b.ToTable("MessageReadReceipts", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ModuleConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<string>("Configuration")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("ModuleName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("ClinicId", "ModuleName")
                        .IsUnique();

                    b.HasIndex("TenantId", "IsEnabled");

                    b.ToTable("ModuleConfigurations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ModuleConfigurationHistory", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("ChangedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ChangedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ModuleConfigurationId")
                        .HasColumnType("uuid");

                    b.Property<string>("ModuleName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("NewConfiguration")
                        .HasColumnType("jsonb");

                    b.Property<string>("PreviousConfiguration")
                        .HasColumnType("jsonb");

                    b.Property<string>("Reason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ChangedAt")
                        .HasDatabaseName("IX_ModuleConfigurationHistories_ChangedAt");

                    b.HasIndex("ModuleConfigurationId");

                    b.HasIndex("ClinicId", "ModuleName")
                        .HasDatabaseName("IX_ModuleConfigurationHistories_ClinicId_ModuleName");

                    b.ToTable("ModuleConfigurationHistories", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MonthlyControlledBalance", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("ActiveIngredient")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("AnvisaList")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<decimal>("CalculatedFinalBalance")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<DateTime?>("ClosedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ClosedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("Discrepancy")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<string>("DiscrepancyReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<decimal>("InitialBalance")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<string>("MedicationName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Month")
                        .HasColumnType("integer");

                    b.Property<decimal?>("PhysicalBalance")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("TotalIn")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<decimal>("TotalOut")
                        .HasPrecision(18, 3)
                        .HasColumnType("numeric(18,3)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Year")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("ClosedByUserId");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_MonthlyControlledBalances_TenantId_Status");

                    b.HasIndex("TenantId", "MedicationName", "Year")
                        .HasDatabaseName("IX_MonthlyControlledBalances_TenantId_Medication_Year");

                    b.HasIndex("TenantId", "Year", "Month")
                        .HasDatabaseName("IX_MonthlyControlledBalances_TenantId_Year_Month");

                    b.HasIndex("TenantId", "Year", "Month", "MedicationName")
                        .IsUnique()
                        .HasDatabaseName("IX_MonthlyControlledBalances_TenantId_Year_Month_Medication");

                    b.ToTable("MonthlyControlledBalances", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Notification", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<string>("Channel")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DeliveredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Recipient")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("RetryCount")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("SentAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId")
                        .HasDatabaseName("IX_Notifications_AppointmentId");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_Notifications_CreatedAt");

                    b.HasIndex("PatientId")
                        .HasDatabaseName("IX_Notifications_PatientId");

                    b.HasIndex("Status", "RetryCount")
                        .HasDatabaseName("IX_Notifications_Status_RetryCount");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_Notifications_TenantId_Status");

                    b.ToTable("Notifications", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.NotificationRoutine", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Channel")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastExecutedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("MaxRetries")
                        .HasColumnType("integer");

                    b.Property<string>("MessageTemplate")
                        .IsRequired()
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("NextExecutionAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("RecipientFilter")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("ScheduleConfiguration")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("ScheduleType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Scope")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("NextExecutionAt")
                        .HasDatabaseName("IX_NotificationRoutines_NextExecutionAt");

                    b.HasIndex("Channel", "TenantId")
                        .HasDatabaseName("IX_NotificationRoutines_Channel_TenantId");

                    b.HasIndex("Scope", "IsActive")
                        .HasDatabaseName("IX_NotificationRoutines_Scope_IsActive");

                    b.HasIndex("TenantId", "IsActive")
                        .HasDatabaseName("IX_NotificationRoutines_TenantId_IsActive");

                    b.HasIndex("Type", "TenantId")
                        .HasDatabaseName("IX_NotificationRoutines_Type_TenantId");

                    b.ToTable("NotificationRoutines", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.NotificationRule", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Actions")
                        .HasColumnType("text");

                    b.Property<string>("Conditions")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Trigger")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("NotificationRules");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Owner", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CurrentSessionId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Document")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("DocumentType")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastLoginAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ProfessionalId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Specialty")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("Email");

                    b.HasIndex("Username")
                        .IsUnique();

                    b.HasIndex("TenantId", "IsActive");

                    b.ToTable("Owners", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.OwnerClinicLink", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("InactivatedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("InactivationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPrimaryOwner")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("LinkedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("OwnershipPercentage")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<string>("Role")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("OwnerId")
                        .HasDatabaseName("IX_OwnerClinicLinks_OwnerId");

                    b.HasIndex("ClinicId", "IsPrimaryOwner")
                        .HasDatabaseName("IX_OwnerClinicLinks_ClinicId_IsPrimaryOwner");

                    b.HasIndex("OwnerId", "ClinicId")
                        .IsUnique()
                        .HasDatabaseName("IX_OwnerClinicLinks_Owner_Clinic");

                    b.HasIndex("TenantId", "ClinicId")
                        .HasDatabaseName("IX_OwnerClinicLinks_TenantId_ClinicId");

                    b.ToTable("OwnerClinicLinks", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.OwnerSession", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IpAddress")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<DateTime>("LastActivityAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<string>("SessionId")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("ExpiresAt")
                        .HasDatabaseName("idx_ownersession_expiresat");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("idx_ownersession_tenantid");

                    b.HasIndex("OwnerId", "SessionId")
                        .IsUnique()
                        .HasDatabaseName("idx_ownersession_ownerid_sessionid");

                    b.ToTable("owner_sessions", "public");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PasswordResetToken", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Destination")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsUsed")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsVerified")
                        .HasColumnType("boolean");

                    b.Property<int>("Method")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Token")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UsedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.Property<int>("VerificationAttempts")
                        .HasColumnType("integer");

                    b.Property<string>("VerificationCode")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<DateTime?>("VerifiedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Token")
                        .IsUnique();

                    b.HasIndex("UserId");

                    b.HasIndex("TenantId", "IsUsed", "ExpiresAt");

                    b.ToTable("PasswordResetTokens", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Patient", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Allergies")
                        .HasMaxLength(1500)
                        .HasColumnType("character varying(1500)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DateOfBirth")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Document")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("DocumentHash")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Gender")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<Guid?>("GuardianId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("MedicalHistory")
                        .HasMaxLength(3000)
                        .HasColumnType("character varying(3000)");

                    b.Property<string>("MotherName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("DocumentHash")
                        .HasDatabaseName("IX_Patients_DocumentHash");

                    b.HasIndex("GuardianId")
                        .HasDatabaseName("IX_Patients_GuardianId");

                    b.HasIndex("Name")
                        .HasDatabaseName("IX_Patients_Name");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Patients_TenantId");

                    b.HasIndex("TenantId", "Document")
                        .IsUnique()
                        .HasDatabaseName("IX_Patients_TenantId_Document");

                    b.ToTable("Patients", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PatientClinicLink", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("LinkedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("PrimaryDoctorId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("PatientId")
                        .HasDatabaseName("IX_PatientClinicLinks_PatientId");

                    b.HasIndex("PrimaryDoctorId");

                    b.HasIndex("TenantId", "ClinicId")
                        .HasDatabaseName("IX_PatientClinicLinks_TenantId_ClinicId");

                    b.HasIndex("PatientId", "ClinicId", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("IX_PatientClinicLinks_Patient_Clinic_Tenant");

                    b.ToTable("PatientClinicLinks", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PatientHealthInsurance", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("CardNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CardValidationCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("HealthInsurancePlanId")
                        .HasColumnType("uuid");

                    b.Property<string>("HolderDocument")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("HolderName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsHolder")
                        .HasColumnType("boolean");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ValidFrom")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ValidUntil")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("HealthInsurancePlanId");

                    b.HasIndex("PatientId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_PatientHealthInsurances_TenantId");

                    b.HasIndex("TenantId", "CardNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_PatientHealthInsurances_TenantId_CardNumber");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_PatientHealthInsurances_TenantId_PatientId");

                    b.ToTable("PatientHealthInsurances", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PayablePayment", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid>("PayableId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("PaymentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TransactionId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("PayableId");

                    b.HasIndex("PaymentDate");

                    b.HasIndex("TenantId");

                    b.ToTable("PayablePayments", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Payment", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid?>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CancellationDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("CardLastFourDigits")
                        .HasMaxLength(4)
                        .HasColumnType("character varying(4)");

                    b.Property<Guid?>("ClinicSubscriptionId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Method")
                        .HasColumnType("integer");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("PaymentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PixKey")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("PixTransactionId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("ProcessedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TransactionId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("ClinicSubscriptionId");

                    b.HasIndex("PaymentDate");

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.ToTable("Payments", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PrescriptionItem", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Dosage")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("DurationDays")
                        .HasColumnType("integer");

                    b.Property<string>("Frequency")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Instructions")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("MedicationId")
                        .HasColumnType("uuid");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("MedicationId")
                        .HasDatabaseName("IX_PrescriptionItems_MedicationId");

                    b.HasIndex("TenantId", "MedicalRecordId")
                        .HasDatabaseName("IX_PrescriptionItems_TenantId_MedicalRecordId");

                    b.ToTable("PrescriptionItems", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PrescriptionSequenceControl", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("CurrentSequence")
                        .HasColumnType("integer");

                    b.Property<DateTime>("LastGeneratedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Prefix")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TotalGenerated")
                        .HasColumnType("integer");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Year")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("TenantId", "Year")
                        .HasDatabaseName("IX_PrescriptionSequenceControls_TenantId_Year");

                    b.HasIndex("TenantId", "Type", "Year")
                        .IsUnique()
                        .HasDatabaseName("IX_PrescriptionSequenceControls_Unique");

                    b.ToTable("PrescriptionSequenceControls", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PrescriptionTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TemplateContent")
                        .IsRequired()
                        .HasMaxLength(10000)
                        .HasColumnType("character varying(10000)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId", "Category")
                        .HasDatabaseName("IX_PrescriptionTemplates_TenantId_Category");

                    b.HasIndex("TenantId", "Name")
                        .HasDatabaseName("IX_PrescriptionTemplates_TenantId_Name");

                    b.ToTable("PrescriptionTemplates", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Procedure", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AcceptedHealthInsurances")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("AllowInExclusiveProcedureAttendance")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("AllowInMedicalAttendance")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<int>("Category")
                        .HasColumnType("integer");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int>("DurationMinutes")
                        .HasColumnType("integer");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<decimal>("Price")
                        .HasPrecision(18, 2)
                        .HasColumnType("numeric(18,2)");

                    b.Property<bool>("RequiresMaterials")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("Code", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("IX_Procedures_Code_TenantId");

                    b.ToTable("Procedures", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ProcedureMaterial", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("MaterialId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ProcedureId")
                        .HasColumnType("uuid");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("MaterialId");

                    b.HasIndex("ProcedureId", "MaterialId", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("IX_ProcedureMaterials_ProcedureId_MaterialId_TenantId");

                    b.ToTable("ProcedureMaterials", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ProfilePermission", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("PermissionKey")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("ProfileId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId");

                    b.HasIndex("ProfileId", "PermissionKey")
                        .IsUnique();

                    b.ToTable("ProfilePermissions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ReceivablePayment", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("PaymentDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ReceivableId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TransactionId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("PaymentDate");

                    b.HasIndex("ReceivableId");

                    b.HasIndex("TenantId");

                    b.ToTable("ReceivablePayments", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.RecurringAppointmentPattern", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int?>("AppointmentType")
                        .HasColumnType("integer");

                    b.Property<int?>("BlockedSlotType")
                        .HasColumnType("integer");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("DayOfMonth")
                        .HasColumnType("integer");

                    b.Property<int?>("DaysOfWeek")
                        .HasColumnType("integer");

                    b.Property<int?>("DurationMinutes")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("EndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<TimeSpan>("EndTime")
                        .HasColumnType("interval");

                    b.Property<int>("Frequency")
                        .HasColumnType("integer");

                    b.Property<int>("Interval")
                        .HasColumnType("integer");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Notes")
                        .HasColumnType("text");

                    b.Property<int?>("OccurrencesCount")
                        .HasColumnType("integer");

                    b.Property<Guid?>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ProfessionalId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("StartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<TimeSpan>("StartTime")
                        .HasColumnType("interval");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("PatientId");

                    b.HasIndex("ProfessionalId");

                    b.ToTable("RecurringAppointmentPatterns");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ReportTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Configuration")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Icon")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsSystem")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Query")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("SupportedFormats")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_ReportTemplates_Category");

                    b.HasIndex("IsSystem")
                        .HasDatabaseName("IX_ReportTemplates_IsSystem");

                    b.ToTable("ReportTemplates", (string)null);

                    b.HasData(
                        new
                        {
                            Id = new Guid("413ea9cc-48f7-4e19-adfc-b83f3e71fcae"),
                            Category = "financial",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}],\"sections\":[{\"title\":\"Revenue Overview\",\"type\":\"summary\"},{\"title\":\"MRR Trend\",\"type\":\"chart\",\"chartType\":\"line\"},{\"title\":\"Revenue by Plan\",\"type\":\"chart\",\"chartType\":\"pie\"},{\"title\":\"Top Customers\",\"type\":\"table\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(767),
                            Description = "Comprehensive financial performance report including MRR, revenue, and growth metrics",
                            Icon = "assessment",
                            IsSystem = true,
                            Name = "Financial Summary Report",
                            Query = "\nSELECT \n    DATE_TRUNC('month', cs.\"CreatedAt\") as month,\n    COUNT(DISTINCT cs.\"ClinicId\") as customer_count,\n    SUM(p.\"MonthlyPrice\") as mrr,\n    SUM(p.\"MonthlyPrice\" * 12) as arr\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nWHERE cs.\"CreatedAt\" >= @startDate AND cs.\"CreatedAt\" <= @endDate\n    AND cs.\"Status\" = 'Active'\nGROUP BY DATE_TRUNC('month', cs.\"CreatedAt\")\nORDER BY month",
                            SupportedFormats = "pdf,excel,csv",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("1f9038fb-b082-49b9-b8cc-794ef77a418f"),
                            Category = "financial",
                            Configuration = "{\"parameters\":[{\"name\":\"month\",\"type\":\"month\",\"required\":true,\"label\":\"Report Month\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1049),
                            Description = "Detailed breakdown of revenue by plans, clinics, and payment methods",
                            Icon = "pie_chart",
                            IsSystem = true,
                            Name = "Revenue Breakdown Report",
                            Query = "\nSELECT \n    p.\"Name\" as plan_name,\n    COUNT(cs.\"Id\") as subscription_count,\n    SUM(p.\"MonthlyPrice\") as total_mrr,\n    AVG(p.\"MonthlyPrice\") as avg_price\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nWHERE DATE_TRUNC('month', cs.\"CreatedAt\") = DATE_TRUNC('month', @month::date)\n    AND cs.\"Status\" = 'Active'\nGROUP BY p.\"Name\"\nORDER BY total_mrr DESC",
                            SupportedFormats = "pdf,excel",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("bb2a3adb-2981-4d14-bfc1-b54b9c7da1e0"),
                            Category = "customer",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1102),
                            Description = "Analysis of new customer acquisition trends and conversion metrics",
                            Icon = "person_add",
                            IsSystem = true,
                            Name = "Customer Acquisition Report",
                            Query = "\nSELECT \n    DATE_TRUNC('month', c.\"CreatedAt\") as month,\n    COUNT(c.\"Id\") as new_customers,\n    COUNT(DISTINCT u.\"Id\") as new_users,\n    COUNT(cs.\"Id\") as new_subscriptions\nFROM \"Clinics\" c\nLEFT JOIN \"Users\" u ON c.\"Id\" = u.\"ClinicId\" AND u.\"CreatedAt\" >= @startDate AND u.\"CreatedAt\" <= @endDate\nLEFT JOIN \"ClinicSubscriptions\" cs ON c.\"Id\" = cs.\"ClinicId\" AND cs.\"CreatedAt\" >= @startDate AND cs.\"CreatedAt\" <= @endDate\nWHERE c.\"CreatedAt\" >= @startDate AND c.\"CreatedAt\" <= @endDate\nGROUP BY DATE_TRUNC('month', c.\"CreatedAt\")\nORDER BY month",
                            SupportedFormats = "pdf,excel,csv",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("f138789e-80f0-4a65-a2ad-78715eec197b"),
                            Category = "customer",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1142),
                            Description = "Comprehensive churn analysis with reasons and trends",
                            Icon = "exit_to_app",
                            IsSystem = true,
                            Name = "Customer Churn Report",
                            Query = "\nSELECT \n    DATE_TRUNC('month', cs.\"EndDate\") as month,\n    COUNT(cs.\"Id\") as churned_subscriptions,\n    SUM(p.\"MonthlyPrice\") as lost_mrr,\n    c.\"Name\" as clinic_name,\n    cs.\"Status\" as status\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nINNER JOIN \"Clinics\" c ON cs.\"ClinicId\" = c.\"Id\"\nWHERE cs.\"EndDate\" >= @startDate AND cs.\"EndDate\" <= @endDate\n    AND cs.\"Status\" = 'Cancelled'\nGROUP BY DATE_TRUNC('month', cs.\"EndDate\"), c.\"Name\", cs.\"Status\"\nORDER BY month DESC",
                            SupportedFormats = "pdf,excel",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("edd996c3-a2c7-45f0-b2d1-419c820e160d"),
                            Category = "operational",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1209),
                            Description = "Detailed analysis of appointment scheduling, cancellations, and no-shows",
                            Icon = "event_note",
                            IsSystem = true,
                            Name = "Appointment Analytics Report",
                            Query = "\nSELECT \n    c.\"TradeName\" as clinic,\n    COUNT(a.\"Id\") as total_appointments,\n    COUNT(CASE WHEN a.\"Status\" = 'Completed' THEN 1 END) as completed,\n    COUNT(CASE WHEN a.\"Status\" = 'Cancelled' THEN 1 END) as cancelled,\n    COUNT(CASE WHEN a.\"Status\" = 'NoShow' THEN 1 END) as no_shows\nFROM \"Appointments\" a\nINNER JOIN \"Clinics\" c ON a.\"ClinicId\" = c.\"Id\"\nWHERE a.\"AppointmentDate\" >= @startDate AND a.\"AppointmentDate\" <= @endDate\nGROUP BY c.\"TradeName\"\nORDER BY total_appointments DESC",
                            SupportedFormats = "pdf,excel",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("41bd1975-13ea-4922-a380-88a37409036e"),
                            Category = "operational",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1263),
                            Description = "Overview of user activity, logins, and engagement metrics",
                            Icon = "analytics",
                            IsSystem = true,
                            Name = "User Activity Report",
                            Query = "\nSELECT \n    u.\"UserName\" as username,\n    u.\"Email\" as email,\n    c.\"TradeName\" as clinic,\n    COUNT(us.\"Id\") as login_count,\n    MAX(us.\"LastActivityAt\") as last_activity\nFROM \"Users\" u\nLEFT JOIN \"UserSessions\" us ON u.\"Id\" = us.\"UserId\" \n    AND us.\"CreatedAt\" >= @startDate AND us.\"CreatedAt\" <= @endDate\nLEFT JOIN \"Clinics\" c ON u.\"ClinicId\" = c.\"Id\"\nWHERE u.\"IsActive\" = true\nGROUP BY u.\"UserName\", u.\"Email\", c.\"TradeName\"\nORDER BY login_count DESC",
                            SupportedFormats = "pdf,excel,csv",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("cbb3c276-3aeb-4bd6-964a-5e192a294ba6"),
                            Category = "clinical",
                            Configuration = "{\"parameters\":[{\"name\":\"clinicId\",\"type\":\"guid\",\"required\":false,\"label\":\"Clinic (Optional)\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1299),
                            Description = "Statistical analysis of patient demographics and distribution",
                            Icon = "people",
                            IsSystem = true,
                            Name = "Patient Demographics Report",
                            Query = "\nSELECT \n    c.\"TradeName\" as clinic,\n    COUNT(p.\"Id\") as total_patients,\n    COUNT(CASE WHEN p.\"Gender\" = 'Male' THEN 1 END) as male_count,\n    COUNT(CASE WHEN p.\"Gender\" = 'Female' THEN 1 END) as female_count,\n    AVG(EXTRACT(YEAR FROM AGE(p.\"BirthDate\"))) as average_age\nFROM \"Patients\" p\nINNER JOIN \"Clinics\" c ON p.\"ClinicId\" = c.\"Id\"\nWHERE (@clinicId IS NULL OR p.\"ClinicId\" = @clinicId)\nGROUP BY c.\"TradeName\"\nORDER BY total_patients DESC",
                            SupportedFormats = "pdf,excel",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("0024d209-19c8-4a4b-b1dd-70e972ac4be1"),
                            Category = "operational",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1334),
                            Description = "Overview of system health, errors, and performance metrics",
                            Icon = "health_and_safety",
                            IsSystem = true,
                            Name = "System Health Report",
                            Query = "\nSELECT \n    c.\"TradeName\" as clinic,\n    COUNT(cs.\"Id\") as active_subscriptions,\n    COUNT(u.\"Id\") as active_users,\n    COUNT(a.\"Id\") as total_appointments,\n    COUNT(p.\"Id\") as total_patients\nFROM \"Clinics\" c\nLEFT JOIN \"ClinicSubscriptions\" cs ON c.\"Id\" = cs.\"ClinicId\" AND cs.\"Status\" = 'Active'\nLEFT JOIN \"Users\" u ON c.\"Id\" = u.\"ClinicId\" AND u.\"IsActive\" = true\nLEFT JOIN \"Appointments\" a ON c.\"Id\" = a.\"ClinicId\" AND a.\"AppointmentDate\" >= @startDate AND a.\"AppointmentDate\" <= @endDate\nLEFT JOIN \"Patients\" p ON c.\"Id\" = p.\"ClinicId\"\nWHERE c.\"IsActive\" = true\nGROUP BY c.\"TradeName\"\nORDER BY active_subscriptions DESC",
                            SupportedFormats = "pdf,excel",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("f1518b33-39eb-4760-b103-a4c4e44aa74d"),
                            Category = "financial",
                            Configuration = "{\"parameters\":[{\"name\":\"startDate\",\"type\":\"date\",\"required\":true,\"label\":\"Start Date\"},{\"name\":\"endDate\",\"type\":\"date\",\"required\":true,\"label\":\"End Date\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1377),
                            Description = "Analysis of subscription lifecycle from acquisition to churn",
                            Icon = "loop",
                            IsSystem = true,
                            Name = "Subscription Lifecycle Report",
                            Query = "\nSELECT \n    c.\"TradeName\" as clinic,\n    p.\"Name\" as plan,\n    cs.\"StartDate\" as subscription_start,\n    cs.\"EndDate\" as subscription_end,\n    cs.\"Status\" as status,\n    p.\"MonthlyPrice\" as monthly_price,\n    EXTRACT(MONTH FROM AGE(COALESCE(cs.\"EndDate\", CURRENT_DATE), cs.\"StartDate\")) as months_active\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"Clinics\" c ON cs.\"ClinicId\" = c.\"Id\"\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nWHERE cs.\"StartDate\" >= @startDate AND cs.\"StartDate\" <= @endDate\nORDER BY cs.\"StartDate\" DESC",
                            SupportedFormats = "pdf,excel",
                            TenantId = ""
                        },
                        new
                        {
                            Id = new Guid("d548199c-7d66-443d-9d4b-1012ab1d4c55"),
                            Category = "financial",
                            Configuration = "{\"parameters\":[{\"name\":\"month\",\"type\":\"month\",\"required\":true,\"label\":\"Report Month\"}],\"sections\":[{\"title\":\"Financial KPIs\",\"type\":\"metrics\"},{\"title\":\"Customer Metrics\",\"type\":\"metrics\"},{\"title\":\"Growth Trends\",\"type\":\"chart\"},{\"title\":\"Top Performers\",\"type\":\"table\"}]}",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(1426),
                            Description = "High-level executive summary with key metrics and trends",
                            Icon = "dashboard",
                            IsSystem = true,
                            Name = "Executive Dashboard Report",
                            Query = "\nWITH monthly_stats AS (\n    SELECT \n        COUNT(DISTINCT cs.\"ClinicId\") as total_customers,\n        SUM(p.\"MonthlyPrice\") as total_mrr,\n        COUNT(CASE WHEN cs.\"Status\" = 'Cancelled' THEN 1 END) as churned_customers\n    FROM \"ClinicSubscriptions\" cs\n    INNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\n    WHERE DATE_TRUNC('month', cs.\"CreatedAt\") <= DATE_TRUNC('month', @month::date)\n)\nSELECT * FROM monthly_stats",
                            SupportedFormats = "pdf",
                            TenantId = ""
                        });
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SNGPCReport", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<int>("AttemptCount")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("GeneratedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LastAttemptAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Month")
                        .HasColumnType("integer");

                    b.Property<string>("PrescriptionIds")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<DateTime>("ReportPeriodEnd")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ReportPeriodStart")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TotalItems")
                        .HasColumnType("integer");

                    b.Property<int>("TotalPrescriptions")
                        .HasColumnType("integer");

                    b.Property<string>("TransmissionProtocol")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("TransmittedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("XmlContent")
                        .HasColumnType("text");

                    b.Property<string>("XmlHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("Year")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("TransmissionProtocol")
                        .HasDatabaseName("IX_SNGPCReports_TransmissionProtocol");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_SNGPCReports_TenantId_Status");

                    b.HasIndex("TenantId", "Year")
                        .HasDatabaseName("IX_SNGPCReports_TenantId_Year");

                    b.HasIndex("TenantId", "Month", "Year")
                        .IsUnique()
                        .HasDatabaseName("IX_SNGPCReports_TenantId_Month_Year");

                    b.ToTable("SNGPCReports", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SalesFunnelMetric", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CapturedData")
                        .HasColumnType("text");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("DurationMs")
                        .HasColumnType("bigint");

                    b.Property<string>("IpAddress")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<bool>("IsConverted")
                        .HasColumnType("boolean");

                    b.Property<string>("Metadata")
                        .HasColumnType("text");

                    b.Property<Guid?>("OwnerId")
                        .HasColumnType("uuid");

                    b.Property<string>("PlanId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Referrer")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("SessionId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Step")
                        .HasColumnType("integer");

                    b.Property<string>("StepName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId")
                        .HasDatabaseName("IX_SalesFunnelMetrics_ClinicId");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_SalesFunnelMetrics_CreatedAt");

                    b.HasIndex("IsConverted")
                        .HasDatabaseName("IX_SalesFunnelMetrics_IsConverted");

                    b.HasIndex("SessionId")
                        .HasDatabaseName("IX_SalesFunnelMetrics_SessionId");

                    b.HasIndex("SessionId", "CreatedAt")
                        .HasDatabaseName("IX_SalesFunnelMetrics_SessionId_CreatedAt");

                    b.HasIndex("Step", "CreatedAt")
                        .HasDatabaseName("IX_SalesFunnelMetrics_Step_CreatedAt");

                    b.ToTable("SalesFunnelMetrics", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ScheduledReport", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)");

                    b.Property<string>("CronExpression")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<DateTime?>("LastRunAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LastRunError")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("LastRunStatus")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("NextRunAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("OutputFormat")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("Parameters")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("Recipients")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid>("ReportTemplateId")
                        .HasColumnType("uuid");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CreatedBy")
                        .HasDatabaseName("IX_ScheduledReports_CreatedBy");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_ScheduledReports_IsActive");

                    b.HasIndex("NextRunAt")
                        .HasDatabaseName("IX_ScheduledReports_NextRunAt");

                    b.HasIndex("ReportTemplateId")
                        .HasDatabaseName("IX_ScheduledReports_ReportTemplateId");

                    b.ToTable("ScheduledReports", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SenhaFila", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AgendamentoId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ConsultorioId")
                        .HasColumnType("uuid");

                    b.Property<string>("CpfPaciente")
                        .HasMaxLength(14)
                        .HasColumnType("character varying(14)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataHoraAtendimento")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataHoraChamada")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataHoraEntrada")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataHoraSaida")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("EspecialidadeId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("FilaId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("MedicoId")
                        .HasColumnType("uuid");

                    b.Property<string>("MotivoPrioridade")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("NomePaciente")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("NumeroConsultorio")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("NumeroSenha")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<Guid?>("PacienteId")
                        .HasColumnType("uuid");

                    b.Property<int>("Prioridade")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TelefonePaciente")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<int>("TempoAtendimentoMinutos")
                        .HasColumnType("integer");

                    b.Property<int>("TempoEsperaMinutos")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TentativasChamada")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AgendamentoId");

                    b.HasIndex("FilaId");

                    b.HasIndex("MedicoId");

                    b.HasIndex("PacienteId");

                    b.HasIndex("Status");

                    b.HasIndex("TenantId");

                    b.HasIndex("FilaId", "DataHoraEntrada");

                    b.HasIndex("FilaId", "Status");

                    b.HasIndex("NumeroSenha", "FilaId");

                    b.ToTable("SenhasFila", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SngpcAlert", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AcknowledgedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("AcknowledgedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("AcknowledgmentNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("AdditionalData")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<Guid?>("RelatedBalanceId")
                        .HasColumnType("uuid");

                    b.Property<string>("RelatedMedication")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid?>("RelatedRegistryId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("RelatedReportId")
                        .HasColumnType("uuid");

                    b.Property<string>("Resolution")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("ResolvedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ResolvedByUserId")
                        .HasColumnType("uuid");

                    b.Property<int>("Severity")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AcknowledgedAt")
                        .HasDatabaseName("IX_SngpcAlerts_AcknowledgedAt");

                    b.HasIndex("AcknowledgedByUserId");

                    b.HasIndex("CreatedAt")
                        .HasDatabaseName("IX_SngpcAlerts_CreatedAt");

                    b.HasIndex("RelatedBalanceId")
                        .HasDatabaseName("IX_SngpcAlerts_RelatedBalanceId");

                    b.HasIndex("RelatedRegistryId")
                        .HasDatabaseName("IX_SngpcAlerts_RelatedRegistryId");

                    b.HasIndex("RelatedReportId")
                        .HasDatabaseName("IX_SngpcAlerts_RelatedReportId");

                    b.HasIndex("ResolvedByUserId");

                    b.HasIndex("TenantId", "ResolvedAt")
                        .HasDatabaseName("IX_SngpcAlerts_TenantId_ResolvedAt");

                    b.HasIndex("TenantId", "Severity")
                        .HasDatabaseName("IX_SngpcAlerts_TenantId_Severity");

                    b.HasIndex("TenantId", "Type")
                        .HasDatabaseName("IX_SngpcAlerts_TenantId_Type");

                    b.ToTable("SngpcAlerts", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SngpcTransmission", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AnvisaResponse")
                        .HasColumnType("text");

                    b.Property<int>("AttemptNumber")
                        .HasColumnType("integer");

                    b.Property<DateTime>("AttemptedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("EndpointUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("ErrorCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int?>("HttpStatusCode")
                        .HasColumnType("integer");

                    b.Property<Guid?>("InitiatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("ProtocolNumber")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<long?>("ResponseTimeMs")
                        .HasColumnType("bigint");

                    b.Property<Guid>("SNGPCReportId")
                        .HasColumnType("uuid");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TransmissionMethod")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("XmlHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<long?>("XmlSizeBytes")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("InitiatedByUserId");

                    b.HasIndex("ProtocolNumber")
                        .HasDatabaseName("IX_SngpcTransmissions_ProtocolNumber");

                    b.HasIndex("SNGPCReportId", "Status")
                        .HasDatabaseName("IX_SngpcTransmissions_ReportId_Status");

                    b.HasIndex("TenantId", "AttemptedAt")
                        .HasDatabaseName("IX_SngpcTransmissions_TenantId_AttemptedAt");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_SngpcTransmissions_TenantId_Status");

                    b.HasIndex("TenantId", "SNGPCReportId", "AttemptNumber")
                        .HasDatabaseName("IX_SngpcTransmissions_TenantId_ReportId_Attempt");

                    b.ToTable("SngpcTransmissions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SoapRecord", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletionDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("DoctorId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsComplete")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsLocked")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("RecordDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("DoctorId");

                    b.HasIndex("PatientId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_SoapRecords_TenantId");

                    b.HasIndex("TenantId", "AppointmentId")
                        .IsUnique()
                        .HasDatabaseName("IX_SoapRecords_TenantId_Appointment");

                    b.HasIndex("TenantId", "DoctorId")
                        .HasDatabaseName("IX_SoapRecords_TenantId_Doctor");

                    b.HasIndex("TenantId", "IsComplete")
                        .HasDatabaseName("IX_SoapRecords_TenantId_IsComplete");

                    b.HasIndex("TenantId", "IsLocked")
                        .HasDatabaseName("IX_SoapRecords_TenantId_IsLocked");

                    b.HasIndex("TenantId", "PatientId")
                        .HasDatabaseName("IX_SoapRecords_TenantId_Patient");

                    b.ToTable("SoapRecords", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SubscriptionCredit", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<int>("Days")
                        .HasColumnType("integer");

                    b.Property<DateTime>("GrantedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("GrantedBy")
                        .HasColumnType("uuid");

                    b.Property<Guid>("GrantedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("Reason")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("SubscriptionId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("GrantedByUserId");

                    b.HasIndex("SubscriptionId");

                    b.ToTable("SubscriptionCredits");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SubscriptionPlan", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("CampaignDescription")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("CampaignEndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CampaignName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<decimal?>("CampaignPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("CampaignStartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("CurrentEarlyAdopters")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("EarlyAdopterBenefits")
                        .HasColumnType("jsonb");

                    b.Property<string>("EnabledModules")
                        .HasColumnType("text");

                    b.Property<string>("FeaturesAvailable")
                        .HasColumnType("jsonb");

                    b.Property<string>("FeaturesInDevelopment")
                        .HasColumnType("jsonb");

                    b.Property<bool>("HasReports")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasSMSNotifications")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasTissExport")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasWhatsAppIntegration")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<int>("MaxClinics")
                        .HasColumnType("integer");

                    b.Property<int?>("MaxEarlyAdopters")
                        .HasColumnType("integer");

                    b.Property<int>("MaxPatients")
                        .HasColumnType("integer");

                    b.Property<int>("MaxUsers")
                        .HasColumnType("integer");

                    b.Property<decimal>("MonthlyPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal?>("OriginalPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<uint>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("xid")
                        .HasColumnName("xmin");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TrialDays")
                        .HasColumnType("integer");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CampaignName");

                    b.HasIndex("IsActive");

                    b.HasIndex("Type");

                    b.HasIndex("CampaignStartDate", "CampaignEndDate");

                    b.HasIndex("TenantId", "Type");

                    b.ToTable("SubscriptionPlans", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Supplier", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Address")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("BankAccount")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("BankName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("City")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DocumentNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("Email")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Phone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("PixKey")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("State")
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TradeName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ZipCode")
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)");

                    b.HasKey("Id");

                    b.HasIndex("DocumentNumber");

                    b.HasIndex("IsActive");

                    b.HasIndex("Name");

                    b.HasIndex("TenantId");

                    b.ToTable("Suppliers", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SystemNotification", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ActionLabel")
                        .HasColumnType("text");

                    b.Property<string>("ActionUrl")
                        .HasColumnType("text");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Data")
                        .HasColumnType("text");

                    b.Property<bool>("IsRead")
                        .HasColumnType("boolean");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("ReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("SystemNotifications");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Tag", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AutomationRules")
                        .HasColumnType("text");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Color")
                        .IsRequired()
                        .HasMaxLength(7)
                        .HasColumnType("character varying(7)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsAutomatic")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Order")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_Tags_Category");

                    b.HasIndex("IsAutomatic")
                        .HasDatabaseName("IX_Tags_IsAutomatic");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Tags_TenantId");

                    b.ToTable("Tags", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TherapeuticPlan", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ExamRequests")
                        .HasMaxLength(3000)
                        .HasColumnType("character varying(3000)");

                    b.Property<Guid>("MedicalRecordId")
                        .HasColumnType("uuid");

                    b.Property<string>("MedicationPrescription")
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<string>("PatientGuidance")
                        .HasMaxLength(3000)
                        .HasColumnType("character varying(3000)");

                    b.Property<string>("Referrals")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("ReturnDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Treatment")
                        .IsRequired()
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("MedicalRecordId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TherapeuticPlans_TenantId");

                    b.HasIndex("TenantId", "MedicalRecordId")
                        .HasDatabaseName("IX_TherapeuticPlans_TenantId_MedicalRecord");

                    b.HasIndex("TenantId", "ReturnDate")
                        .HasDatabaseName("IX_TherapeuticPlans_TenantId_ReturnDate");

                    b.ToTable("TherapeuticPlans", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Ticket", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AssignedToId")
                        .HasColumnType("uuid");

                    b.Property<string>("AssignedToName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<string>("ClinicName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("LastStatusChangeAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("Type")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserEmail")
                        .IsRequired()
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.HasKey("Id");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Tickets_TenantId");

                    b.HasIndex("Status", "TenantId")
                        .HasDatabaseName("IX_Tickets_Status_TenantId");

                    b.HasIndex("TenantId", "ClinicId")
                        .HasDatabaseName("IX_Tickets_TenantId_ClinicId");

                    b.HasIndex("TenantId", "UserId")
                        .HasDatabaseName("IX_Tickets_TenantId_UserId");

                    b.ToTable("Tickets", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TicketAttachment", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("ContentType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("FileName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<long>("FileSize")
                        .HasColumnType("bigint");

                    b.Property<string>("FileUrl")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("TicketId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("UploadedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TicketAttachments_TenantId");

                    b.HasIndex("TicketId")
                        .HasDatabaseName("IX_TicketAttachments_TicketId");

                    b.ToTable("TicketAttachments", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TicketComment", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AuthorId")
                        .HasColumnType("uuid");

                    b.Property<string>("AuthorName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Comment")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsInternal")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSystemOwner")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("TicketId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TicketComments_TenantId");

                    b.HasIndex("TicketId")
                        .HasDatabaseName("IX_TicketComments_TicketId");

                    b.ToTable("TicketComments", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TicketHistory", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ChangedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ChangedById")
                        .HasColumnType("uuid");

                    b.Property<string>("ChangedByName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Comment")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("NewStatus")
                        .HasColumnType("integer");

                    b.Property<int>("OldStatus")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("TicketId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TicketHistory_TenantId");

                    b.HasIndex("TicketId")
                        .HasDatabaseName("IX_TicketHistory_TicketId");

                    b.ToTable("TicketHistory", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissBatch", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("ApprovedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("BatchNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("GlosedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<Guid>("OperatorId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ProcessedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ProtocolNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ResponseXmlFileName")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("SubmittedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("XmlFileName")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("XmlFilePath")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("OperatorId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TissBatches_TenantId");

                    b.HasIndex("TenantId", "BatchNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_TissBatches_TenantId_BatchNumber");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_TissBatches_TenantId_Status");

                    b.ToTable("TissBatches", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGlosa", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("CodigoGlosa")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CodigoProcedimento")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataGlosa")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataIdentificacao")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DescricaoGlosa")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<Guid>("GuideId")
                        .HasColumnType("uuid");

                    b.Property<string>("JustificativaRecurso")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("NomeProcedimento")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("NumeroGuia")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int?>("SequenciaItem")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Tipo")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("ValorGlosado")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("ValorOriginal")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.HasIndex("GuideId")
                        .HasDatabaseName("IX_TissGlosas_GuideId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TissGlosas_TenantId");

                    b.HasIndex("TenantId", "DataGlosa")
                        .HasDatabaseName("IX_TissGlosas_TenantId_DataGlosa");

                    b.HasIndex("TenantId", "NumeroGuia")
                        .HasDatabaseName("IX_TissGlosas_TenantId_NumeroGuia");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_TissGlosas_TenantId_Status");

                    b.HasIndex("TenantId", "Tipo")
                        .HasDatabaseName("IX_TissGlosas_TenantId_Tipo");

                    b.ToTable("TissGlosas", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGuide", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("ApprovedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("AuthorizationNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("GlosedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("GlossReason")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("GuideNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int>("GuideType")
                        .HasColumnType("integer");

                    b.Property<Guid>("PatientHealthInsuranceId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("ServiceDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("TissBatchId")
                        .HasColumnType("uuid");

                    b.Property<decimal>("TotalAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId");

                    b.HasIndex("PatientHealthInsuranceId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TissGuides_TenantId");

                    b.HasIndex("TissBatchId")
                        .HasDatabaseName("IX_TissGuides_TissBatchId");

                    b.HasIndex("TenantId", "GuideNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_TissGuides_TenantId_GuideNumber");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_TissGuides_TenantId_Status");

                    b.ToTable("TissGuides", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGuideProcedure", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("ApprovedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int?>("ApprovedQuantity")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("GlosedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<string>("GlossReason")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("ProcedureCode")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ProcedureDescription")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<int>("Quantity")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("TissGuideId")
                        .HasColumnType("uuid");

                    b.Property<decimal>("TotalPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<decimal>("UnitPrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ProcedureCode")
                        .HasDatabaseName("IX_TissGuideProcedures_ProcedureCode");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TissGuideProcedures_TenantId");

                    b.HasIndex("TissGuideId")
                        .HasDatabaseName("IX_TissGuideProcedures_TissGuideId");

                    b.ToTable("TissGuideProcedures", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissOperadoraConfig", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("CertificadoDigitalPath")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("MapeamentoTabelasJson")
                        .HasColumnType("text");

                    b.Property<Guid>("OperatorId")
                        .HasColumnType("uuid");

                    b.Property<string>("SenhaEncriptada")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("TentativasReenvio")
                        .HasColumnType("integer");

                    b.Property<int>("TimeoutSegundos")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("UsaCertificadoDigital")
                        .HasColumnType("boolean");

                    b.Property<bool>("UsaSoapHeader")
                        .HasColumnType("boolean");

                    b.Property<string>("Usuario")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("WebServiceUrl")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("OperatorId")
                        .HasDatabaseName("IX_TissOperadoraConfigs_OperatorId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TissOperadoraConfigs_TenantId");

                    b.HasIndex("TenantId", "OperatorId")
                        .IsUnique()
                        .HasDatabaseName("IX_TissOperadoraConfigs_TenantId_OperatorId");

                    b.ToTable("TissOperadoraConfigs", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissRecursoGlosa", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("AnexosJson")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("DataEnvio")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DataResposta")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("GlosaId")
                        .HasColumnType("uuid");

                    b.Property<string>("Justificativa")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("JustificativaOperadora")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int?>("Resultado")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal?>("ValorDeferido")
                        .HasColumnType("decimal(18,2)");

                    b.HasKey("Id");

                    b.HasIndex("GlosaId")
                        .HasDatabaseName("IX_TissRecursosGlosa_GlosaId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TissRecursosGlosa_TenantId");

                    b.HasIndex("TenantId", "DataEnvio")
                        .HasDatabaseName("IX_TissRecursosGlosa_TenantId_DataEnvio");

                    b.HasIndex("TenantId", "Resultado")
                        .HasDatabaseName("IX_TissRecursosGlosa_TenantId_Resultado");

                    b.ToTable("TissRecursosGlosa", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TussProcedure", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastUpdated")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("ReferencePrice")
                        .HasColumnType("decimal(18,2)");

                    b.Property<bool>("RequiresAuthorization")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_TussProcedures_Category");

                    b.HasIndex("Description")
                        .HasDatabaseName("IX_TussProcedures_Description");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_TussProcedures_TenantId");

                    b.HasIndex("TenantId", "Code")
                        .IsUnique()
                        .HasDatabaseName("IX_TussProcedures_TenantId_Code");

                    b.ToTable("TussProcedures", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TwoFactorAuth", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("EnabledAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("EnabledByIp")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("Method")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("SecretKey")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.HasKey("Id");

                    b.HasIndex("TenantId");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "IsEnabled");

                    b.HasIndex("UserId", "TenantId");

                    b.ToTable("TwoFactorAuth", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.User", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("CalendarColor")
                        .HasColumnType("text");

                    b.Property<Guid?>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("CurrentClinicId")
                        .HasColumnType("uuid");

                    b.Property<string>("CurrentSessionId")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("FirstLoginAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastLoginAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("MfaGracePeriodEndsAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ProfessionalId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("ProfileId")
                        .HasColumnType("uuid");

                    b.Property<int>("Role")
                        .HasColumnType("integer");

                    b.Property<bool>("ShowInAppointmentScheduling")
                        .HasColumnType("boolean");

                    b.Property<string>("Specialty")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("CurrentClinicId");

                    b.HasIndex("Email");

                    b.HasIndex("ProfileId");

                    b.HasIndex("Role");

                    b.HasIndex("Username")
                        .IsUnique();

                    b.HasIndex("TenantId", "IsActive");

                    b.ToTable("Users", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.UserClinicLink", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("InactivatedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("InactivationReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsPreferredClinic")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime>("LinkedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId")
                        .HasDatabaseName("IX_UserClinicLinks_ClinicId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_UserClinicLinks_TenantId");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_UserClinicLinks_UserId");

                    b.HasIndex("UserId", "IsActive")
                        .HasDatabaseName("IX_UserClinicLinks_UserId_IsActive");

                    b.HasIndex("UserId", "ClinicId", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("IX_UserClinicLinks_UserId_ClinicId_TenantId");

                    b.ToTable("UserClinicLinks", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.UserPresence", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ConnectionId")
                        .HasMaxLength(450)
                        .HasColumnType("character varying(450)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsOnline")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("LastSeenAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("StatusMessage")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("UserPresences");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.UserSession", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<string>("Country")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("ExpiresAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IpAddress")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<DateTime>("LastActivityAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("SessionId")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("StartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("ExpiresAt")
                        .HasDatabaseName("idx_usersession_expiresat");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("idx_usersession_tenantid");

                    b.HasIndex("UserId", "SessionId")
                        .IsUnique()
                        .HasDatabaseName("idx_usersession_userid_sessionid");

                    b.ToTable("user_sessions", "public");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WaitingQueueConfiguration", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<int>("AutoRefreshSeconds")
                        .HasColumnType("integer");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("DisplayMode")
                        .HasColumnType("integer");

                    b.Property<bool>("EnableSoundNotifications")
                        .HasColumnType("boolean");

                    b.Property<bool>("ShowEstimatedWaitTime")
                        .HasColumnType("boolean");

                    b.Property<bool>("ShowPatientNames")
                        .HasColumnType("boolean");

                    b.Property<bool>("ShowPosition")
                        .HasColumnType("boolean");

                    b.Property<bool>("ShowPriority")
                        .HasColumnType("boolean");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ClinicId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_WaitingQueueConfigurations_TenantId");

                    b.HasIndex("TenantId", "ClinicId")
                        .IsUnique()
                        .HasDatabaseName("IX_WaitingQueueConfigurations_TenantId_Clinic");

                    b.ToTable("WaitingQueueConfigurations", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WaitingQueueEntry", b =>
                {
                    b.Property<Guid>("Id")
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppointmentId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CalledTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CheckInTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ClinicId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("EstimatedWaitTimeMinutes")
                        .HasColumnType("integer");

                    b.Property<Guid>("PatientId")
                        .HasColumnType("uuid");

                    b.Property<int>("Position")
                        .HasColumnType("integer");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TriageNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AppointmentId")
                        .IsUnique()
                        .HasDatabaseName("IX_WaitingQueueEntries_AppointmentId");

                    b.HasIndex("ClinicId");

                    b.HasIndex("PatientId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_WaitingQueueEntries_TenantId");

                    b.HasIndex("TenantId", "CheckInTime")
                        .HasDatabaseName("IX_WaitingQueueEntries_TenantId_CheckInTime");

                    b.HasIndex("TenantId", "Position")
                        .HasDatabaseName("IX_WaitingQueueEntries_TenantId_Position");

                    b.HasIndex("TenantId", "ClinicId", "Status")
                        .HasDatabaseName("IX_WaitingQueueEntries_TenantId_Clinic_Status");

                    b.ToTable("WaitingQueueEntries", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WidgetTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DefaultConfig")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("DefaultQuery")
                        .IsRequired()
                        .HasColumnType("TEXT");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Icon")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsSystem")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("TenantId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_WidgetTemplates_Category");

                    b.HasIndex("IsSystem")
                        .HasDatabaseName("IX_WidgetTemplates_IsSystem");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_WidgetTemplates_Type");

                    b.ToTable("WidgetTemplates", (string)null);

                    b.HasData(
                        new
                        {
                            Id = new Guid("f1ecc0a6-c73b-4d81-b4ac-4c58133d64a6"),
                            Category = "financial",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 472, DateTimeKind.Utc).AddTicks(9413),
                            DefaultConfig = "{\"xAxis\":\"month\",\"yAxis\":\"total_mrr\",\"color\":\"#10b981\",\"format\":\"currency\"}",
                            DefaultQuery = "\nSELECT \n    DATE_TRUNC('month', cs.\"CreatedAt\") as month,\n    SUM(p.\"MonthlyPrice\") as total_mrr\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nWHERE cs.\"CreatedAt\" >= CURRENT_DATE - INTERVAL '12 months'\n    AND cs.\"Status\" = 'Active'\nGROUP BY DATE_TRUNC('month', cs.\"CreatedAt\")\nORDER BY month",
                            Description = "Monthly Recurring Revenue trend over the last 12 months",
                            Icon = "trending_up",
                            IsSystem = true,
                            Name = "MRR Over Time",
                            TenantId = "",
                            Type = "line"
                        },
                        new
                        {
                            Id = new Guid("8a8de8a5-e1ac-4c8c-bf08-d70ac36b5f0e"),
                            Category = "financial",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 472, DateTimeKind.Utc).AddTicks(9833),
                            DefaultConfig = "{\"labelField\":\"plan\",\"valueField\":\"revenue\",\"format\":\"currency\"}",
                            DefaultQuery = "\nSELECT \n    p.\"Name\" as plan,\n    SUM(p.\"MonthlyPrice\") as revenue\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nWHERE cs.\"Status\" = 'Active'\nGROUP BY p.\"Name\"",
                            Description = "MRR distribution by plan type",
                            Icon = "pie_chart",
                            IsSystem = true,
                            Name = "Revenue Breakdown",
                            TenantId = "",
                            Type = "pie"
                        },
                        new
                        {
                            Id = new Guid("1e52e10c-41a2-44e0-9fd7-4bc9d0cdd7ad"),
                            Category = "financial",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 472, DateTimeKind.Utc).AddTicks(9885),
                            DefaultConfig = "{\"format\":\"currency\",\"icon\":\"attach_money\",\"color\":\"#10b981\"}",
                            DefaultQuery = "\nSELECT SUM(p.\"MonthlyPrice\") as value\nFROM \"ClinicSubscriptions\" cs\nINNER JOIN \"SubscriptionPlans\" p ON cs.\"SubscriptionPlanId\" = p.\"Id\"\nWHERE cs.\"Status\" = 'Active'",
                            Description = "Current Monthly Recurring Revenue",
                            Icon = "attach_money",
                            IsSystem = true,
                            Name = "Total MRR",
                            TenantId = "",
                            Type = "metric"
                        },
                        new
                        {
                            Id = new Guid("3e3f1444-c766-4095-a30f-858323ddba4a"),
                            Category = "customer",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 472, DateTimeKind.Utc).AddTicks(9947),
                            DefaultConfig = "{\"format\":\"number\",\"icon\":\"people\",\"color\":\"#3b82f6\"}",
                            DefaultQuery = "\nSELECT COUNT(DISTINCT \"ClinicId\") as value\nFROM \"ClinicSubscriptions\"\nWHERE \"Status\" = 'Active'",
                            Description = "Total number of active clinic customers",
                            Icon = "people",
                            IsSystem = true,
                            Name = "Active Customers",
                            TenantId = "",
                            Type = "metric"
                        },
                        new
                        {
                            Id = new Guid("5e4adc95-a4bc-4e1c-9a8c-8b4807dd825f"),
                            Category = "customer",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 472, DateTimeKind.Utc).AddTicks(9976),
                            DefaultConfig = "{\"xAxis\":\"month\",\"yAxis\":\"new_customers\",\"color\":\"#3b82f6\"}",
                            DefaultQuery = "\nSELECT \n    DATE_TRUNC('month', \"CreatedAt\") as month,\n    COUNT(DISTINCT \"ClinicId\") as new_customers\nFROM \"ClinicSubscriptions\"\nWHERE \"CreatedAt\" >= CURRENT_DATE - INTERVAL '12 months'\nGROUP BY DATE_TRUNC('month', \"CreatedAt\")\nORDER BY month",
                            Description = "New customers acquired each month",
                            Icon = "trending_up",
                            IsSystem = true,
                            Name = "Customer Growth",
                            TenantId = "",
                            Type = "bar"
                        },
                        new
                        {
                            Id = new Guid("92c15144-eee3-40a8-bd09-16fe72e1c0b1"),
                            Category = "customer",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(38),
                            DefaultConfig = "{\"format\":\"percent\",\"icon\":\"warning\",\"color\":\"#ef4444\",\"threshold\":{\"warning\":5,\"critical\":10}}",
                            DefaultQuery = "\nSELECT \n    ROUND(\n        CAST(COUNT(CASE WHEN \"Status\" = 'Cancelled' AND \"EndDate\" >= CURRENT_DATE - INTERVAL '1 month' THEN 1 END) AS DECIMAL) / \n        NULLIF(COUNT(CASE WHEN \"EndDate\" >= CURRENT_DATE - INTERVAL '1 month' THEN 1 END), 0) * 100,\n        2\n    ) as value\nFROM \"ClinicSubscriptions\"",
                            Description = "Monthly customer churn percentage",
                            Icon = "warning",
                            IsSystem = true,
                            Name = "Churn Rate",
                            TenantId = "",
                            Type = "metric"
                        },
                        new
                        {
                            Id = new Guid("10145f0c-64bb-4e4a-91fd-2fc6ae1198e4"),
                            Category = "operational",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(331),
                            DefaultConfig = "{\"format\":\"number\",\"icon\":\"event\",\"color\":\"#8b5cf6\"}",
                            DefaultQuery = "\nSELECT COUNT(*) as value\nFROM \"Appointments\"\nWHERE \"AppointmentDate\" >= CURRENT_DATE - INTERVAL '30 days'",
                            Description = "Total appointments scheduled",
                            Icon = "event",
                            IsSystem = true,
                            Name = "Total Appointments",
                            TenantId = "",
                            Type = "metric"
                        },
                        new
                        {
                            Id = new Guid("431aa0df-27a2-4e6a-b345-b335334cd793"),
                            Category = "operational",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(382),
                            DefaultConfig = "{\"labelField\":\"status\",\"valueField\":\"count\"}",
                            DefaultQuery = "\nSELECT \n    \"Status\" as status,\n    COUNT(*) as count\nFROM \"Appointments\"\nWHERE \"AppointmentDate\" >= CURRENT_DATE - INTERVAL '30 days'\nGROUP BY \"Status\"",
                            Description = "Distribution of appointments by status",
                            Icon = "pie_chart",
                            IsSystem = true,
                            Name = "Appointments by Status",
                            TenantId = "",
                            Type = "pie"
                        },
                        new
                        {
                            Id = new Guid("7bd4befc-c9c4-4de0-a310-e12a85b08ad5"),
                            Category = "operational",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(425),
                            DefaultConfig = "{\"format\":\"number\",\"icon\":\"person\",\"color\":\"#06b6d4\"}",
                            DefaultQuery = "\nSELECT COUNT(*) as value\nFROM \"Users\"\nWHERE \"IsActive\" = true",
                            Description = "Number of active users in the system",
                            Icon = "person",
                            IsSystem = true,
                            Name = "Active Users",
                            TenantId = "",
                            Type = "metric"
                        },
                        new
                        {
                            Id = new Guid("47fd9828-a98d-4280-940a-354d61d15970"),
                            Category = "clinical",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(498),
                            DefaultConfig = "{\"format\":\"number\",\"icon\":\"local_hospital\",\"color\":\"#f97316\"}",
                            DefaultQuery = "\nSELECT COUNT(*) as value\nFROM \"Patients\"",
                            Description = "Total number of registered patients",
                            Icon = "local_hospital",
                            IsSystem = true,
                            Name = "Total Patients",
                            TenantId = "",
                            Type = "metric"
                        },
                        new
                        {
                            Id = new Guid("11ac23c8-b978-4c7a-9dfa-f6a597c43719"),
                            Category = "clinical",
                            CreatedAt = new DateTime(2026, 2, 7, 15, 28, 59, 473, DateTimeKind.Utc).AddTicks(579),
                            DefaultConfig = "{\"xAxis\":\"clinic\",\"yAxis\":\"patient_count\",\"color\":\"#f97316\"}",
                            DefaultQuery = "\nSELECT \n    c.\"TradeName\" as clinic,\n    COUNT(p.\"Id\") as patient_count\nFROM \"Patients\" p\nINNER JOIN \"Clinics\" c ON p.\"ClinicId\" = c.\"Id\"\nGROUP BY c.\"TradeName\"\nORDER BY patient_count DESC\nLIMIT 10",
                            Description = "Patient distribution across clinics",
                            Icon = "bar_chart",
                            IsSystem = true,
                            Name = "Patients by Clinic",
                            TenantId = "",
                            Type = "bar"
                        });
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Workflow", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("StopOnError")
                        .HasColumnType("boolean");

                    b.Property<string>("TriggerConfig")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<string>("TriggerType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("UpdatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.ToTable("Workflows", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowAction", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("ActionType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Condition")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<string>("Config")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("DelaySeconds")
                        .HasColumnType("integer");

                    b.Property<int>("Order")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("WorkflowId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("WorkflowId");

                    b.ToTable("WorkflowActions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowActionExecution", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Error")
                        .HasColumnType("text");

                    b.Property<string>("Result")
                        .HasColumnType("text");

                    b.Property<DateTime>("StartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int>("WorkflowActionId")
                        .HasColumnType("integer");

                    b.Property<int>("WorkflowExecutionId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("Status");

                    b.HasIndex("WorkflowActionId");

                    b.HasIndex("WorkflowExecutionId");

                    b.ToTable("WorkflowActionExecutions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowExecution", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Error")
                        .HasColumnType("text");

                    b.Property<DateTime>("StartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("TriggerData")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("WorkflowId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("StartedAt");

                    b.HasIndex("Status");

                    b.HasIndex("WorkflowId");

                    b.ToTable("WorkflowExecutions", (string)null);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccessProfile", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.ConsultationFormProfile", "ConsultationFormProfile")
                        .WithMany()
                        .HasForeignKey("ConsultationFormProfileId");

                    b.Navigation("Clinic");

                    b.Navigation("ConsultationFormProfile");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountsPayable", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Supplier", "Supplier")
                        .WithMany()
                        .HasForeignKey("SupplierId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Supplier");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountsReceivable", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.HealthInsuranceOperator", "HealthInsuranceOperator")
                        .WithMany()
                        .HasForeignKey("HealthInsuranceOperatorId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Appointment");

                    b.Navigation("HealthInsuranceOperator");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Alert", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId");

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AnamnesisResponse", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "Doctor")
                        .WithMany()
                        .HasForeignKey("DoctorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.AnamnesisTemplate", "Template")
                        .WithMany()
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Doctor");

                    b.Navigation("Patient");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Appointment", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.HealthInsurancePlan", "HealthInsurancePlan")
                        .WithMany()
                        .HasForeignKey("HealthInsurancePlanId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "Professional")
                        .WithMany()
                        .HasForeignKey("ProfessionalId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinic");

                    b.Navigation("HealthInsurancePlan");

                    b.Navigation("Patient");

                    b.Navigation("Professional");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AppointmentProcedure", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Procedure", "Procedure")
                        .WithMany()
                        .HasForeignKey("ProcedureId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Patient");

                    b.Navigation("Procedure");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AssinaturaDigital", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CertificadoDigital", "Certificado")
                        .WithMany()
                        .HasForeignKey("CertificadoId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "Medico")
                        .WithMany()
                        .HasForeignKey("MedicoId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Certificado");

                    b.Navigation("Medico");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AuthorizationRequest", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.PatientHealthInsurance", "PatientHealthInsurance")
                        .WithMany()
                        .HasForeignKey("PatientHealthInsuranceId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Patient");

                    b.Navigation("PatientHealthInsurance");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.BlockedTimeSlot", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "Professional")
                        .WithMany()
                        .HasForeignKey("ProfessionalId");

                    b.HasOne("MedicSoft.Domain.Entities.RecurringAppointmentPattern", "RecurringPattern")
                        .WithMany()
                        .HasForeignKey("RecurringPatternId");

                    b.Navigation("Clinic");

                    b.Navigation("Professional");

                    b.Navigation("RecurringPattern");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.BusinessConfiguration", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.AutomationAction", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.EmailTemplate", "EmailTemplate")
                        .WithMany()
                        .HasForeignKey("EmailTemplateId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MedicSoft.Domain.Entities.CRM.MarketingAutomation", "MarketingAutomation")
                        .WithMany("Actions")
                        .HasForeignKey("MarketingAutomationId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("EmailTemplate");

                    b.Navigation("MarketingAutomation");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.ChurnPrediction", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Complaint", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.ComplaintInteraction", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.Complaint", "Complaint")
                        .WithMany("Interactions")
                        .HasForeignKey("ComplaintId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Complaint");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.JourneyStage", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.PatientJourney", "PatientJourney")
                        .WithMany("Stages")
                        .HasForeignKey("PatientJourneyId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("PatientJourney");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.LeadActivity", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.Lead", "Lead")
                        .WithMany("Activities")
                        .HasForeignKey("LeadId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Lead");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.PatientJourney", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Paciente")
                        .WithMany()
                        .HasForeignKey("PacienteId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Paciente");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.PatientTouchpoint", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.JourneyStage", "JourneyStage")
                        .WithMany("Touchpoints")
                        .HasForeignKey("JourneyStageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("JourneyStage");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyQuestion", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.Survey", "Survey")
                        .WithMany("Questions")
                        .HasForeignKey("SurveyId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Survey");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyQuestionResponse", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.SurveyQuestion", "SurveyQuestion")
                        .WithMany()
                        .HasForeignKey("SurveyQuestionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.CRM.SurveyResponse", "SurveyResponse")
                        .WithMany("QuestionResponses")
                        .HasForeignKey("SurveyResponseId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("SurveyQuestion");

                    b.Navigation("SurveyResponse");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyResponse", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.CRM.Survey", "Survey")
                        .WithMany("Responses")
                        .HasForeignKey("SurveyId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Patient");

                    b.Navigation("Survey");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.WebhookDelivery", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CRM.WebhookSubscription", null)
                        .WithMany()
                        .HasForeignKey("SubscriptionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CashFlowEntry", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.AccountsPayable", "Payable")
                        .WithMany()
                        .HasForeignKey("PayableId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Payment", "Payment")
                        .WithMany()
                        .HasForeignKey("PaymentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.AccountsReceivable", "Receivable")
                        .WithMany()
                        .HasForeignKey("ReceivableId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Appointment");

                    b.Navigation("Payable");

                    b.Navigation("Payment");

                    b.Navigation("Receivable");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CertificadoDigital", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "Medico")
                        .WithMany()
                        .HasForeignKey("MedicoId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Medico");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatConversation", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "CreatedBy")
                        .WithMany()
                        .HasForeignKey("CreatedByUserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MedicSoft.Domain.Entities.ChatMessage", "LastMessage")
                        .WithMany()
                        .HasForeignKey("LastMessageId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("CreatedBy");

                    b.Navigation("LastMessage");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatMessage", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.ChatConversation", "Conversation")
                        .WithMany("Messages")
                        .HasForeignKey("ConversationId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.ChatMessage", "ReplyToMessage")
                        .WithMany()
                        .HasForeignKey("ReplyToMessageId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MedicSoft.Domain.Entities.User", "Sender")
                        .WithMany()
                        .HasForeignKey("SenderId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Conversation");

                    b.Navigation("ReplyToMessage");

                    b.Navigation("Sender");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatParticipant", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.ChatConversation", "Conversation")
                        .WithMany("Participants")
                        .HasForeignKey("ConversationId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Conversation");

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Clinic", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Company", "Company")
                        .WithMany()
                        .HasForeignKey("CompanyId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Company");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicCustomization", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicSubscription", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.SubscriptionPlan", "PendingPlan")
                        .WithMany()
                        .HasForeignKey("PendingPlanId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.SubscriptionPlan", "SubscriptionPlan")
                        .WithMany()
                        .HasForeignKey("SubscriptionPlanId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");

                    b.Navigation("PendingPlan");

                    b.Navigation("SubscriptionPlan");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicTag", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Tag", "Tag")
                        .WithMany()
                        .HasForeignKey("TagId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Clinic");

                    b.Navigation("Tag");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ClinicalExamination", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("Examinations")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("MedicalRecord");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ConsultationFormConfiguration", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.ConsultationFormProfile", "Profile")
                        .WithMany("Configurations")
                        .HasForeignKey("ProfileId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Clinic");

                    b.Navigation("Profile");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ControlledMedicationRegistry", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.DigitalPrescription", "Prescription")
                        .WithMany()
                        .HasForeignKey("PrescriptionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.User", "RegisteredBy")
                        .WithMany()
                        .HasForeignKey("RegisteredByUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Prescription");

                    b.Navigation("RegisteredBy");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DashboardWidget", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.CustomDashboard", "Dashboard")
                        .WithMany("Widgets")
                        .HasForeignKey("DashboardId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Dashboard");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DiagnosticHypothesis", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("Diagnoses")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("MedicalRecord");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DigitalPrescription", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "Doctor")
                        .WithMany()
                        .HasForeignKey("DoctorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany()
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Doctor");

                    b.Navigation("MedicalRecord");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DigitalPrescriptionItem", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.DigitalPrescription", "DigitalPrescription")
                        .WithMany("Items")
                        .HasForeignKey("DigitalPrescriptionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Medication", "Medication")
                        .WithMany()
                        .HasForeignKey("MedicationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("DigitalPrescription");

                    b.Navigation("Medication");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DocumentTemplate", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.GlobalDocumentTemplate", "GlobalTemplate")
                        .WithMany()
                        .HasForeignKey("GlobalTemplateId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinic");

                    b.Navigation("GlobalTemplate");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ElectronicInvoice", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Fiscal.ApuracaoImpostos", null)
                        .WithMany("NotasIncluidas")
                        .HasForeignKey("ApuracaoImpostosId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Payment", "Payment")
                        .WithMany()
                        .HasForeignKey("PaymentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Appointment");

                    b.Navigation("Payment");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.EmailVerificationToken", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ExamRequest", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Expense", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ExternalServiceConfiguration", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FilaEspera", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinica");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FinancialClosure", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.HealthInsuranceOperator", "HealthInsuranceOperator")
                        .WithMany()
                        .HasForeignKey("HealthInsuranceOperatorId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("HealthInsuranceOperator");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FinancialClosureItem", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.FinancialClosure", "Closure")
                        .WithMany("Items")
                        .HasForeignKey("ClosureId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Closure");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ApuracaoImpostos", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinica");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.BalancoPatrimonial", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinica");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ConfiguracaoFiscal", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinica");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.DRE", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinica");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ImpostoNota", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.ElectronicInvoice", "NotaFiscal")
                        .WithOne()
                        .HasForeignKey("MedicSoft.Domain.Entities.Fiscal.ImpostoNota", "NotaFiscalId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("NotaFiscal");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.LancamentoContabil", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Fiscal.PlanoContas", "Conta")
                        .WithMany("Lancamentos")
                        .HasForeignKey("PlanoContasId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinica");

                    b.Navigation("Conta");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.PlanoContas", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinica")
                        .WithMany()
                        .HasForeignKey("ClinicaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Fiscal.PlanoContas", "ContaPai")
                        .WithMany("SubContas")
                        .HasForeignKey("ContaPaiId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinica");

                    b.Navigation("ContaPai");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.HealthInsurancePlan", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.HealthInsuranceOperator", "Operator")
                        .WithMany()
                        .HasForeignKey("OperatorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany("HealthInsurancePlans")
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("Operator");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.InformedConsent", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("Consents")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("MedicalRecord");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Invoice", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Payment", "Payment")
                        .WithOne("Invoice")
                        .HasForeignKey("MedicSoft.Domain.Entities.Invoice", "PaymentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Payment");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecord", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordAccessLog", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("AccessLogs")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("MedicalRecord");

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordSignature", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecordVersion", "Version")
                        .WithMany()
                        .HasForeignKey("MedicalRecordVersionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "SignedBy")
                        .WithMany()
                        .HasForeignKey("SignedById")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("SignedBy");

                    b.Navigation("Version");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecordVersion", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "ChangedBy")
                        .WithMany()
                        .HasForeignKey("ChangedById")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("Versions")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ChangedBy");

                    b.Navigation("MedicalRecord");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MessageReadReceipt", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.ChatMessage", "Message")
                        .WithMany("ReadReceipts")
                        .HasForeignKey("MessageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Message");

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ModuleConfiguration", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ModuleConfigurationHistory", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.ModuleConfiguration", "ModuleConfiguration")
                        .WithMany()
                        .HasForeignKey("ModuleConfigurationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("ModuleConfiguration");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MonthlyControlledBalance", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "ClosedBy")
                        .WithMany()
                        .HasForeignKey("ClosedByUserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("ClosedBy");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Notification", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Owner", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.OwnerClinicLink", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Owner", "Owner")
                        .WithMany()
                        .HasForeignKey("OwnerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");

                    b.Navigation("Owner");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.OwnerSession", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Owner", "Owner")
                        .WithMany()
                        .HasForeignKey("OwnerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Owner");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PasswordResetToken", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Patient", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Guardian")
                        .WithMany("Children")
                        .HasForeignKey("GuardianId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.Address", "Address", b1 =>
                        {
                            b1.Property<Guid>("PatientId")
                                .HasColumnType("uuid");

                            b1.Property<string>("City")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("AddressCity");

                            b1.Property<string>("Complement")
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("AddressComplement");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("character varying(50)")
                                .HasColumnName("AddressCountry");

                            b1.Property<string>("Neighborhood")
                                .IsRequired()
                                .HasMaxLength(100)
                                .HasColumnType("character varying(100)")
                                .HasColumnName("AddressNeighborhood");

                            b1.Property<string>("Number")
                                .IsRequired()
                                .HasMaxLength(20)
                                .HasColumnType("character varying(20)")
                                .HasColumnName("AddressNumber");

                            b1.Property<string>("State")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("character varying(50)")
                                .HasColumnName("AddressState");

                            b1.Property<string>("Street")
                                .IsRequired()
                                .HasMaxLength(200)
                                .HasColumnType("character varying(200)")
                                .HasColumnName("AddressStreet");

                            b1.Property<string>("ZipCode")
                                .IsRequired()
                                .HasMaxLength(20)
                                .HasColumnType("character varying(20)")
                                .HasColumnName("AddressZipCode");

                            b1.HasKey("PatientId");

                            b1.ToTable("Patients");

                            b1.WithOwner()
                                .HasForeignKey("PatientId");
                        });

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.Email", "Email", b1 =>
                        {
                            b1.Property<Guid>("PatientId")
                                .HasColumnType("uuid");

                            b1.Property<string>("Value")
                                .IsRequired()
                                .HasMaxLength(250)
                                .HasColumnType("character varying(250)")
                                .HasColumnName("Email");

                            b1.HasKey("PatientId");

                            b1.ToTable("Patients");

                            b1.WithOwner()
                                .HasForeignKey("PatientId");
                        });

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.Phone", "Phone", b1 =>
                        {
                            b1.Property<Guid>("PatientId")
                                .HasColumnType("uuid");

                            b1.Property<string>("CountryCode")
                                .IsRequired()
                                .HasMaxLength(10)
                                .HasColumnType("character varying(10)")
                                .HasColumnName("PhoneCountryCode");

                            b1.Property<string>("Number")
                                .IsRequired()
                                .HasMaxLength(20)
                                .HasColumnType("character varying(20)")
                                .HasColumnName("PhoneNumber");

                            b1.HasKey("PatientId");

                            b1.ToTable("Patients");

                            b1.WithOwner()
                                .HasForeignKey("PatientId");
                        });

                    b.Navigation("Address")
                        .IsRequired();

                    b.Navigation("Email")
                        .IsRequired();

                    b.Navigation("Guardian");

                    b.Navigation("Phone")
                        .IsRequired();
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PatientClinicLink", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany("ClinicLinks")
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "PrimaryDoctor")
                        .WithMany()
                        .HasForeignKey("PrimaryDoctorId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinic");

                    b.Navigation("Patient");

                    b.Navigation("PrimaryDoctor");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PatientHealthInsurance", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.HealthInsurancePlan", "HealthInsurancePlan")
                        .WithMany()
                        .HasForeignKey("HealthInsurancePlanId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("HealthInsurancePlan");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PayablePayment", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.AccountsPayable", "Payable")
                        .WithMany("Payments")
                        .HasForeignKey("PayableId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Payable");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Payment", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.ClinicSubscription", "ClinicSubscription")
                        .WithMany()
                        .HasForeignKey("ClinicSubscriptionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Appointment");

                    b.Navigation("ClinicSubscription");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.PrescriptionItem", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("PrescriptionItems")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Medication", "Medication")
                        .WithMany()
                        .HasForeignKey("MedicationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("MedicalRecord");

                    b.Navigation("Medication");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Procedure", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", null)
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict);
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ProcedureMaterial", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Material", "Material")
                        .WithMany()
                        .HasForeignKey("MaterialId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Procedure", "Procedure")
                        .WithMany("Materials")
                        .HasForeignKey("ProcedureId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Material");

                    b.Navigation("Procedure");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ProfilePermission", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.AccessProfile", "Profile")
                        .WithMany("Permissions")
                        .HasForeignKey("ProfileId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Profile");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ReceivablePayment", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.AccountsReceivable", "Receivable")
                        .WithMany("Payments")
                        .HasForeignKey("ReceivableId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Receivable");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.RecurringAppointmentPattern", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId");

                    b.HasOne("MedicSoft.Domain.Entities.User", "Professional")
                        .WithMany()
                        .HasForeignKey("ProfessionalId");

                    b.Navigation("Clinic");

                    b.Navigation("Patient");

                    b.Navigation("Professional");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ScheduledReport", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.ReportTemplate", "ReportTemplate")
                        .WithMany("ScheduledReports")
                        .HasForeignKey("ReportTemplateId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("ReportTemplate");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SenhaFila", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Agendamento")
                        .WithMany()
                        .HasForeignKey("AgendamentoId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.FilaEspera", "Fila")
                        .WithMany("Senhas")
                        .HasForeignKey("FilaId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "Medico")
                        .WithMany()
                        .HasForeignKey("MedicoId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Paciente")
                        .WithMany()
                        .HasForeignKey("PacienteId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Agendamento");

                    b.Navigation("Fila");

                    b.Navigation("Medico");

                    b.Navigation("Paciente");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SngpcAlert", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "AcknowledgedBy")
                        .WithMany()
                        .HasForeignKey("AcknowledgedByUserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.MonthlyControlledBalance", "RelatedBalance")
                        .WithMany()
                        .HasForeignKey("RelatedBalanceId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MedicSoft.Domain.Entities.ControlledMedicationRegistry", "RelatedRegistry")
                        .WithMany()
                        .HasForeignKey("RelatedRegistryId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MedicSoft.Domain.Entities.SNGPCReport", "RelatedReport")
                        .WithMany()
                        .HasForeignKey("RelatedReportId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MedicSoft.Domain.Entities.User", "ResolvedBy")
                        .WithMany()
                        .HasForeignKey("ResolvedByUserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("AcknowledgedBy");

                    b.Navigation("RelatedBalance");

                    b.Navigation("RelatedRegistry");

                    b.Navigation("RelatedReport");

                    b.Navigation("ResolvedBy");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SngpcTransmission", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "InitiatedBy")
                        .WithMany()
                        .HasForeignKey("InitiatedByUserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.SNGPCReport", "Report")
                        .WithMany()
                        .HasForeignKey("SNGPCReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("InitiatedBy");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SoapRecord", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "Doctor")
                        .WithMany()
                        .HasForeignKey("DoctorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.AssessmentData", "Assessment", b1 =>
                        {
                            b1.Property<Guid>("SoapRecordId")
                                .HasColumnType("uuid");

                            b1.Property<string>("ClinicalReasoning")
                                .HasColumnType("text");

                            b1.Property<string>("Evolution")
                                .HasColumnType("text");

                            b1.Property<string>("PrimaryDiagnosis")
                                .HasColumnType("text");

                            b1.Property<string>("PrimaryDiagnosisIcd10")
                                .HasColumnType("text");

                            b1.Property<string>("Prognosis")
                                .HasColumnType("text");

                            b1.HasKey("SoapRecordId");

                            b1.ToTable("SoapRecords");

                            b1.ToJson("Assessment");

                            b1.WithOwner()
                                .HasForeignKey("SoapRecordId");

                            b1.OwnsMany("MedicSoft.Domain.ValueObjects.DifferentialDiagnosis", "DifferentialDiagnoses", b2 =>
                                {
                                    b2.Property<Guid>("AssessmentDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<int>("Id")
                                        .ValueGeneratedOnAdd()
                                        .HasColumnType("integer");

                                    b2.Property<string>("Diagnosis")
                                        .IsRequired()
                                        .HasColumnType("text");

                                    b2.Property<string>("Icd10Code")
                                        .HasColumnType("text");

                                    b2.Property<string>("Justification")
                                        .HasColumnType("text");

                                    b2.Property<int>("Priority")
                                        .HasColumnType("integer");

                                    b2.HasKey("AssessmentDataSoapRecordId", "Id");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("AssessmentDataSoapRecordId");
                                });

                            b1.Navigation("DifferentialDiagnoses");
                        });

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.ObjectiveData", "Objective", b1 =>
                        {
                            b1.Property<Guid>("SoapRecordId")
                                .HasColumnType("uuid");

                            b1.Property<string>("ImagingResults")
                                .HasColumnType("text");

                            b1.Property<string>("LabResults")
                                .HasColumnType("text");

                            b1.Property<string>("OtherExamResults")
                                .HasColumnType("text");

                            b1.HasKey("SoapRecordId");

                            b1.ToTable("SoapRecords");

                            b1.ToJson("Objective");

                            b1.WithOwner()
                                .HasForeignKey("SoapRecordId");

                            b1.OwnsOne("MedicSoft.Domain.ValueObjects.PhysicalExamination", "PhysicalExam", b2 =>
                                {
                                    b2.Property<Guid>("ObjectiveDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<string>("Abdomen")
                                        .HasColumnType("text");

                                    b2.Property<string>("Cardiovascular")
                                        .HasColumnType("text");

                                    b2.Property<string>("Ears")
                                        .HasColumnType("text");

                                    b2.Property<string>("Eyes")
                                        .HasColumnType("text");

                                    b2.Property<string>("GeneralAppearance")
                                        .HasColumnType("text");

                                    b2.Property<string>("Head")
                                        .HasColumnType("text");

                                    b2.Property<string>("Musculoskeletal")
                                        .HasColumnType("text");

                                    b2.Property<string>("Neck")
                                        .HasColumnType("text");

                                    b2.Property<string>("Neurological")
                                        .HasColumnType("text");

                                    b2.Property<string>("Nose")
                                        .HasColumnType("text");

                                    b2.Property<string>("OtherFindings")
                                        .HasColumnType("text");

                                    b2.Property<string>("Respiratory")
                                        .HasColumnType("text");

                                    b2.Property<string>("Skin")
                                        .HasColumnType("text");

                                    b2.Property<string>("Throat")
                                        .HasColumnType("text");

                                    b2.HasKey("ObjectiveDataSoapRecordId");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("ObjectiveDataSoapRecordId");
                                });

                            b1.OwnsOne("MedicSoft.Domain.ValueObjects.VitalSigns", "VitalSigns", b2 =>
                                {
                                    b2.Property<Guid>("ObjectiveDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<decimal?>("BMI")
                                        .HasColumnType("numeric");

                                    b2.Property<int?>("DiastolicBP")
                                        .HasColumnType("integer");

                                    b2.Property<int?>("HeartRate")
                                        .HasColumnType("integer");

                                    b2.Property<decimal?>("Height")
                                        .HasColumnType("numeric");

                                    b2.Property<int?>("OxygenSaturation")
                                        .HasColumnType("integer");

                                    b2.Property<int?>("Pain")
                                        .HasColumnType("integer");

                                    b2.Property<int?>("RespiratoryRate")
                                        .HasColumnType("integer");

                                    b2.Property<int?>("SystolicBP")
                                        .HasColumnType("integer");

                                    b2.Property<decimal?>("Temperature")
                                        .HasColumnType("numeric");

                                    b2.Property<decimal?>("Weight")
                                        .HasColumnType("numeric");

                                    b2.HasKey("ObjectiveDataSoapRecordId");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("ObjectiveDataSoapRecordId");
                                });

                            b1.Navigation("PhysicalExam");

                            b1.Navigation("VitalSigns");
                        });

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.PlanData", "Plan", b1 =>
                        {
                            b1.Property<Guid>("SoapRecordId")
                                .HasColumnType("uuid");

                            b1.Property<string>("ActivityRestrictions")
                                .HasColumnType("text");

                            b1.Property<string>("DietaryRecommendations")
                                .HasColumnType("text");

                            b1.Property<DateTime?>("NextAppointmentDate")
                                .HasColumnType("timestamp with time zone");

                            b1.Property<string>("PatientInstructions")
                                .HasColumnType("text");

                            b1.Property<string>("ReturnInstructions")
                                .HasColumnType("text");

                            b1.Property<string>("WarningSymptoms")
                                .HasColumnType("text");

                            b1.HasKey("SoapRecordId");

                            b1.ToTable("SoapRecords");

                            b1.ToJson("Plan");

                            b1.WithOwner()
                                .HasForeignKey("SoapRecordId");

                            b1.OwnsMany("MedicSoft.Domain.ValueObjects.SoapExamRequest", "ExamRequests", b2 =>
                                {
                                    b2.Property<Guid>("PlanDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<int>("Id")
                                        .ValueGeneratedOnAdd()
                                        .HasColumnType("integer");

                                    b2.Property<string>("ClinicalIndication")
                                        .HasColumnType("text");

                                    b2.Property<string>("ExamName")
                                        .IsRequired()
                                        .HasColumnType("text");

                                    b2.Property<string>("ExamType")
                                        .HasColumnType("text");

                                    b2.Property<bool>("IsUrgent")
                                        .HasColumnType("boolean");

                                    b2.HasKey("PlanDataSoapRecordId", "Id");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("PlanDataSoapRecordId");
                                });

                            b1.OwnsMany("MedicSoft.Domain.ValueObjects.SoapPrescription", "Prescriptions", b2 =>
                                {
                                    b2.Property<Guid>("PlanDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<int>("Id")
                                        .ValueGeneratedOnAdd()
                                        .HasColumnType("integer");

                                    b2.Property<string>("Dosage")
                                        .HasColumnType("text");

                                    b2.Property<string>("Duration")
                                        .HasColumnType("text");

                                    b2.Property<string>("Frequency")
                                        .HasColumnType("text");

                                    b2.Property<string>("Instructions")
                                        .HasColumnType("text");

                                    b2.Property<string>("MedicationName")
                                        .IsRequired()
                                        .HasColumnType("text");

                                    b2.HasKey("PlanDataSoapRecordId", "Id");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("PlanDataSoapRecordId");
                                });

                            b1.OwnsMany("MedicSoft.Domain.ValueObjects.SoapProcedure", "Procedures", b2 =>
                                {
                                    b2.Property<Guid>("PlanDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<int>("Id")
                                        .ValueGeneratedOnAdd()
                                        .HasColumnType("integer");

                                    b2.Property<string>("Description")
                                        .HasColumnType("text");

                                    b2.Property<string>("ProcedureName")
                                        .IsRequired()
                                        .HasColumnType("text");

                                    b2.Property<DateTime?>("ScheduledDate")
                                        .HasColumnType("timestamp with time zone");

                                    b2.HasKey("PlanDataSoapRecordId", "Id");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("PlanDataSoapRecordId");
                                });

                            b1.OwnsMany("MedicSoft.Domain.ValueObjects.SoapReferral", "Referrals", b2 =>
                                {
                                    b2.Property<Guid>("PlanDataSoapRecordId")
                                        .HasColumnType("uuid");

                                    b2.Property<int>("Id")
                                        .ValueGeneratedOnAdd()
                                        .HasColumnType("integer");

                                    b2.Property<string>("Priority")
                                        .HasColumnType("text");

                                    b2.Property<string>("Reason")
                                        .HasColumnType("text");

                                    b2.Property<string>("SpecialtyName")
                                        .IsRequired()
                                        .HasColumnType("text");

                                    b2.HasKey("PlanDataSoapRecordId", "Id");

                                    b2.ToTable("SoapRecords");

                                    b2.WithOwner()
                                        .HasForeignKey("PlanDataSoapRecordId");
                                });

                            b1.Navigation("ExamRequests");

                            b1.Navigation("Prescriptions");

                            b1.Navigation("Procedures");

                            b1.Navigation("Referrals");
                        });

                    b.OwnsOne("MedicSoft.Domain.ValueObjects.SubjectiveData", "Subjective", b1 =>
                        {
                            b1.Property<Guid>("SoapRecordId")
                                .HasColumnType("uuid");

                            b1.Property<string>("AggravatingFactors")
                                .HasColumnType("text");

                            b1.Property<string>("Allergies")
                                .HasColumnType("text");

                            b1.Property<string>("ChiefComplaint")
                                .IsRequired()
                                .HasColumnType("text");

                            b1.Property<string>("CurrentMedications")
                                .HasColumnType("text");

                            b1.Property<string>("CurrentSymptoms")
                                .HasColumnType("text");

                            b1.Property<string>("FamilyHistory")
                                .HasColumnType("text");

                            b1.Property<string>("HistoryOfPresentIllness")
                                .IsRequired()
                                .HasColumnType("text");

                            b1.Property<string>("PastMedicalHistory")
                                .HasColumnType("text");

                            b1.Property<string>("RelievingFactors")
                                .HasColumnType("text");

                            b1.Property<string>("ReviewOfSystems")
                                .HasColumnType("text");

                            b1.Property<string>("SocialHistory")
                                .HasColumnType("text");

                            b1.Property<string>("SymptomDuration")
                                .HasColumnType("text");

                            b1.HasKey("SoapRecordId");

                            b1.ToTable("SoapRecords");

                            b1.ToJson("Subjective");

                            b1.WithOwner()
                                .HasForeignKey("SoapRecordId");
                        });

                    b.Navigation("Appointment");

                    b.Navigation("Assessment");

                    b.Navigation("Doctor");

                    b.Navigation("Objective");

                    b.Navigation("Patient");

                    b.Navigation("Plan");

                    b.Navigation("Subjective");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.SubscriptionCredit", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "GrantedByUser")
                        .WithMany()
                        .HasForeignKey("GrantedByUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.ClinicSubscription", "Subscription")
                        .WithMany()
                        .HasForeignKey("SubscriptionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("GrantedByUser");

                    b.Navigation("Subscription");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TherapeuticPlan", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.MedicalRecord", "MedicalRecord")
                        .WithMany("Plans")
                        .HasForeignKey("MedicalRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("MedicalRecord");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TicketAttachment", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Ticket", "Ticket")
                        .WithMany("Attachments")
                        .HasForeignKey("TicketId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Ticket");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TicketComment", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Ticket", "Ticket")
                        .WithMany("Comments")
                        .HasForeignKey("TicketId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Ticket");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TicketHistory", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Ticket", "Ticket")
                        .WithMany("History")
                        .HasForeignKey("TicketId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Ticket");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissBatch", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.HealthInsuranceOperator", "Operator")
                        .WithMany()
                        .HasForeignKey("OperatorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");

                    b.Navigation("Operator");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGlosa", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.TissGuide", "Guide")
                        .WithMany()
                        .HasForeignKey("GuideId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Guide");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGuide", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.PatientHealthInsurance", "PatientHealthInsurance")
                        .WithMany()
                        .HasForeignKey("PatientHealthInsuranceId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.TissBatch", "TissBatch")
                        .WithMany("Guides")
                        .HasForeignKey("TissBatchId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("PatientHealthInsurance");

                    b.Navigation("TissBatch");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGuideProcedure", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.TissGuide", "TissGuide")
                        .WithMany("Procedures")
                        .HasForeignKey("TissGuideId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("TissGuide");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissOperadoraConfig", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.HealthInsuranceOperator", "Operator")
                        .WithMany()
                        .HasForeignKey("OperatorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Operator");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissRecursoGlosa", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.TissGlosa", "Glosa")
                        .WithMany("Recursos")
                        .HasForeignKey("GlosaId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Glosa");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TwoFactorAuth", b =>
                {
                    b.OwnsMany("MedicSoft.Domain.Entities.BackupCode", "BackupCodes", b1 =>
                        {
                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("integer");

                            NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b1.Property<int>("Id"));

                            b1.Property<string>("Code")
                                .IsRequired()
                                .HasMaxLength(50)
                                .HasColumnType("character varying(50)");

                            b1.Property<string>("HashedCode")
                                .IsRequired()
                                .HasMaxLength(500)
                                .HasColumnType("character varying(500)");

                            b1.Property<bool>("IsUsed")
                                .HasColumnType("boolean");

                            b1.Property<Guid>("TwoFactorAuthId")
                                .HasColumnType("uuid");

                            b1.Property<DateTime?>("UsedAt")
                                .HasColumnType("timestamp with time zone");

                            b1.HasKey("Id");

                            b1.HasIndex("TwoFactorAuthId");

                            b1.ToTable("TwoFactorBackupCodes", (string)null);

                            b1.WithOwner()
                                .HasForeignKey("TwoFactorAuthId");
                        });

                    b.Navigation("BackupCodes");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.User", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "CurrentClinic")
                        .WithMany()
                        .HasForeignKey("CurrentClinicId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("MedicSoft.Domain.Entities.AccessProfile", "Profile")
                        .WithMany()
                        .HasForeignKey("ProfileId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Clinic");

                    b.Navigation("CurrentClinic");

                    b.Navigation("Profile");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.UserClinicLink", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany("ClinicLinks")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.UserPresence", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.UserSession", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WaitingQueueConfiguration", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Clinic");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WaitingQueueEntry", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Appointment", "Appointment")
                        .WithMany()
                        .HasForeignKey("AppointmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Clinic", "Clinic")
                        .WithMany()
                        .HasForeignKey("ClinicId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.Patient", "Patient")
                        .WithMany()
                        .HasForeignKey("PatientId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Appointment");

                    b.Navigation("Clinic");

                    b.Navigation("Patient");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowAction", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Workflow", "Workflow")
                        .WithMany("Actions")
                        .HasForeignKey("WorkflowId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Workflow");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowActionExecution", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.WorkflowAction", "WorkflowAction")
                        .WithMany("Executions")
                        .HasForeignKey("WorkflowActionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("MedicSoft.Domain.Entities.WorkflowExecution", "WorkflowExecution")
                        .WithMany("ActionExecutions")
                        .HasForeignKey("WorkflowExecutionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("WorkflowAction");

                    b.Navigation("WorkflowExecution");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowExecution", b =>
                {
                    b.HasOne("MedicSoft.Domain.Entities.Workflow", "Workflow")
                        .WithMany("Executions")
                        .HasForeignKey("WorkflowId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Workflow");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccessProfile", b =>
                {
                    b.Navigation("Permissions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountsPayable", b =>
                {
                    b.Navigation("Payments");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.AccountsReceivable", b =>
                {
                    b.Navigation("Payments");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Complaint", b =>
                {
                    b.Navigation("Interactions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.JourneyStage", b =>
                {
                    b.Navigation("Touchpoints");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Lead", b =>
                {
                    b.Navigation("Activities");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.MarketingAutomation", b =>
                {
                    b.Navigation("Actions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.PatientJourney", b =>
                {
                    b.Navigation("Stages");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.Survey", b =>
                {
                    b.Navigation("Questions");

                    b.Navigation("Responses");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CRM.SurveyResponse", b =>
                {
                    b.Navigation("QuestionResponses");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatConversation", b =>
                {
                    b.Navigation("Messages");

                    b.Navigation("Participants");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ChatMessage", b =>
                {
                    b.Navigation("ReadReceipts");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ConsultationFormProfile", b =>
                {
                    b.Navigation("Configurations");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.CustomDashboard", b =>
                {
                    b.Navigation("Widgets");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.DigitalPrescription", b =>
                {
                    b.Navigation("Items");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FilaEspera", b =>
                {
                    b.Navigation("Senhas");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.FinancialClosure", b =>
                {
                    b.Navigation("Items");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.ApuracaoImpostos", b =>
                {
                    b.Navigation("NotasIncluidas");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Fiscal.PlanoContas", b =>
                {
                    b.Navigation("Lancamentos");

                    b.Navigation("SubContas");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.MedicalRecord", b =>
                {
                    b.Navigation("AccessLogs");

                    b.Navigation("Consents");

                    b.Navigation("Diagnoses");

                    b.Navigation("Examinations");

                    b.Navigation("Plans");

                    b.Navigation("PrescriptionItems");

                    b.Navigation("Versions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Patient", b =>
                {
                    b.Navigation("Children");

                    b.Navigation("ClinicLinks");

                    b.Navigation("HealthInsurancePlans");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Payment", b =>
                {
                    b.Navigation("Invoice");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Procedure", b =>
                {
                    b.Navigation("Materials");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.ReportTemplate", b =>
                {
                    b.Navigation("ScheduledReports");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Ticket", b =>
                {
                    b.Navigation("Attachments");

                    b.Navigation("Comments");

                    b.Navigation("History");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissBatch", b =>
                {
                    b.Navigation("Guides");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGlosa", b =>
                {
                    b.Navigation("Recursos");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.TissGuide", b =>
                {
                    b.Navigation("Procedures");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.User", b =>
                {
                    b.Navigation("ClinicLinks");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.Workflow", b =>
                {
                    b.Navigation("Actions");

                    b.Navigation("Executions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowAction", b =>
                {
                    b.Navigation("Executions");
                });

            modelBuilder.Entity("MedicSoft.Domain.Entities.WorkflowExecution", b =>
                {
                    b.Navigation("ActionExecutions");
                });
#pragma warning restore 612, 618
        }
    }
}
