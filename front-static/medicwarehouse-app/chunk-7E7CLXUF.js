import{a as F,b as C,c as E,d as w,f as z,h as L,j as N,o as T,q as k}from"./chunk-HJDNBRIJ.js";import{$ as o,B as l,Ca as y,D as p,Da as P,E as h,Ha as O,Ia as S,N as s,O as c,S as v,T as n,U as t,V as u,X as x,Y as f,aa as b,ba as _,ta as M,x as m}from"./chunk-5XZGLIZJ.js";function I(e,i){if(e&1&&(n(0,"p"),o(1),t()),e&2){let r=f();l(),b(r.clinicName())}}function U(e,i){e&1&&(n(0,"p"),o(1,"Sistema de Gest\xE3o para Consult\xF3rios M\xE9dicos"),t())}function R(e,i){if(e&1&&(n(0,"div",4),o(1),t()),e&2){let r=f();l(),_(" ",r.errorMessage()," ")}}function G(e,i){if(e&1&&(n(0,"div",5),o(1),t()),e&2){let r=f();l(),_(" ",r.infoMessage()," ")}}function j(e,i){if(e&1&&(n(0,"div",6)(1,"p"),o(2,"Acessando: "),n(3,"strong"),o(4),t()()()),e&2){let r=f();l(4),b(r.tenantFromUrl())}}function A(e,i){e&1&&(n(0,"span",10),o(1,"Usu\xE1rio \xE9 obrigat\xF3rio"),t())}function B(e,i){e&1&&(n(0,"span",10),o(1,"Senha \xE9 obrigat\xF3ria"),t())}function V(e,i){e&1&&(n(0,"div",7)(1,"label",16),o(2,"Tenant ID"),t(),u(3,"input",17),n(4,"small",18),o(5,"Acesse via subdom\xEDnio para n\xE3o precisar digitar o Tenant ID"),t()())}function Y(e,i){e&1&&(n(0,"span"),o(1,"Entrando..."),t())}function q(e,i){e&1&&(n(0,"span"),o(1,"Entrar"),t())}var D=class e{constructor(i,r,a,d){this.fb=i;this.authService=r;this.router=a;this.tenantResolver=d;this.loginForm=this.fb.group({username:["",[C.required]],password:["",[C.required]],tenantId:[""]}),this.detectTenantFromUrl();let g=this.router.getCurrentNavigation();g?.extras?.state?.message&&this.infoMessage.set(g.extras.state.message)}loginForm;errorMessage=m("");infoMessage=m("");isLoading=m(!1);tenantFromUrl=m(null);clinicName=m(null);detectTenantFromUrl(){let i=this.tenantResolver.extractTenantFromUrl();i&&(this.tenantFromUrl.set(i),this.loginForm.patchValue({tenantId:i}),this.tenantResolver.resolveTenantBySubdomain(i).subscribe({next:r=>{this.clinicName.set(r.clinicName||null)},error:()=>{}}))}onSubmit(){this.loginForm.valid&&(this.isLoading.set(!0),this.errorMessage.set(""),this.authService.login(this.loginForm.value).subscribe({next:()=>{this.isLoading.set(!1),this.router.navigate(["/dashboard"])},error:i=>{this.isLoading.set(!1),this.errorMessage.set(i.error?.message||"Login failed. Please check your credentials.")}}))}static \u0275fac=function(r){return new(r||e)(p(T),p(S),p(y),p(O))};static \u0275cmp=h({type:e,selectors:[["app-login"]],decls:30,vars:10,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[3,"ngSubmit","formGroup"],[1,"alert","alert-error"],[1,"alert","alert-warning"],[1,"alert","alert-info"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username","placeholder","Digite seu usu\xE1rio",1,"form-control"],[1,"error-text"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Digite sua senha",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"login-footer"],["routerLink","/register"],["for","tenantId"],["type","text","id","tenantId","formControlName","tenantId","placeholder","Digite o tenant ID",1,"form-control"],[1,"form-help"]],template:function(r,a){if(r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"MedicWarehouse"),t(),s(5,I,2,1,"p")(6,U,2,0,"p"),t(),n(7,"form",3),x("ngSubmit",function(){return a.onSubmit()}),s(8,R,2,1,"div",4),s(9,G,2,1,"div",5),s(10,j,5,1,"div",6),n(11,"div",7)(12,"label",8),o(13,"Usu\xE1rio"),t(),u(14,"input",9),s(15,A,2,0,"span",10),t(),n(16,"div",7)(17,"label",11),o(18,"Senha"),t(),u(19,"input",12),s(20,B,2,0,"span",10),t(),s(21,V,6,0,"div",7),n(22,"button",13),s(23,Y,2,0,"span")(24,q,2,0,"span"),t(),n(25,"div",14)(26,"p"),o(27,"N\xE3o tem uma conta? "),n(28,"a",15),o(29,"Cadastre-se"),t()()()()()()),r&2){let d,g;l(5),c(a.clinicName()?5:6),l(2),v("formGroup",a.loginForm),l(),c(a.errorMessage()?8:-1),l(),c(a.infoMessage()?9:-1),l(),c(a.tenantFromUrl()?10:-1),l(5),c((d=a.loginForm.get("username"))!=null&&d.invalid&&((d=a.loginForm.get("username"))!=null&&d.touched)?15:-1),l(5),c((g=a.loginForm.get("password"))!=null&&g.invalid&&((g=a.loginForm.get("password"))!=null&&g.touched)?20:-1),l(),c(a.tenantFromUrl()?-1:21),l(),v("disabled",a.loginForm.invalid||a.isLoading()),l(),c(a.isLoading()?23:24)}},dependencies:[M,k,z,F,E,w,L,N,P],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--primary-600) 0%,var(--primary-800) 100%);padding:var(--spacing-6);position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_pulse 15s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:.5}50%{transform:scale(1.1);opacity:.8}}.login-card[_ngcontent-%COMP%]{background:#fff;padding:var(--spacing-10);border-radius:var(--radius-xl);box-shadow:var(--shadow-xl);width:100%;max-width:440px;position:relative;z-index:1;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-8)}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-600);margin:0 0 var(--spacing-3) 0;font-size:var(--font-size-4xl);font-weight:700;display:flex;align-items:center;justify-content:center;gap:var(--spacing-2)}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"\\1f3e5";font-size:var(--font-size-4xl)}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-600);margin:0;font-size:var(--font-size-base);line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-6)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-2);color:var(--gray-700);font-weight:600;font-size:var(--font-size-sm)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-4);border:2px solid var(--gray-300);border-radius:var(--radius-lg);font-size:var(--font-size-base);transition:all var(--transition-base);box-sizing:border-box;background-color:#fff}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-500);box-shadow:0 0 0 4px var(--primary-50);transform:translateY(-1px)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--gray-400)}.form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-1);color:var(--error-600);font-size:var(--font-size-xs);margin-top:var(--spacing-2)}.form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f"}.form-group[_ngcontent-%COMP%]   .form-help[_ngcontent-%COMP%]{display:block;color:var(--gray-500);font-size:var(--font-size-xs);margin-top:var(--spacing-2)}.alert[_ngcontent-%COMP%]{padding:var(--spacing-4);border-radius:var(--radius-lg);margin-bottom:var(--spacing-6)}.alert.alert-error[_ngcontent-%COMP%]{background-color:var(--error-50);color:var(--error-700);border:1px solid var(--error-200);display:flex;align-items:center;gap:var(--spacing-2)}.alert.alert-error[_ngcontent-%COMP%]:before{content:"\\274c";font-size:var(--font-size-lg)}.alert.alert-info[_ngcontent-%COMP%]{background-color:var(--primary-50);color:var(--primary-700);border:1px solid var(--primary-200);display:flex;align-items:center;gap:var(--spacing-2)}.alert.alert-info[_ngcontent-%COMP%]:before{content:"\\2139\\fe0f";font-size:var(--font-size-lg)}.alert.alert-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-sm)}.alert.alert-warning[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e;border:1px solid #fde68a;display:flex;align-items:center;gap:var(--spacing-2)}.alert.alert-warning[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:var(--font-size-lg)}.btn[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-4);border:none;border-radius:var(--radius-lg);font-size:var(--font-size-base);font-weight:600;cursor:pointer;transition:all var(--transition-base);margin-top:var(--spacing-2)}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-600),var(--primary-700));color:#fff;box-shadow:var(--shadow-md)}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,var(--primary-700),var(--primary-800));transform:translateY(-2px);box-shadow:var(--shadow-lg)}.btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.login-footer[_ngcontent-%COMP%]{margin-top:var(--spacing-6);text-align:center;padding-top:var(--spacing-6);border-top:1px solid var(--gray-200)}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-600);font-size:var(--font-size-sm)}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-600);text-decoration:none;font-weight:600;transition:color var(--transition-fast)}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-700);text-decoration:underline}']})};export{D as Login};
