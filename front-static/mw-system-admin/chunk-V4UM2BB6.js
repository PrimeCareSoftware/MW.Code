import{a as O}from"./chunk-Y25LJJVG.js";import{$ as n,B as r,D as x,E as b,K as f,L as C,M as E,N as _,S as t,T as e,U as v,X as p,Y as c,aa as d,ba as h,ia as S,qa as P,s as m,t as g,ua as M,x as u}from"./chunk-W37OOKLC.js";var y=(o,a)=>a.key;function w(o,a){o&1&&(t(0,"div",3),n(1,"Carregando dados..."),e())}function I(o,a){if(o&1){let i=v();t(0,"div",4)(1,"p"),n(2),e(),t(3,"button",5),p("click",function(){m(i);let l=c();return g(l.loadAnalytics())}),n(4,"Tentar novamente"),e()()}if(o&2){let i=c();r(2),h("Erro ao carregar dados: ",i.error())}}function k(o,a){if(o&1&&(t(0,"div",20)(1,"div",26),n(2),e(),t(3,"div",27),n(4),e()()),o&2){let i=a.$implicit;r(2),d(i.value),r(2),d(i.label)}}function A(o,a){if(o&1&&(t(0,"div",20)(1,"div",26),n(2),e(),t(3,"div",27),n(4),e()()),o&2){let i=a.$implicit;r(2),d(i.value),r(2),d(i.label)}}function T(o,a){if(o&1){let i=v();t(0,"div",6)(1,"div",7)(2,"div",8)(3,"h3"),n(4,"Cl\xEDnicas"),e(),t(5,"i",9),n(6,"\u{1F3E5}"),e()(),t(7,"div",10)(8,"div",11),n(9),e(),t(10,"div",12)(11,"span",13)(12,"span",14),n(13,"Ativas:"),e(),t(14,"span",15),n(15),e()(),t(16,"span",13)(17,"span",14),n(18,"Inativas:"),e(),t(19,"span",16),n(20),e()()()()(),t(21,"div",7)(22,"div",8)(23,"h3"),n(24,"Usu\xE1rios"),e(),t(25,"i",9),n(26,"\u{1F465}"),e()(),t(27,"div",10)(28,"div",11),n(29),e(),t(30,"div",12)(31,"span",13)(32,"span",14),n(33,"Ativos:"),e(),t(34,"span",15),n(35),e()(),t(36,"span",13)(37,"span",14),n(38,"Inativos:"),e(),t(39,"span",16),n(40),e()()()()(),t(41,"div",7)(42,"div",8)(43,"h3"),n(44,"Pacientes"),e(),t(45,"i",9),n(46,"\u{1FA7A}"),e()(),t(47,"div",10)(48,"div",11),n(49),e(),t(50,"div",12)(51,"span",13),n(52,"Total de pacientes cadastrados no sistema"),e()()()(),t(53,"div",17)(54,"div",8)(55,"h3"),n(56,"Receita Mensal Recorrente"),e(),t(57,"i",9),n(58,"\u{1F4B0}"),e()(),t(59,"div",10)(60,"div",11),n(61),e(),t(62,"div",12)(63,"span",13),n(64,"MRR total de todas as cl\xEDnicas ativas"),e()()()()(),t(65,"div",18)(66,"h2"),n(67,"Distribui\xE7\xE3o de Assinaturas por Status"),e(),t(68,"div",19),E(69,k,5,2,"div",20,y),e()(),t(71,"div",18)(72,"h2"),n(73,"Distribui\xE7\xE3o de Assinaturas por Plano"),e(),t(74,"div",19),E(75,A,5,2,"div",20,y),e()(),t(77,"div",21)(78,"h2"),n(79,"A\xE7\xF5es R\xE1pidas"),e(),t(80,"div",22)(81,"button",23),p("click",function(){m(i);let l=c();return g(l.navigateToClinics(""))}),t(82,"span",24),n(83,"\u{1F4CB}"),e(),t(84,"span",25),n(85,"Gerenciar Cl\xEDnicas"),e()(),t(86,"button",23),p("click",function(){m(i);let l=c();return g(l.navigateToClinics("active"))}),t(87,"span",24),n(88,"\u2705"),e(),t(89,"span",25),n(90,"Ver Cl\xEDnicas Ativas"),e()(),t(91,"button",23),p("click",function(){m(i);let l=c();return g(l.navigateToClinics("inactive"))}),t(92,"span",24),n(93,"\u{1F6AB}"),e(),t(94,"span",25),n(95,"Ver Cl\xEDnicas Inativas"),e()(),t(96,"button",23),p("click",function(){m(i);let l=c();return g(l.navigateToUsers())}),t(97,"span",24),n(98,"\u{1F464}"),e(),t(99,"span",25),n(100,"Gerenciar Usu\xE1rios System Owner"),e()()()()}if(o&2){let i=c();r(9),d(i.analytics().totalClinics),r(6),d(i.analytics().activeClinics),r(5),d(i.analytics().inactiveClinics),r(9),d(i.analytics().totalUsers),r(6),d(i.analytics().activeUsers),r(5),d(i.analytics().totalUsers-i.analytics().activeUsers),r(9),d(i.analytics().totalPatients),r(12),d(i.formatCurrency(i.analytics().monthlyRecurringRevenue)),r(8),_(i.getSubscriptionStatusItems()),r(6),_(i.getSubscriptionPlanItems())}}var D=class o{constructor(a,i){this.systemAdminService=a;this.router=i}analytics=u(null);loading=u(!0);error=u(null);ngOnInit(){this.loadAnalytics()}loadAnalytics(){this.loading.set(!0),this.error.set(null),this.systemAdminService.getAnalytics().subscribe({next:a=>{this.analytics.set(a),this.loading.set(!1)},error:a=>{this.error.set(a.error?.message||"Erro ao carregar dados"),this.loading.set(!1)}})}formatCurrency(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}getSubscriptionStatusItems(){let a={Active:"Ativo",Trial:"Trial",Expired:"Expirado",Suspended:"Suspenso",PaymentOverdue:"Pagamento Atrasado",Cancelled:"Cancelado"};return Object.entries(this.analytics()?.subscriptionsByStatus||{}).map(([i,s])=>({key:i,label:a[i]||i,value:s}))}getSubscriptionPlanItems(){return Object.entries(this.analytics()?.subscriptionsByPlan||{}).map(([a,i])=>({key:a,label:a,value:i}))}navigateToClinics(a){this.router.navigate(["/clinics"],{queryParams:a?{status:a}:{}})}navigateToUsers(){this.router.navigate(["/users"])}static \u0275fac=function(i){return new(i||o)(x(O),x(P))};static \u0275cmp=b({type:o,selectors:[["app-dashboard"]],decls:9,vars:1,consts:[[1,"dashboard"],[1,"header"],[1,"subtitle"],[1,"loading"],[1,"error"],[1,"btn-retry",3,"click"],[1,"analytics-grid"],[1,"card"],[1,"card-header"],[1,"icon"],[1,"card-body"],[1,"stat-large"],[1,"stat-details"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","success"],[1,"stat-value","error"],[1,"card","highlight"],[1,"section"],[1,"distribution-grid"],[1,"distribution-card"],[1,"quick-actions"],[1,"actions-grid"],[1,"action-btn",3,"click"],[1,"action-icon"],[1,"action-text"],[1,"distribution-value"],[1,"distribution-label"]],template:function(i,s){i&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Painel de Administra\xE7\xE3o do Sistema"),e(),t(4,"p",2),n(5,"Gerencie todas as cl\xEDnicas e visualize m\xE9tricas do sistema"),e()(),f(6,w,2,0,"div",3)(7,I,5,1,"div",4)(8,T,101,8),e()),i&2&&(r(6),C(s.loading()?6:s.error()?7:s.analytics()?8:-1))},dependencies:[S,M],styles:[".dashboard[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:32px}h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a202c;margin:0 0 8px}.subtitle[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin:0}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#718096}.error[_ngcontent-%COMP%]{color:#c53030}.btn-retry[_ngcontent-%COMP%]{margin-top:16px;padding:12px 24px;background:#667eea;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600}.btn-retry[_ngcontent-%COMP%]:hover{background:#5568d3}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;margin-bottom:32px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.card.highlight[_ngcontent-%COMP%]   .stat-large[_ngcontent-%COMP%], .card.highlight[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%], .card.highlight[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{color:#fff}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#2d3748;margin:0}.card.highlight[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.icon[_ngcontent-%COMP%]{font-size:32px}.card-body[_ngcontent-%COMP%]{text-align:left}.stat-large[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#1a202c;margin-bottom:12px}.stat-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px}.stat-label[_ngcontent-%COMP%]{color:#718096;font-weight:500}.stat-value[_ngcontent-%COMP%]{font-weight:600}.stat-value.success[_ngcontent-%COMP%]{color:#10b981}.stat-value.error[_ngcontent-%COMP%]{color:#ef4444}.section[_ngcontent-%COMP%]{margin-bottom:32px;background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1a202c;margin:0 0 20px}.distribution-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px}.distribution-card[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#f7fafc;border-radius:8px;border:2px solid #e2e8f0}.distribution-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#667eea;margin-bottom:8px}.distribution-label[_ngcontent-%COMP%]{font-size:13px;color:#718096;font-weight:500}.quick-actions[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a}.quick-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1a202c;margin:0 0 20px}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:24px;background:#f7fafc;border:2px solid #e2e8f0;border-radius:12px;cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#667eea;border-color:#667eea;transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.action-btn[_ngcontent-%COMP%]:hover   .action-icon[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]:hover   .action-text[_ngcontent-%COMP%]{color:#fff}.action-icon[_ngcontent-%COMP%]{font-size:32px}.action-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#2d3748;text-align:center}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{padding:16px}h1[_ngcontent-%COMP%]{font-size:24px}.analytics-grid[_ngcontent-%COMP%], .distribution-grid[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{D as Dashboard};
