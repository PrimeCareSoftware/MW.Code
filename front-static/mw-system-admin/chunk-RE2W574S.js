import{a as L}from"./chunk-Y25LJJVG.js";import{$ as o,B as r,D as _,E as h,K as f,L as C,M,N as O,S as n,T as e,U as v,V as E,X as d,Y as s,Z as x,_ as S,aa as b,ba as m,ca as k,ia as y,oa as w,qa as A,s as g,t as p,ua as D,x as u}from"./chunk-W37OOKLC.js";var I=(c,i)=>i.id;function F(c,i){c&1&&(n(0,"div",6),o(1,"Carregando cl\xEDnicas..."),e())}function z(c,i){if(c&1){let t=v();n(0,"div",7)(1,"p"),o(2),e(),n(3,"button",8),d("click",function(){g(t);let l=s();return p(l.loadClinics())}),o(4,"Tentar novamente"),e()()}if(c&2){let t=s();r(2),m("Erro: ",t.error())}}function V(c,i){if(c&1){let t=v();n(0,"tr")(1,"td")(2,"div",13)(3,"div",14),o(4),e(),n(5,"div",15),o(6),e()()(),n(7,"td"),o(8),e(),n(9,"td"),o(10),e(),n(11,"td"),o(12),e(),n(13,"td")(14,"span",16),o(15),e()(),n(16,"td")(17,"span",17),o(18),e()(),n(19,"td")(20,"span",18),o(21),e()(),n(22,"td")(23,"div",19)(24,"button",20),d("click",function(){let l=g(t).$implicit,P=s(2);return p(P.viewDetails(l.id))}),o(25," \u{1F441}\uFE0F "),e(),n(26,"button",21),d("click",function(){let l=g(t).$implicit,P=s(2);return p(P.toggleStatus(l.id,l.isActive))}),o(27),e()()()()}if(c&2){let t=i.$implicit,a=s(2);r(4),b(t.name),r(2),m("Criada em ",a.formatDate(t.createdAt)),r(2),b(t.document),r(2),b(t.email),r(2),b(t.phone),r(3),b(t.planName),r(2),S(a.getStatusClass(t.subscriptionStatus)),r(),m(" ",a.getStatusLabel(t.subscriptionStatus)," "),r(2),x("active",t.isActive)("inactive",!t.isActive),r(),m(" ",t.isActive?"\u2705 Ativa":"\u{1F6AB} Inativa"," "),r(5),x("btn-danger",t.isActive)("btn-success",!t.isActive),E("title",t.isActive?"Desativar":"Ativar"),r(),m(" ",t.isActive?"\u{1F6AB}":"\u2705"," ")}}function N(c,i){c&1&&(n(0,"div",11)(1,"p"),o(2,"Nenhuma cl\xEDnica encontrada"),e()())}function R(c,i){if(c&1){let t=v();n(0,"div",12)(1,"button",22),d("click",function(){g(t);let l=s(2);return p(l.changePage(l.currentPage()-1))}),o(2," \u2039 Anterior "),e(),n(3,"span",23),o(4),e(),n(5,"button",22),d("click",function(){g(t);let l=s(2);return p(l.changePage(l.currentPage()+1))}),o(6," Pr\xF3xima \u203A "),e()()}if(c&2){let t=s(2);r(),E("disabled",t.currentPage()===1),r(3),k(" P\xE1gina ",t.currentPage()," de ",t.paginatedClinics().totalPages," "),r(),E("disabled",t.currentPage()===t.paginatedClinics().totalPages)}}function j(c,i){if(c&1&&(n(0,"div",9)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),o(5,"Cl\xEDnica"),e(),n(6,"th"),o(7,"CNPJ"),e(),n(8,"th"),o(9,"Email"),e(),n(10,"th"),o(11,"Telefone"),e(),n(12,"th"),o(13,"Plano"),e(),n(14,"th"),o(15,"Status Assinatura"),e(),n(16,"th"),o(17,"Status"),e(),n(18,"th"),o(19,"A\xE7\xF5es"),e()()(),n(20,"tbody"),M(21,V,28,20,"tr",null,I),e()(),f(23,N,3,0,"div",11),e(),f(24,R,7,4,"div",12)),c&2){let t,a=s();r(21),O((t=a.paginatedClinics())==null?null:t.clinics),r(2),C(a.paginatedClinics()&&a.paginatedClinics().clinics.length===0?23:-1),r(),C(a.paginatedClinics()&&a.paginatedClinics().totalPages>1?24:-1)}}var T=class c{constructor(i,t,a){this.systemAdminService=i;this.router=t;this.route=a}paginatedClinics=u(null);loading=u(!0);error=u(null);selectedFilter=u("");currentPage=u(1);ngOnInit(){this.route.queryParams.subscribe(i=>{this.selectedFilter.set(i.status||""),this.loadClinics()})}loadClinics(){this.loading.set(!0),this.error.set(null);let i=this.selectedFilter()||void 0;this.systemAdminService.getClinics(i,this.currentPage(),20).subscribe({next:t=>{this.paginatedClinics.set(t),this.loading.set(!1)},error:t=>{this.error.set(t.error?.message||"Erro ao carregar cl\xEDnicas"),this.loading.set(!1)}})}applyFilter(i){this.selectedFilter.set(i),this.currentPage.set(1),this.router.navigate([],{relativeTo:this.route,queryParams:i?{status:i}:{},queryParamsHandling:"merge"})}changePage(i){this.currentPage.set(i),this.loadClinics()}navigateToCreate(){this.router.navigate(["/clinics/create"])}viewDetails(i){this.router.navigate(["/clinics",i])}toggleStatus(i,t){confirm(`Tem certeza que deseja ${t?"desativar":"ativar"} esta cl\xEDnica?`)&&this.systemAdminService.toggleClinicStatus(i).subscribe({next:()=>{this.loadClinics()},error:a=>{alert(a.error?.message||"Erro ao alterar status da cl\xEDnica")}})}formatDate(i){return new Date(i).toLocaleDateString("pt-BR")}getStatusLabel(i){return{Active:"Ativo",Trial:"Trial",Expired:"Expirado",Suspended:"Suspenso",PaymentOverdue:"Pagamento Atrasado",Cancelled:"Cancelado"}[i]||i}getStatusClass(i){return{Active:"badge-active",Trial:"badge-trial",Expired:"badge-expired",Suspended:"badge-suspended",PaymentOverdue:"badge-expired",Cancelled:"badge-cancelled"}[i]||""}static \u0275fac=function(t){return new(t||c)(_(L),_(A),_(w))};static \u0275cmp=h({type:c,selectors:[["app-clinics-list"]],decls:20,vars:8,consts:[[1,"clinics-list"],[1,"header"],[1,"subtitle"],[1,"btn","btn-primary",3,"click"],[1,"filters"],[1,"filter-btn",3,"click"],[1,"loading"],[1,"error"],[1,"btn-retry",3,"click"],[1,"table-container"],[1,"clinics-table"],[1,"empty-state"],[1,"pagination"],[1,"clinic-info"],[1,"clinic-name"],[1,"clinic-date"],[1,"badge","badge-plan"],[1,"badge"],[1,"status-badge"],[1,"actions"],["title","Ver detalhes",1,"btn-icon",3,"click"],[1,"btn-icon",3,"click","title"],[1,"btn-page",3,"click","disabled"],[1,"page-info"]],template:function(t,a){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),o(4,"Gerenciar Cl\xEDnicas"),e(),n(5,"p",2),o(6,"Visualize e gerencie todas as cl\xEDnicas cadastradas"),e()(),n(7,"button",3),d("click",function(){return a.navigateToCreate()}),n(8,"span"),o(9,"\u2795 Nova Cl\xEDnica"),e()()(),n(10,"div",4)(11,"button",5),d("click",function(){return a.applyFilter("")}),o(12),e(),n(13,"button",5),d("click",function(){return a.applyFilter("active")}),o(14," Ativas "),e(),n(15,"button",5),d("click",function(){return a.applyFilter("inactive")}),o(16," Inativas "),e()(),f(17,F,2,0,"div",6)(18,z,5,1,"div",7)(19,j,25,2),e()),t&2){let l;r(11),x("active",a.selectedFilter()===""),r(),m(" Todas (",((l=a.paginatedClinics())==null?null:l.totalCount)||0,") "),r(),x("active",a.selectedFilter()==="active"),r(2),x("active",a.selectedFilter()==="inactive"),r(2),C(a.loading()?17:a.error()?18:19)}},dependencies:[y,D],styles:[".clinics-list[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px;flex-wrap:wrap;gap:16px}h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a202c;margin:0 0 8px}.subtitle[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin:0}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3;transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #e2e8f0;background:#fff;border-radius:8px;font-size:14px;font-weight:600;color:#2d3748;cursor:pointer;transition:all .2s}.filter-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea}.filter-btn.active[_ngcontent-%COMP%]{background:#667eea;border-color:#667eea;color:#fff}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#718096}.error[_ngcontent-%COMP%]{color:#c53030}.btn-retry[_ngcontent-%COMP%]{margin-top:16px;padding:12px 24px;background:#667eea;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow-x:auto}.clinics-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.clinics-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f7fafc}.clinics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;font-size:13px;font-weight:600;color:#2d3748;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid #e2e8f0}.clinics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e2e8f0;font-size:14px;color:#2d3748}.clinics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f7fafc}.clinic-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.clinic-name[_ngcontent-%COMP%]{font-weight:600;color:#1a202c}.clinic-date[_ngcontent-%COMP%]{font-size:12px;color:#718096}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:6px;font-size:12px;font-weight:600;display:inline-block}.badge-plan[_ngcontent-%COMP%]{background:#e6fffa;color:#047857}.badge.badge-active[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.badge-trial[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge.badge-expired[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.badge.badge-suspended[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3}.badge.badge-cancelled[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:6px;font-size:13px;font-weight:600}.status-badge.active[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.inactive[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:8px 12px;border:none;background:#f7fafc;border-radius:6px;cursor:pointer;font-size:16px;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-2px)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#fee2e2}.btn-icon.btn-success[_ngcontent-%COMP%]:hover{background:#d1fae5}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#718096}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px;margin-top:24px}.btn-page[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #e2e8f0;background:#fff;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn-page[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;color:#667eea}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:600}@media (max-width: 1024px){.clinics-list[_ngcontent-%COMP%]{padding:16px}h1[_ngcontent-%COMP%]{font-size:24px}.table-container[_ngcontent-%COMP%]{overflow-x:scroll}.clinics-table[_ngcontent-%COMP%]{min-width:800px}}"]})};export{T as ClinicsList};
