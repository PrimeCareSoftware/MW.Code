import{a as f}from"./chunk-QLMHMRZ7.js";import{$ as m,B as O,D as P,E as b,K as L,L as R,P as l,Q as p,R as S,U as $,W as U,Y as M,a as u,aa as K,b as v,ea as H,f as a,ia as B,j as r,ja as F,ka as s,ma as G,na as z,pa as Z,qa as x,r as C,ra as j,s as T,sa as V,t as k,ta as Y,u as E,ua as W,v as D,va as X,w as N}from"./chunk-W37OOKLC.js";var J=(n,c)=>{let t=C(f),e=t.getToken(),i=t.currentUser();if(e){let o=n.headers.set("Authorization",`Bearer ${e}`);i?.tenantId&&(o=o.set("X-Tenant-Id",i.tenantId));let g=n.clone({headers:o});return c(g)}return c(n)};var Q={token:"mock-jwt-token-system-admin-12345",username:"admin",tenantId:"system",expiresAt:new Date(Date.now()+1440*60*1e3).toISOString(),isSystemOwner:!0},q={username:"admin",tenantId:"system",isSystemOwner:!0};var d=[{id:"clinic1",name:"Cl\xEDnica Sa\xFAde Total",document:"12.345.678/0001-90",email:"contato@clinicasaudetotal.com.br",phone:"+55 11 3456-7890",address:"Rua das Cl\xEDnicas, 100 - S\xE3o Paulo, SP",isActive:!0,tenantId:"clinic1",createdAt:"2024-01-15T10:00:00Z",subscriptionStatus:"Active",planName:"Plano Professional",nextBillingDate:"2024-12-15"},{id:"clinic2",name:"Cl\xEDnica Bem Estar",document:"98.765.432/0001-10",email:"contato@clinicabemestar.com.br",phone:"+55 11 2345-6789",address:"Av. Paulista, 2000 - S\xE3o Paulo, SP",isActive:!0,tenantId:"clinic2",createdAt:"2024-02-20T14:00:00Z",subscriptionStatus:"Trial",planName:"Plano Basic",nextBillingDate:"2024-11-20"},{id:"clinic3",name:"Cl\xEDnica Vida Plena",document:"11.222.333/0001-44",email:"contato@clinicavidaplena.com.br",phone:"+55 11 4567-8901",address:"Rua Augusta, 500 - S\xE3o Paulo, SP",isActive:!1,tenantId:"clinic3",createdAt:"2024-03-10T09:00:00Z",subscriptionStatus:"Suspended",planName:"Plano Basic"}],tt=v(u({},d[0]),{planPrice:299,trialEndsAt:void 0,totalUsers:8,activeUsers:7}),et={totalCount:3,page:1,pageSize:20,totalPages:1,clinics:d},nt={totalClinics:3,activeClinics:2,inactiveClinics:1,totalUsers:24,activeUsers:20,totalPatients:150,monthlyRecurringRevenue:1098,subscriptionsByStatus:{Active:1,Trial:1,Suspended:1},subscriptionsByPlan:{"Plano Basic":2,"Plano Professional":1}},y=[{id:"1",username:"admin",email:"admin@medicwarehouse.com",fullName:"Administrador Sistema",phone:"+55 11 99999-9999",isActive:!0,createdAt:"2024-01-01T00:00:00Z",lastLoginAt:"2024-11-08T08:00:00Z"},{id:"2",username:"support",email:"support@medicwarehouse.com",fullName:"Suporte T\xE9cnico",phone:"+55 11 88888-8888",isActive:!0,createdAt:"2024-01-15T00:00:00Z",lastLoginAt:"2024-11-07T16:30:00Z"}];var it=(n,c)=>{if(!X.useMockData)return c(n);let t=Math.floor(Math.random()*300)+200,e=n.url,i=n.method;if(e.includes("/auth/login")&&i==="POST")return a(new s({status:200,body:Q})).pipe(r(t));if(e.includes("/auth/me")&&i==="GET")return a(new s({status:200,body:q})).pipe(r(t));if(e.includes("/system-admin/clinics")&&i==="GET"&&!e.match(/\/system-admin\/clinics\/[^/]+$/))return a(new s({status:200,body:et})).pipe(r(t));if(e.match(/\/system-admin\/clinics\/[^/]+$/)&&i==="GET"){let o=e.split("/").pop(),g=o==="clinic1"?tt:u({},d.find(h=>h.id===o));return a(new s({status:200,body:g})).pipe(r(t))}if(e.match(/\/system-admin\/clinics$/)&&i==="POST"){let o=v(u({},n.body),{id:`clinic${d.length+1}`,tenantId:`clinic${d.length+1}`,createdAt:new Date().toISOString()});return a(new s({status:201,body:{message:"Cl\xEDnica criada com sucesso",clinicId:o.id}})).pipe(r(t))}if(e.match(/\/system-admin\/clinics\/[^/]+\/toggle-status$/)&&i==="POST"){let o=e.split("/")[e.split("/").length-2],h=!d.find(_=>_.id===o)?.isActive;return a(new s({status:200,body:{message:"Status alterado com sucesso",isActive:h}})).pipe(r(t))}if(e.match(/\/system-admin\/clinics\/[^/]+\/subscription$/)&&i==="PUT")return a(new s({status:200,body:{message:"Assinatura atualizada com sucesso"}})).pipe(r(t));if(e.includes("/system-admin/analytics")&&i==="GET")return a(new s({status:200,body:nt})).pipe(r(t));if(e.match(/\/system-admin\/clinics\/[^/]+\/subscription\/manual-override\/enable$/)&&i==="POST")return a(new s({status:200,body:{message:"Override manual habilitado"}})).pipe(r(t));if(e.match(/\/system-admin\/clinics\/[^/]+\/subscription\/manual-override\/disable$/)&&i==="POST")return a(new s({status:200,body:{message:"Override manual desabilitado"}})).pipe(r(t));if(e.includes("/system-admin/system-owners")&&i==="GET"&&!e.match(/\/system-admin\/system-owners\/[^/]+$/))return a(new s({status:200,body:y})).pipe(r(t));if(e.match(/\/system-admin\/system-owners$/)&&i==="POST"){let o=v(u({},n.body),{id:`${y.length+1}`,isActive:!0,createdAt:new Date().toISOString()});return a(new s({status:201,body:{message:"System Owner criado com sucesso",ownerId:o.id}})).pipe(r(t))}if(e.match(/\/system-admin\/system-owners\/[^/]+\/toggle-status$/)&&i==="POST"){let o=e.split("/")[e.split("/").length-2],h=!y.find(_=>_.id===o)?.isActive;return a(new s({status:200,body:{message:"Status alterado com sucesso",isActive:h}})).pipe(r(t))}return console.warn(`Mock data interceptor: No mock handler for ${i} ${e}`),c(n)};var I=(n,c)=>{let t=C(f),e=C(x);return t.isAuthenticated()?!0:(e.navigate(["/login"],{queryParams:{returnUrl:c.url}}),!1)};var ot=[{path:"login",loadComponent:()=>import("./chunk-I47TO7KS.js").then(n=>n.Login)},{path:"dashboard",loadComponent:()=>import("./chunk-V4UM2BB6.js").then(n=>n.Dashboard),canActivate:[I]},{path:"clinics",loadComponent:()=>import("./chunk-RE2W574S.js").then(n=>n.ClinicsList),canActivate:[I]},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"**",redirectTo:"/dashboard"}];var at={providers:[N(),H({eventCoalescing:!0}),Y(ot),G(z([it,J]))]};function ct(n,c){if(n&1){let t=$();l(0,"div",8)(1,"a",9),m(2," \u{1F4CA} Dashboard "),p(),l(3,"a",10),m(4," \u{1F3E5} Cl\xEDnicas "),p()(),l(5,"div",11)(6,"div",12)(7,"span",13),m(8),p(),l(9,"span",14),m(10,"System Owner"),p()(),l(11,"button",15),U("click",function(){T(t);let i=M();return k(i.logout())}),m(12," \u{1F6AA} Sair "),p()()}if(n&2){let t,e=M();O(8),K((t=e.authService.currentUser())==null?null:t.username)}}var A=class n{constructor(c,t){this.authService=c;this.router=t}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)(P(f),P(x))};static \u0275cmp=b({type:n,selectors:[["app-navbar"]],decls:10,vars:1,consts:[[1,"navbar"],[1,"navbar-container"],[1,"navbar-brand"],["routerLink","/dashboard",1,"brand-link"],["width","32","height","32","viewBox","0 0 48 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","48","height","48","rx","8","fill","#667eea"],["d","M24 14L18 20H22V34H26V20H30L24 14Z","fill","white"],[1,"brand-text"],[1,"navbar-menu"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],["routerLink","/clinics","routerLinkActive","active",1,"nav-link"],[1,"navbar-end"],[1,"user-info"],[1,"user-name"],[1,"user-role"],[1,"btn-logout",3,"click"]],template:function(t,e){t&1&&(l(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),E(),l(4,"svg",4),S(5,"rect",5)(6,"path",6),p(),D(),l(7,"span",7),m(8,"MW System Admin"),p()()(),L(9,ct,13,1),p()()),t&2&&(O(9),R(e.authService.isAuthenticated()?9:-1))},dependencies:[B,W,j,V],styles:[".navbar[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 8px #0000001a;position:sticky;top:0;z-index:100}.navbar-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 24px;display:flex;justify-content:space-between;align-items:center;height:64px}.navbar-brand[_ngcontent-%COMP%]{display:flex;align-items:center}.brand-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;text-decoration:none;color:inherit}.brand-text[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1a202c}.navbar-menu[_ngcontent-%COMP%]{display:flex;gap:8px}.nav-link[_ngcontent-%COMP%]{padding:10px 16px;border-radius:8px;font-size:14px;font-weight:600;color:#2d3748;text-decoration:none;transition:all .2s}.nav-link[_ngcontent-%COMP%]:hover{background:#f7fafc;color:#667eea}.nav-link.active[_ngcontent-%COMP%]{background:#667eea;color:#fff}.navbar-end[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:2px}.user-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1a202c}.user-role[_ngcontent-%COMP%]{font-size:12px;color:#718096}.btn-logout[_ngcontent-%COMP%]{padding:10px 16px;background:#fee2e2;color:#991b1b;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn-logout[_ngcontent-%COMP%]:hover{background:#fecaca;transform:translateY(-2px)}@media (max-width: 768px){.navbar-container[_ngcontent-%COMP%]{padding:0 16px}.brand-text[_ngcontent-%COMP%]{display:none}.navbar-menu[_ngcontent-%COMP%]{gap:4px}.nav-link[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.user-info[_ngcontent-%COMP%]{display:none}}"]})};var w=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){t&1&&S(0,"app-navbar")(1,"router-outlet")},dependencies:[Z,A],encapsulation:2})};F(w,at).catch(n=>console.error(n));
