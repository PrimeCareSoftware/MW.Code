<app-navbar></app-navbar>
<div class="payable-form-container">
  <div class="page-header">
    <div class="header-content">
      <a routerLink="/financial/payables" class="back-link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/>
        </svg>
        Voltar
      </a>
      <h1>Nova Conta a Pagar</h1>
    </div>
  </div>
  @if (errorMessage()) {
    <div class="alert alert-error">{{ errorMessage() }}</div>
  }
  @if (successMessage()) {
    <div class="alert alert-success">{{ successMessage() }}</div>
  }
  <div class="form-card">
    <form [formGroup]="payableForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group">
          <label for="documentNumber">Número do Documento*</label>
          <input type="text" id="documentNumber" formControlName="documentNumber" placeholder="Ex: PAY-001"/>
        </div>
        <div class="form-group">
          <label for="category">Categoria*</label>
          <select id="category" formControlName="category">
            @for (cat of categories; track cat.value) {
              <option [value]="cat.value">{{ cat.label }}</option>
            }
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="dueDate">Vencimento*</label>
          <input type="date" id="dueDate" formControlName="dueDate"/>
        </div>
        <div class="form-group">
          <label for="totalAmount">Valor*</label>
          <input type="number" id="totalAmount" formControlName="totalAmount" step="0.01" min="0"/>
        </div>
      </div>
      <div class="form-group">
        <label for="description">Descrição*</label>
        <textarea id="description" formControlName="description" rows="3"></textarea>
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" routerLink="/financial/payables">Cancelar</button>
        <button type="submit" class="btn btn-primary" [disabled]="!payableForm.valid || isLoading()">
          {{ isLoading() ? 'Cadastrando...' : 'Cadastrar' }}
        </button>
      </div>
    </form>
  </div>
</div>
