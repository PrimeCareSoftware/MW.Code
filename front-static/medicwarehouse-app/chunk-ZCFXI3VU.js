import{a as pe,b as ge,c as ue,d as _e,e as xe,f as Ce}from"./chunk-E5ML477A.js";import{a as W,b as A,c as Y,d as Z,f as ee,g as te,h as ne,j as ie,k as oe,l as re,m as ae,o as ce,q as de}from"./chunk-HJDNBRIJ.js";import{a as le}from"./chunk-Z4ZWIJEB.js";import{a as me}from"./chunk-UYMFQJ5P.js";import{a as se}from"./chunk-YHTCB7RM.js";import{$ as r,Aa as X,B as a,Ca as K,D as M,Da as Q,E as V,Ga as S,N as g,O as u,P as N,Q as h,R as v,S as x,T as o,U as n,V as C,W as R,X as b,Y as s,_ as L,aa as m,ba as _,ca as j,ga as H,h as U,ka as k,la as q,m as O,p as E,r as f,s as P,sa as B,t as D,ta as G,u as z,va as J,x as p,xa as y}from"./chunk-5XZGLIZJ.js";var w=class i{constructor(t){this.http=t}apiUrl=`${S.apiUrl}/medical-records`;create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}complete(t,e){return this.http.post(`${this.apiUrl}/${t}/complete`,e)}getByAppointment(t){return this.http.get(`${this.apiUrl}/appointment/${t}`)}getPatientRecords(t){return this.http.get(`${this.apiUrl}/patient/${t}`)}static \u0275fac=function(e){return new(e||i)(E(y))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var T=class i{constructor(t){this.http=t}apiUrl=`${S.apiUrl}/procedures`;getAll(t=!0){let e=new J().set("activeOnly",t.toString());return this.http.get(this.apiUrl,{params:e})}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}addProcedureToAppointment(t,e){return this.http.post(`${this.apiUrl}/appointments/${t}/procedures`,e)}getAppointmentProcedures(t){return this.http.get(`${this.apiUrl}/appointments/${t}/procedures`)}getAppointmentBillingSummary(t){return this.http.get(`${this.apiUrl}/appointments/${t}/billing-summary`)}static \u0275fac=function(e){return new(e||i)(E(y))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var I=class i{constructor(t){this.http=t}apiUrl=`${S.apiUrl}/exam-requests`;create(t){return this.http.post(this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}complete(t,e){return this.http.post(`${this.apiUrl}/${t}/complete`,e)}cancel(t){return this.http.post(`${this.apiUrl}/${t}/cancel`,{})}getById(t){return this.http.get(`${this.apiUrl}/${t}`)}getByAppointment(t){return this.http.get(`${this.apiUrl}/appointment/${t}`)}getByPatient(t){return this.http.get(`${this.apiUrl}/patient/${t}`)}getPending(){return this.http.get(`${this.apiUrl}/pending`)}getUrgent(){return this.http.get(`${this.apiUrl}/urgent`)}static \u0275fac=function(e){return new(e||i)(E(y))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var F=(i,t)=>t.id;function ve(i,t){if(i&1&&(o(0,"div",3),r(1),n()),i&2){let e=s();a(),m(e.errorMessage())}}function Oe(i,t){if(i&1&&(o(0,"div",4),r(1),n()),i&2){let e=s();a(),m(e.successMessage())}}function Ee(i,t){i&1&&(o(0,"div",5),r(1,"Carregando..."),n())}function ye(i,t){if(i&1&&(o(0,"div",44)(1,"span",42),r(2,"Alergias:"),n(),o(3,"span",43),r(4),n()()),i&2){let e=s(3);a(4),m(e.patient().allergies)}}function Se(i,t){if(i&1&&(o(0,"div",11)(1,"div",41)(2,"span",42),r(3,"Nome:"),n(),o(4,"span",43),r(5),n()(),o(6,"div",41)(7,"span",42),r(8,"Idade:"),n(),o(9,"span",43),r(10),n()(),o(11,"div",41)(12,"span",42),r(13,"CPF:"),n(),o(14,"span",43),r(15),n()(),o(16,"div",41)(17,"span",42),r(18,"Telefone:"),n(),o(19,"span",43),r(20),n()(),g(21,ye,5,1,"div",44),n()),i&2){let e=s(2);a(5),m(e.patient().name),a(5),_("",e.patient().age," anos"),a(5),m(e.patient().document),a(5),m(e.patient().phone),a(),u(e.patient().allergies?21:-1)}}function Ae(i,t){i&1&&(o(0,"p",12),r(1,"Carregando informa\xE7\xF5es do paciente..."),n())}function Re(i,t){i&1&&r(0," Consulta finalizada ")}function we(i,t){i&1&&r(0," Consulta em andamento ")}function Te(i,t){if(i&1&&(o(0,"div",45)(1,"div",46),r(2),k(3,"date"),n(),o(4,"div",47)(5,"p")(6,"strong"),r(7,"Diagn\xF3stico:"),n(),r(8),n(),o(9,"p")(10,"strong"),r(11,"Dura\xE7\xE3o:"),n(),r(12),n()()()),i&2){let e=t.$implicit;a(2),_(" ",q(3,3,e.consultationStartTime,"dd/MM/yyyy")," "),a(6),_(" ",e.diagnosis||"N/A"),a(4),_(" ",e.consultationDurationMinutes," min")}}function Ie(i,t){if(i&1&&(o(0,"div",17),h(1,Te,13,6,"div",45,F),n()),i&2){let e=s(2);a(),v(e.patientHistory())}}function Fe(i,t){i&1&&(o(0,"p",12),r(1,"Nenhum hist\xF3rico de consultas"),n())}function Ne(i,t){if(i&1&&(o(0,"option",51),r(1),n()),i&2){let e=t.$implicit;x("value",e.id),a(),j("",e.name," - R$ ",e.price)}}function ke(i,t){if(i&1){let e=R();o(0,"form",35)(1,"div",21)(2,"label",48),r(3,"Procedimento"),n(),o(4,"select",49)(5,"option",50),r(6,"Selecione um procedimento"),n(),h(7,Ne,2,3,"option",51,F),n()(),o(9,"div",52)(10,"div",21)(11,"label",53),r(12,"Pre\xE7o Personalizado (opcional)"),n(),C(13,"input",54),n(),o(14,"div",21)(15,"label",55),r(16,"Observa\xE7\xF5es"),n(),C(17,"input",56),n()(),o(18,"button",40),b("click",function(){f(e);let d=s(2);return P(d.onAddProcedure())}),r(19," Adicionar "),n()()}if(i&2){let e=s(2);x("formGroup",e.procedureForm),a(7),v(e.availableProcedures()),a(11),x("disabled",!e.procedureForm.valid)}}function qe(i,t){if(i&1&&(o(0,"div",62),r(1),n()),i&2){let e=s().$implicit;a(),m(e.notes)}}function $e(i,t){if(i&1&&(o(0,"div",57)(1,"div",59)(2,"strong"),r(3),n(),o(4,"span",60),r(5),n()(),o(6,"div",61),r(7),n(),g(8,qe,2,1,"div",62),n()),i&2){let e=t.$implicit;a(3),m(e.procedureName),a(2),m(e.procedureCode),a(2),_("R$ ",e.priceCharged),a(),u(e.notes?8:-1)}}function Ue(i,t){if(i&1&&(o(0,"div",36),h(1,$e,9,4,"div",57,F),o(3,"div",58)(4,"strong"),r(5,"Total:"),n(),o(6,"span"),r(7),n()()()),i&2){let e=s(2);a(),v(e.appointmentProcedures()),a(6),_("R$ ",e.getTotalProceduresCost())}}function De(i,t){i&1&&(o(0,"p",12),r(1,"Nenhum procedimento adicionado"),n())}function ze(i,t){if(i&1&&(o(0,"option",51),r(1),n()),i&2){let e=t.$implicit,c=s(3);x("value",e),a(),m(c.examTypeLabels[e])}}function Ve(i,t){if(i&1&&(o(0,"option",51),r(1),n()),i&2){let e=t.$implicit,c=s(3);x("value",e),a(),m(c.examUrgencyLabels[e])}}function Le(i,t){if(i&1){let e=R();o(0,"form",35)(1,"div",52)(2,"div",21)(3,"label",63),r(4,"Tipo de Exame"),n(),o(5,"select",64),h(6,ze,2,2,"option",51,N),n()(),o(8,"div",21)(9,"label",65),r(10,"Urg\xEAncia"),n(),o(11,"select",66),h(12,Ve,2,2,"option",51,N),n()()(),o(14,"div",21)(15,"label",67),r(16,"Nome do Exame"),n(),C(17,"input",68),n(),o(18,"div",21)(19,"label",69),r(20,"Descri\xE7\xE3o / Justificativa"),n(),C(21,"textarea",70),n(),o(22,"div",21)(23,"label",71),r(24,"Observa\xE7\xF5es Adicionais"),n(),C(25,"input",72),n(),o(26,"button",40),b("click",function(){f(e);let d=s(2);return P(d.onAddExamRequest())}),r(27," Adicionar Pedido "),n()()}if(i&2){let e=s(2);x("formGroup",e.examForm),a(6),v(e.examTypes),a(6),v(e.examUrgencies),a(14),x("disabled",!e.examForm.valid)}}function je(i,t){if(i&1&&(o(0,"div",78)(1,"em"),r(2),n()()),i&2){let e=s().$implicit;a(2),_("Obs: ",e.notes)}}function He(i,t){if(i&1){let e=R();o(0,"div",73)(1,"div",74)(2,"strong"),r(3),n(),o(4,"span",75),r(5),n(),o(6,"span"),r(7),n(),o(8,"button",76),b("click",function(){let d=f(e).$implicit,l=s(3);return P(l.removeExamRequest(d))}),r(9," \u2715 "),n()(),o(10,"div",77),r(11),n(),g(12,je,3,1,"div",78),n()}if(i&2){let e=t.$implicit,c=s(3);a(3),m(e.examName),a(2),m(c.examTypeLabels[e.examType]),a(),L(H("exam-urgency-badge urgency-",e.urgency)),a(),m(c.examUrgencyLabels[e.urgency]),a(4),m(e.description),a(),u(e.notes?12:-1)}}function Be(i,t){if(i&1&&(o(0,"div",37),h(1,He,13,8,"div",73,F),n()),i&2){let e=s(2);a(),v(e.examRequests())}}function Ge(i,t){i&1&&(o(0,"p",12),r(1,"Nenhum pedido de exame adicionado"),n())}function Je(i,t){if(i&1){let e=R();o(0,"div",6)(1,"div",9)(2,"div",10)(3,"h3"),r(4,"Informa\xE7\xF5es do Paciente"),n(),g(5,Se,22,5,"div",11)(6,Ae,2,0,"p",12),n(),o(7,"div",13)(8,"h3"),r(9,"Tempo de Consulta"),n(),o(10,"div",14),r(11),n(),o(12,"p",15),g(13,Re,1,0)(14,we,1,0),n()(),o(15,"div",16)(16,"h3"),r(17,"Hist\xF3rico de Consultas"),n(),g(18,Ie,3,0,"div",17)(19,Fe,2,0,"p",12),n()(),o(20,"div",18)(21,"form",19)(22,"div",20)(23,"h3"),r(24,"Prontu\xE1rio M\xE9dico"),n(),o(25,"div",21)(26,"label",22),r(27,"Diagn\xF3stico"),n(),C(28,"textarea",23),n(),o(29,"div",21)(30,"label",24),r(31,"Prescri\xE7\xE3o M\xE9dica"),n(),C(32,"textarea",25),o(33,"button",26),b("click",function(){f(e);let d=s();return P(d.onPrint())}),D(),o(34,"svg",27),C(35,"polyline",28)(36,"path",29)(37,"rect",30),n(),r(38," Imprimir Receita "),n()(),z(),o(39,"div",21)(40,"label",31),r(41,"Observa\xE7\xF5es"),n(),C(42,"textarea",32),n()(),o(43,"div",20)(44,"div",33)(45,"h3"),r(46,"Procedimentos Realizados"),n(),o(47,"button",34),b("click",function(){f(e);let d=s();return P(d.toggleAddProcedure())}),r(48),n()(),g(49,ke,20,2,"form",35),g(50,Ue,8,1,"div",36)(51,De,2,0,"p",12),n(),o(52,"div",20)(53,"div",33)(54,"h3"),r(55,"Pedidos de Exames"),n(),o(56,"button",34),b("click",function(){f(e);let d=s();return P(d.toggleAddExam())}),r(57),n()(),g(58,Le,28,2,"form",35),g(59,Be,3,0,"div",37)(60,Ge,2,0,"p",12),n(),o(61,"div",38)(62,"button",39),b("click",function(){f(e);let d=s();return P(d.onSave())}),r(63," Salvar Prontu\xE1rio "),n(),o(64,"button",40),b("click",function(){f(e);let d=s();return P(d.onComplete())}),r(65),n()()()()()}if(i&2){let e,c,d,l=s();a(5),u(l.patient()?5:6),a(6),_(" ",l.formatTime(l.elapsedSeconds())," "),a(2),u((e=l.medicalRecord())!=null&&e.consultationEndTime?13:14),a(5),u(l.patientHistory().length>0?18:19),a(3),x("formGroup",l.attendanceForm),a(27),_(" ",l.showAddProcedure()?"Cancelar":"+ Adicionar Procedimento"," "),a(),u(l.showAddProcedure()?49:-1),a(),u(l.appointmentProcedures().length>0?50:51),a(7),_(" ",l.showAddExam()?"Cancelar":"+ Solicitar Exame"," "),a(),u(l.showAddExam()?58:-1),a(),u(l.examRequests().length>0?59:60),a(3),x("disabled",l.isLoading()),a(2),x("disabled",l.isLoading()||((c=l.medicalRecord())==null?null:c.consultationEndTime)),a(),_(" ",(d=l.medicalRecord())!=null&&d.consultationEndTime?"Consulta Finalizada":"Finalizar Atendimento"," ")}}function Xe(i,t){if(i&1&&(o(0,"div",8)(1,"h2"),r(2,"Prescri\xE7\xE3o M\xE9dica"),n(),o(3,"div",79)(4,"p")(5,"strong"),r(6,"Paciente:"),n(),r(7),n(),o(8,"p")(9,"strong"),r(10,"Data:"),n(),r(11),k(12,"date"),n()(),o(13,"div",80),r(14),n()()),i&2){let e,c=s();a(7),_(" ",c.patient().name),a(4),_(" ",q(12,3,c.medicalRecord().consultationStartTime,"dd/MM/yyyy HH:mm")),a(3),_(" ",(e=c.attendanceForm.get("prescription"))==null?null:e.value," ")}}var Pe=class i{constructor(t,e,c,d,l,Ke,Qe,We){this.fb=t;this.route=e;this.router=c;this.appointmentService=d;this.medicalRecordService=l;this.patientService=Ke;this.procedureService=Qe;this.examRequestService=We;this.attendanceForm=this.fb.group({diagnosis:[""],prescription:[""],notes:[""]}),this.procedureForm=this.fb.group({procedureId:["",A.required],customPrice:[""],notes:[""]}),this.examForm=this.fb.group({examType:[0,A.required],examName:["",A.required],description:["",A.required],urgency:[0,A.required],notes:[""]})}appointmentId=p(null);appointment=p(null);patient=p(null);medicalRecord=p(null);patientHistory=p([]);isLoading=p(!1);errorMessage=p("");successMessage=p("");attendanceForm;elapsedSeconds=p(0);timerSubscription;startTime;availableProcedures=p([]);appointmentProcedures=p([]);showAddProcedure=p(!1);procedureForm;examRequests=p([]);showAddExam=p(!1);examForm;procedureCategories=Object.values(pe).filter(t=>typeof t=="number");procedureCategoryLabels=ge;examTypes=Object.values(ue).filter(t=>typeof t=="number");examTypeLabels=xe;examUrgencies=Object.values(_e).filter(t=>typeof t=="number");examUrgencyLabels=Ce;ngOnInit(){let t=this.route.snapshot.paramMap.get("appointmentId");t&&(this.appointmentId.set(t),this.loadAppointment(t),this.loadAvailableProcedures(),this.loadAppointmentProcedures(t),this.loadExamRequests(t))}ngOnDestroy(){this.stopTimer()}loadAppointment(t){this.isLoading.set(!0),this.appointmentService.getById(t).subscribe({next:e=>{this.appointment.set(e),this.loadPatient(e.patientId),this.loadOrCreateMedicalRecord(e.id,e.patientId),this.isLoading.set(!1)},error:e=>{console.error("Error loading appointment:",e),this.errorMessage.set("Erro ao carregar agendamento"),this.isLoading.set(!1)}})}loadPatient(t){this.patientService.getById(t).subscribe({next:e=>{this.patient.set(e),this.loadPatientHistory(t)},error:e=>{console.error("Error loading patient:",e),this.errorMessage.set("Erro ao carregar dados do paciente")}})}loadPatientHistory(t){this.medicalRecordService.getPatientRecords(t).subscribe({next:e=>{this.patientHistory.set(e)},error:e=>{console.error("Error loading patient history:",e)}})}loadOrCreateMedicalRecord(t,e){this.medicalRecordService.getByAppointment(t).subscribe({next:c=>{this.medicalRecord.set(c),this.attendanceForm.patchValue({diagnosis:c.diagnosis,prescription:c.prescription,notes:c.notes}),c.consultationStartTime&&!c.consultationEndTime&&(this.startTime=new Date(c.consultationStartTime),this.startTimer())},error:c=>{c.status===404?this.createMedicalRecord(t,e):(console.error("Error loading medical record:",c),this.errorMessage.set("Erro ao carregar prontu\xE1rio"))}})}createMedicalRecord(t,e){let c=new Date().toISOString();this.medicalRecordService.create({appointmentId:t,patientId:e,consultationStartTime:c}).subscribe({next:d=>{this.medicalRecord.set(d),this.startTime=new Date(c),this.startTimer()},error:d=>{console.error("Error creating medical record:",d),this.errorMessage.set("Erro ao iniciar atendimento")}})}startTimer(){this.timerSubscription||(this.timerSubscription=U(1e3).subscribe(()=>{if(this.startTime){let e=Math.floor((new Date().getTime()-this.startTime.getTime())/1e3);this.elapsedSeconds.set(e)}}))}stopTimer(){this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=void 0)}formatTime(t){let e=Math.floor(t/3600),c=Math.floor(t%3600/60),d=t%60;return`${e.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}onSave(){if(!this.medicalRecord())return;this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let t=this.attendanceForm.value;this.medicalRecordService.update(this.medicalRecord().id,{diagnosis:t.diagnosis,prescription:t.prescription,notes:t.notes,consultationDurationMinutes:Math.floor(this.elapsedSeconds()/60)}).subscribe({next:e=>{this.medicalRecord.set(e),this.successMessage.set("Prontu\xE1rio salvo com sucesso!"),this.isLoading.set(!1)},error:e=>{console.error("Error saving medical record:",e),this.errorMessage.set("Erro ao salvar prontu\xE1rio"),this.isLoading.set(!1)}})}onComplete(){if(!this.medicalRecord())return;this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let t=this.attendanceForm.value;this.medicalRecordService.complete(this.medicalRecord().id,{diagnosis:t.diagnosis,prescription:t.prescription,notes:t.notes}).subscribe({next:()=>{this.stopTimer(),this.successMessage.set("Atendimento finalizado com sucesso!"),this.isLoading.set(!1),setTimeout(()=>{this.router.navigate(["/appointments"])},2e3)},error:e=>{console.error("Error completing consultation:",e),this.errorMessage.set("Erro ao finalizar atendimento"),this.isLoading.set(!1)}})}onPrint(){window.print()}loadAvailableProcedures(){this.procedureService.getAll(!0).subscribe({next:t=>{this.availableProcedures.set(t)},error:t=>{console.error("Error loading procedures:",t)}})}loadAppointmentProcedures(t){this.procedureService.getAppointmentProcedures(t).subscribe({next:e=>{this.appointmentProcedures.set(e)},error:e=>{console.error("Error loading appointment procedures:",e)}})}toggleAddProcedure(){this.showAddProcedure.set(!this.showAddProcedure()),this.showAddProcedure()||this.procedureForm.reset()}onAddProcedure(){if(!this.procedureForm.valid||!this.appointmentId())return;let t=this.procedureForm.value;this.procedureService.addProcedureToAppointment(this.appointmentId(),{procedureId:t.procedureId,customPrice:t.customPrice||void 0,notes:t.notes||void 0}).subscribe({next:e=>{this.appointmentProcedures.update(c=>[...c,e]),this.successMessage.set("Procedimento adicionado com sucesso!"),this.procedureForm.reset(),this.showAddProcedure.set(!1),setTimeout(()=>this.successMessage.set(""),3e3)},error:e=>{console.error("Error adding procedure:",e),this.errorMessage.set("Erro ao adicionar procedimento"),setTimeout(()=>this.errorMessage.set(""),3e3)}})}getProcedureName(t){let e=this.availableProcedures().find(c=>c.id===t);return e?e.name:""}getProcedurePrice(t){let e=this.availableProcedures().find(c=>c.id===t);return e?e.price:0}toggleAddExam(){this.showAddExam.set(!this.showAddExam()),this.showAddExam()||this.examForm.reset({examType:0,urgency:0})}loadExamRequests(t){this.examRequestService.getByAppointment(t).subscribe({next:e=>{this.examRequests.set(e)},error:e=>{console.error("Error loading exam requests:",e)}})}onAddExamRequest(){if(!this.examForm.valid||!this.appointmentId()||!this.patient())return;let t=this.examForm.value;this.examRequestService.create({appointmentId:this.appointmentId(),patientId:this.patient().id,examType:t.examType,examName:t.examName,description:t.description,urgency:t.urgency,notes:t.notes||void 0}).subscribe({next:e=>{this.examRequests.update(c=>[...c,e]),this.successMessage.set("Pedido de exame adicionado com sucesso!"),this.examForm.reset({examType:0,urgency:0}),this.showAddExam.set(!1),setTimeout(()=>this.successMessage.set(""),3e3)},error:e=>{console.error("Error adding exam request:",e),this.errorMessage.set("Erro ao adicionar pedido de exame"),setTimeout(()=>this.errorMessage.set(""),3e3)}})}removeExamRequest(t){confirm("Tem certeza que deseja remover este pedido de exame?")&&this.examRequestService.cancel(t.id).subscribe({next:()=>{this.examRequests.update(e=>e.filter(c=>c.id!==t.id)),this.successMessage.set("Pedido de exame removido com sucesso!"),setTimeout(()=>this.successMessage.set(""),3e3)},error:e=>{console.error("Error removing exam request:",e),this.errorMessage.set("Erro ao remover pedido de exame"),setTimeout(()=>this.errorMessage.set(""),3e3)}})}getTotalProceduresCost(){return this.appointmentProcedures().reduce((t,e)=>t+e.priceCharged,0)}static \u0275fac=function(e){return new(e||i)(M(ce),M(X),M(K),M(me),M(w),M(le),M(T),M(I))};static \u0275cmp=V({type:i,selectors:[["app-attendance"]],decls:16,vars:4,consts:[[1,"attendance-container"],[1,"page-header"],["routerLink","/appointments",1,"btn","btn-secondary"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"loading"],[1,"attendance-layout"],[1,"print-only"],[1,"prescription-print"],[1,"left-panel"],[1,"card","patient-info"],[1,"patient-details"],[1,"text-muted"],[1,"card","timer-card"],[1,"timer-display"],[1,"timer-info"],[1,"card","patient-history"],[1,"history-list"],[1,"right-panel"],[1,"medical-record-form",3,"formGroup"],[1,"card"],[1,"form-group"],["for","diagnosis"],["id","diagnosis","formControlName","diagnosis","rows","4","placeholder","Descreva o diagn\xF3stico do paciente...",1,"form-control"],["for","prescription"],["id","prescription","formControlName","prescription","rows","8","placeholder","Receite medicamentos, dosagens, e instru\xE7\xF5es de uso...",1,"form-control","prescription-area"],["type","button",1,"btn","btn-outline","btn-print",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","6 9 6 2 18 2 18 9"],["d","M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"],["x","6","y","14","width","12","height","8"],["for","notes"],["id","notes","formControlName","notes","rows","4","placeholder","Anota\xE7\xF5es adicionais sobre a consulta...",1,"form-control"],[1,"card-header-flex"],["type","button",1,"btn","btn-outline",3,"click"],[1,"add-form",3,"formGroup"],[1,"procedures-list"],[1,"exams-list"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"detail-row","highlight"],[1,"history-item"],[1,"history-date"],[1,"history-info"],["for","procedure"],["id","procedure","formControlName","procedureId",1,"form-control"],["value",""],[3,"value"],[1,"form-row"],["for","customPrice"],["type","number","id","customPrice","formControlName","customPrice","placeholder","Deixe vazio para usar pre\xE7o padr\xE3o","step","0.01",1,"form-control"],["for","procedureNotes"],["type","text","id","procedureNotes","formControlName","notes","placeholder","Observa\xE7\xF5es sobre o procedimento",1,"form-control"],[1,"procedure-item"],[1,"procedures-total"],[1,"procedure-info"],[1,"procedure-code"],[1,"procedure-price"],[1,"procedure-notes"],["for","examType"],["id","examType","formControlName","examType",1,"form-control"],["for","urgency"],["id","urgency","formControlName","urgency",1,"form-control"],["for","examName"],["type","text","id","examName","formControlName","examName","placeholder","Ex: Hemograma Completo, Raio-X de T\xF3rax",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","2","placeholder","Motivo da solicita\xE7\xE3o do exame...",1,"form-control"],["for","examNotes"],["type","text","id","examNotes","formControlName","notes","placeholder","Instru\xE7\xF5es especiais, preparo, etc.",1,"form-control"],[1,"exam-item"],[1,"exam-header"],[1,"exam-type-badge"],["type","button","title","Remover",1,"btn-remove",3,"click"],[1,"exam-description"],[1,"exam-notes"],[1,"prescription-header"],[1,"prescription-content"]],template:function(e,c){e&1&&(C(0,"app-navbar"),o(1,"div",0)(2,"div",1)(3,"div")(4,"h1"),r(5,"Atendimento ao Paciente"),n(),o(6,"p"),r(7,"Registro de consulta e prontu\xE1rio m\xE9dico"),n()(),o(8,"button",2),r(9,"Voltar para Agenda"),n()(),g(10,ve,2,1,"div",3),g(11,Oe,2,1,"div",4),g(12,Ee,2,0,"div",5)(13,Je,66,14,"div",6),n(),o(14,"div",7),g(15,Xe,15,6,"div",8),n()),e&2&&(a(10),u(c.errorMessage()?10:-1),a(),u(c.successMessage()?11:-1),a(),u(c.isLoading()?12:13),a(3),u(c.patient()&&c.medicalRecord()?15:-1))},dependencies:[G,de,ee,re,ae,W,te,oe,Y,Z,ne,ie,Q,se,B],styles:[".attendance-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:2rem}.attendance-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.attendance-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin:0}.attendance-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:.5rem 0 0}.attendance-container[_ngcontent-%COMP%]   .attendance-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:350px 1fr;gap:2rem}@media (max-width: 1024px){.attendance-container[_ngcontent-%COMP%]   .attendance-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.attendance-container[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.attendance-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 8px #0000001a}.attendance-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;color:#2c3e50;margin:0 0 1rem;border-bottom:2px solid #3498db;padding-bottom:.5rem}.attendance-container[_ngcontent-%COMP%]   .patient-info[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.attendance-container[_ngcontent-%COMP%]   .patient-info[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #ecf0f1}.attendance-container[_ngcontent-%COMP%]   .patient-info[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.attendance-container[_ngcontent-%COMP%]   .patient-info[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]   .detail-row.highlight[_ngcontent-%COMP%]{background:#fff3cd;padding:.75rem;border-radius:4px;border:1px solid #ffc107}.attendance-container[_ngcontent-%COMP%]   .patient-info[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#7f8c8d}.attendance-container[_ngcontent-%COMP%]   .patient-info[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2c3e50}.attendance-container[_ngcontent-%COMP%]   .timer-card[_ngcontent-%COMP%]{text-align:center}.attendance-container[_ngcontent-%COMP%]   .timer-card[_ngcontent-%COMP%]   .timer-display[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#3498db;font-family:Courier New,monospace;margin:1rem 0;padding:1rem;background:#ecf0f1;border-radius:8px}.attendance-container[_ngcontent-%COMP%]   .timer-card[_ngcontent-%COMP%]   .timer-info[_ngcontent-%COMP%]{color:#7f8c8d;margin:0;font-size:.9rem}.attendance-container[_ngcontent-%COMP%]   .patient-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;display:flex;flex-direction:column;gap:1rem}.attendance-container[_ngcontent-%COMP%]   .patient-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;border-radius:4px;border-left:3px solid #3498db}.attendance-container[_ngcontent-%COMP%]   .patient-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-date[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;margin-bottom:.5rem}.attendance-container[_ngcontent-%COMP%]   .patient-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-size:.9rem;color:#7f8c8d}.attendance-container[_ngcontent-%COMP%]   .patient-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#2c3e50}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;font-family:inherit;resize:vertical}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .prescription-area[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.95rem}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;align-items:center;gap:.5rem}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.attendance-container[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .medical-record-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;padding-top:1rem;border-top:2px solid #ecf0f1}.attendance-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#7f8c8d;font-style:italic}.attendance-container[_ngcontent-%COMP%]   .card-header-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid #3498db}.attendance-container[_ngcontent-%COMP%]   .card-header-flex[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;border:none;padding:0}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;border-radius:4px;margin-bottom:1rem}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 768px){.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#2c3e50;font-size:.9rem}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.95rem}.attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .attendance-container[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]{margin-top:1rem}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedure-item[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;border-radius:4px;margin-bottom:.75rem;border-left:3px solid #27ae60}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedure-item[_ngcontent-%COMP%]   .procedure-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedure-item[_ngcontent-%COMP%]   .procedure-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50;font-size:1rem}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedure-item[_ngcontent-%COMP%]   .procedure-info[_ngcontent-%COMP%]   .procedure-code[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.85rem;font-family:monospace}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedure-item[_ngcontent-%COMP%]   .procedure-price[_ngcontent-%COMP%]{color:#27ae60;font-weight:600;font-size:1.1rem}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedure-item[_ngcontent-%COMP%]   .procedure-notes[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem;font-style:italic;margin-top:.5rem}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedures-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem;background:#e8f5e9;border-radius:4px;font-size:1.1rem}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedures-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.attendance-container[_ngcontent-%COMP%]   .procedures-list[_ngcontent-%COMP%]   .procedures-total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#27ae60;font-weight:700}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]{margin-top:1rem}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;border-radius:4px;margin-bottom:.75rem;border-left:3px solid #e74c3c}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50;flex:1}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-type-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#3498db;color:#fff;border-radius:12px;font-size:.75rem;font-weight:600}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-urgency-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-urgency-badge.urgency-0[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-urgency-badge.urgency-1[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .exam-urgency-badge.urgency-2[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:none;border:none;color:#e74c3c;font-size:1.2rem;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fee}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-description[_ngcontent-%COMP%]{color:#2c3e50;font-size:.95rem;margin-bottom:.5rem}.attendance-container[_ngcontent-%COMP%]   .exams-list[_ngcontent-%COMP%]   .exam-item[_ngcontent-%COMP%]   .exam-notes[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.85rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;margin-bottom:1rem}.alert.alert-error[_ngcontent-%COMP%]{background:#fee;color:#c33;border:1px solid #fcc}.alert.alert-success[_ngcontent-%COMP%]{background:#efe;color:#3c3;border:1px solid #cfc}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#7f8c8d;font-size:1.1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:all .3s ease}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2980b9}.btn.btn-secondary[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#7f8c8d}.btn.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#3498db;border:1px solid #3498db}.btn.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#3498db;color:#fff}.print-only[_ngcontent-%COMP%]{display:none}@media print{.attendance-container[_ngcontent-%COMP%]{display:none}.print-only[_ngcontent-%COMP%]{display:block;padding:2rem}.print-only[_ngcontent-%COMP%]   .prescription-print[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.print-only[_ngcontent-%COMP%]   .prescription-print[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]{margin-bottom:2rem}.print-only[_ngcontent-%COMP%]   .prescription-print[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem}.print-only[_ngcontent-%COMP%]   .prescription-print[_ngcontent-%COMP%]   .prescription-content[_ngcontent-%COMP%]{white-space:pre-wrap;font-family:Courier New,monospace;font-size:1rem;line-height:1.6;border:1px solid #ddd;padding:1rem;min-height:200px}}"]})};export{Pe as Attendance};
