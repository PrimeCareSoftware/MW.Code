/**
 * Angular Material Theme - Clinic Harmony Inspired
 * Custom Material Design theme based on clinic-harmony-ui design system
 * 
 * This file provides Material component theming aligned with the
 * Apple-inspired minimalist healthcare design from clinic-harmony
 */

@use '@angular/material' as mat;
@use 'sass:map';

// ============================================
// CUSTOM PALETTES - Clinic Harmony Colors
// ============================================

// Primary Palette - Soft Medical Blue (HSL: 211 84% 55%)
$clinic-harmony-primary: (
  50: #f0f9ff,
  100: #e0f2fe,
  200: #bae6fd,
  300: #7dd3fc,
  400: #38bdf8,
  500: #4A9FDE,  // Main brand color
  600: #3b82f6,
  700: #2563eb,
  800: #1e40af,
  900: #1e3a8a,
  contrast: (
    50: rgba(0, 0, 0, 0.87),
    100: rgba(0, 0, 0, 0.87),
    200: rgba(0, 0, 0, 0.87),
    300: rgba(0, 0, 0, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
  )
);

// Accent Palette - Subtle Teal (HSL: 174 62% 47%)
$clinic-harmony-accent: (
  50: #f0fdfa,
  100: #ccfbf1,
  200: #99f6e4,
  300: #5eead4,
  400: #2dd4bf,
  500: #14b8a6,  // Teal accent
  600: #0d9488,
  700: #0f766e,
  800: #115e59,
  900: #134e4a,
  contrast: (
    50: rgba(0, 0, 0, 0.87),
    100: rgba(0, 0, 0, 0.87),
    200: rgba(0, 0, 0, 0.87),
    300: rgba(0, 0, 0, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
  )
);

// Warn Palette - Soft Red for errors
$clinic-harmony-warn: (
  50: #fef2f2,
  100: #fee2e2,
  200: #fecaca,
  300: #fca5a5,
  400: #f87171,
  500: #ef4444,  // Error color
  600: #dc2626,
  700: #b91c1c,
  800: #991b1b,
  900: #7f1d1d,
  contrast: (
    50: rgba(0, 0, 0, 0.87),
    100: rgba(0, 0, 0, 0.87),
    200: rgba(0, 0, 0, 0.87),
    300: rgba(0, 0, 0, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
  )
);

// ============================================
// TYPOGRAPHY CONFIGURATION
// ============================================

$clinic-harmony-typography: mat.define-typography-config(
  $font-family: 'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
  $headline-1: mat.define-typography-level(3rem, 3.5rem, 600),      // 48px
  $headline-2: mat.define-typography-level(2.25rem, 2.75rem, 600),  // 36px
  $headline-3: mat.define-typography-level(1.875rem, 2.25rem, 600), // 30px
  $headline-4: mat.define-typography-level(1.5rem, 2rem, 600),      // 24px
  $headline-5: mat.define-typography-level(1.25rem, 1.75rem, 600),  // 20px
  $headline-6: mat.define-typography-level(1.125rem, 1.5rem, 600),  // 18px
  $subtitle-1: mat.define-typography-level(1rem, 1.5rem, 500),      // 16px medium
  $subtitle-2: mat.define-typography-level(0.875rem, 1.25rem, 500), // 14px medium
  $body-1: mat.define-typography-level(1rem, 1.5rem, 400),          // 16px normal
  $body-2: mat.define-typography-level(0.875rem, 1.25rem, 400),     // 14px normal
  $caption: mat.define-typography-level(0.75rem, 1rem, 400),        // 12px
  $button: mat.define-typography-level(0.875rem, 1.25rem, 500),     // 14px medium
);

// ============================================
// THEME CREATION
// ============================================

// Define palettes
$primary-palette: mat.define-palette($clinic-harmony-primary, 500);
$accent-palette: mat.define-palette($clinic-harmony-accent, 500);
$warn-palette: mat.define-palette($clinic-harmony-warn, 500);

// Create light theme
$clinic-harmony-theme: mat.define-light-theme((
  color: (
    primary: $primary-palette,
    accent: $accent-palette,
    warn: $warn-palette,
  ),
  typography: $clinic-harmony-typography,
  density: 0,
));

// ============================================
// APPLY THEME TO COMPONENTS
// ============================================

// Include all component themes
@include mat.all-component-themes($clinic-harmony-theme);

// ============================================
// CUSTOM COMPONENT OVERRIDES
// Align Material components with Clinic Harmony design
// ============================================

// Buttons - Clinic Harmony style
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-unelevated-button,
.mat-mdc-outlined-button {
  border-radius: var(--radius-sm) !important;  // 8px
  font-weight: 500 !important;
  transition: var(--transition-fast) !important;
  letter-spacing: normal !important;
  
  &:not(.mat-mdc-icon-button) {
    min-height: 40px;
    padding: 0 16px !important;
  }
}

// Primary button
.mat-mdc-raised-button.mat-primary,
.mat-mdc-unelevated-button.mat-primary {
  background-color: var(--primary-500) !important;
  
  &:hover:not([disabled]) {
    background-color: var(--primary-600) !important;
  }
}

// Accent button
.mat-mdc-raised-button.mat-accent,
.mat-mdc-unelevated-button.mat-accent {
  background-color: var(--accent-500) !important;
  
  &:hover:not([disabled]) {
    background-color: var(--accent-600) !important;
  }
}

// Cards - Soft shadows and rounded corners
.mat-card,
.mat-mdc-card {
  border-radius: var(--radius) !important;  // 12px - Clinic Harmony standard
  box-shadow: var(--shadow-sm) !important;
  border: 1px solid var(--border-color);
  transition: var(--transition-base) !important;
  
  &:hover {
    box-shadow: var(--shadow-md) !important;
  }
}

.mat-mdc-card-header {
  padding: 24px 24px 16px 24px !important;
}

.mat-mdc-card-content {
  padding: 0 24px 24px 24px !important;
}

// Form fields - Clean borders and focus states
.mat-mdc-form-field {
  .mat-mdc-text-field-wrapper {
    border-radius: var(--radius-sm) !important;
  }
  
  .mat-mdc-form-field-focus-overlay {
    background-color: transparent !important;
  }
  
  &.mat-focused {
    .mdc-text-field--outlined .mdc-notched-outline {
      border-color: var(--primary-500) !important;
      border-width: 2px !important;
    }
  }
  
  // Softer hover state
  &:hover:not(.mat-focused) {
    .mdc-text-field--outlined .mdc-notched-outline {
      border-color: var(--border-color-hover) !important;
    }
  }
}

// Input fields
.mat-mdc-input-element {
  font-family: var(--font-sans) !important;
  font-size: 14px !important;
  
  &::placeholder {
    color: var(--text-tertiary) !important;
  }
}

// Chips - Soft backgrounds
.mat-mdc-chip {
  border-radius: var(--radius-sm) !important;
  font-weight: 500 !important;
  
  &.mat-mdc-standard-chip {
    background-color: var(--gray-100) !important;
    color: var(--text-primary) !important;
  }
  
  &.mat-primary {
    background-color: rgba(74, 159, 222, 0.1) !important;
    color: var(--primary-600) !important;
  }
}

// Tabs - Clean underline style
.mat-mdc-tab-group {
  .mat-mdc-tab {
    font-weight: 500 !important;
    opacity: 0.6;
    
    &.mat-mdc-tab-active {
      opacity: 1;
    }
  }
  
  .mat-mdc-tab-body-content {
    padding-top: 24px;
  }
}

// Dialogs - Rounded corners and soft shadow
.mat-mdc-dialog-container {
  border-radius: var(--radius-md) !important;  // 16px
  box-shadow: var(--shadow-xl) !important;
}

// Snackbar - Modern notification style
.mat-mdc-snack-bar-container {
  border-radius: var(--radius) !important;
  box-shadow: var(--shadow-lg) !important;
}

// Menus - Soft elevation
.mat-mdc-menu-panel {
  border-radius: var(--radius-sm) !important;
  box-shadow: var(--shadow-md) !important;
  border: 1px solid var(--border-color);
}

// Tooltips - Softer appearance
.mat-mdc-tooltip {
  border-radius: var(--radius-sm) !important;
  font-size: 12px !important;
  padding: 6px 12px !important;
  background-color: rgba(23, 23, 23, 0.9) !important;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

// Progress bars - Softer colors
.mat-mdc-progress-bar {
  border-radius: var(--radius-full) !important;
  
  .mdc-linear-progress__bar-inner {
    border-radius: var(--radius-full) !important;
  }
}

// Slide toggles - Modern switch style
.mat-mdc-slide-toggle {
  .mdc-switch__track {
    border-radius: var(--radius-full) !important;
  }
  
  .mdc-switch__handle {
    border-radius: 50% !important;
  }
}

// Tables - Clean and minimal
.mat-mdc-table {
  border-radius: var(--radius-sm) !important;
  
  .mat-mdc-header-row {
    background-color: var(--gray-50);
    border-bottom: 1px solid var(--border-color);
  }
  
  .mat-mdc-row {
    &:hover {
      background-color: var(--hover-bg);
    }
  }
  
  .mat-mdc-header-cell {
    font-weight: 600 !important;
    color: var(--text-secondary) !important;
    font-size: 12px !important;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
}

// Paginator - Clean style
.mat-mdc-paginator {
  border-top: 1px solid var(--border-color);
  border-radius: 0 0 var(--radius-sm) var(--radius-sm) !important;
}

// Expansion panels - Soft borders
.mat-expansion-panel {
  border-radius: var(--radius-sm) !important;
  border: 1px solid var(--border-color);
  box-shadow: none !important;
  margin-bottom: 8px !important;
  
  &:not(.mat-expanded) {
    &:hover {
      background-color: var(--hover-bg);
    }
  }
}

// Stepper - Modern progress indicator
.mat-stepper-horizontal,
.mat-stepper-vertical {
  border-radius: var(--radius) !important;
  
  .mat-step-header {
    &:hover {
      background-color: var(--hover-bg);
    }
    
    .mat-step-icon {
      border-radius: 50% !important;
    }
  }
}

// ============================================
// DARK THEME SUPPORT
// ============================================

body.theme-dark {
  $dark-primary-palette: mat.define-palette($clinic-harmony-primary, 400);
  $dark-accent-palette: mat.define-palette($clinic-harmony-accent, 400);
  $dark-warn-palette: mat.define-palette($clinic-harmony-warn, 400);
  
  $clinic-harmony-dark-theme: mat.define-dark-theme((
    color: (
      primary: $dark-primary-palette,
      accent: $dark-accent-palette,
      warn: $dark-warn-palette,
    ),
    typography: $clinic-harmony-typography,
    density: 0,
  ));
  
  @include mat.all-component-colors($clinic-harmony-dark-theme);
  
  // Dark theme specific overrides
  .mat-mdc-card {
    background-color: var(--card-bg) !important;
    border-color: var(--border-color) !important;
  }
  
  .mat-mdc-form-field {
    .mat-mdc-text-field-wrapper {
      background-color: var(--input-background) !important;
    }
  }
}
