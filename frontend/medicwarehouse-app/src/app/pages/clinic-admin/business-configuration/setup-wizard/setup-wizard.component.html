<div class="wizard-overlay">
  <div class="wizard-container">
    <!-- Header -->
    <div class="wizard-header">
      <h2>ğŸš€ ConfiguraÃ§Ã£o RÃ¡pida</h2>
      <p>Configure sua clÃ­nica em 3 passos simples</p>
      <button class="close-btn" (click)="onCancel()" aria-label="Fechar">&times;</button>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
    </div>
    <div class="step-indicators">
      <div class="step-indicator" [class.active]="currentStep >= 0" [class.current]="currentStep === 0">
        <span class="step-number">1</span>
        <span class="step-label">Tipo</span>
      </div>
      <div class="step-indicator" [class.active]="currentStep >= 1" [class.current]="currentStep === 1">
        <span class="step-number">2</span>
        <span class="step-label">HorÃ¡rio</span>
      </div>
      <div class="step-indicator" [class.active]="currentStep >= 2" [class.current]="currentStep === 2">
        <span class="step-number">3</span>
        <span class="step-label">Confirmar</span>
      </div>
    </div>

    <!-- Step Content -->
    <div class="wizard-content">
      <!-- Step 1: Template Selection -->
      <div *ngIf="currentStep === 0" class="step-content">
        <h3>Escolha o tipo de configuraÃ§Ã£o</h3>
        <p class="step-description">Selecione o modelo que melhor se adequa ao seu negÃ³cio. VocÃª poderÃ¡ personalizar depois.</p>
        
        <div class="templates-grid">
          <div
            *ngFor="let template of templates"
            class="template-card"
            [class.selected]="selectedTemplate?.id === template.id"
            (click)="selectTemplate(template)"
          >
            <div class="template-icon">{{ template.icon }}</div>
            <h4>{{ template.name }}</h4>
            <p>{{ template.description }}</p>
            <div class="template-check" *ngIf="selectedTemplate?.id === template.id">âœ“</div>
          </div>
        </div>
      </div>

      <!-- Step 2: Schedule Configuration -->
      <div *ngIf="currentStep === 1" class="step-content">
        <h3>Configure o horÃ¡rio de atendimento</h3>
        <p class="step-description">Defina os horÃ¡rios de funcionamento e duraÃ§Ã£o das consultas.</p>
        
        <div class="schedule-form">
          <div class="form-row">
            <div class="form-group">
              <label for="opening">ğŸ• HorÃ¡rio de Abertura</label>
              <input 
                type="time" 
                id="opening"
                [(ngModel)]="openingTime"
                class="time-input"
              >
            </div>

            <div class="form-group">
              <label for="closing">ğŸ•” HorÃ¡rio de Fechamento</label>
              <input 
                type="time" 
                id="closing"
                [(ngModel)]="closingTime"
                class="time-input"
              >
            </div>
          </div>

          <div class="form-group">
            <label for="duration">â±ï¸ DuraÃ§Ã£o da Consulta</label>
            <select 
              id="duration"
              [(ngModel)]="appointmentDurationMinutes"
              class="select-input"
            >
              <option *ngFor="let option of appointmentDurationOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>

          <div class="checkboxes">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                [(ngModel)]="allowEmergencySlots"
              >
              <span>ğŸš¨ Permitir horÃ¡rios de emergÃªncia</span>
            </label>

            <label class="checkbox-label">
              <input 
                type="checkbox" 
                [(ngModel)]="enableOnlineAppointmentScheduling"
              >
              <span>ğŸŒ Habilitar agendamento online</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Step 3: Review -->
      <div *ngIf="currentStep === 2" class="step-content">
        <h3>âœ… Revise sua configuraÃ§Ã£o</h3>
        <p class="step-description">Confira os detalhes antes de finalizar. VocÃª poderÃ¡ ajustar tudo depois.</p>
        
        <div class="review-section">
          <div class="review-item">
            <div class="review-label">Tipo de ConfiguraÃ§Ã£o:</div>
            <div class="review-value">{{ selectedTemplate?.name }}</div>
          </div>

          <div class="review-item">
            <div class="review-label">HorÃ¡rio de Funcionamento:</div>
            <div class="review-value">{{ openingTime }} - {{ closingTime }}</div>
          </div>

          <div class="review-item">
            <div class="review-label">DuraÃ§Ã£o das Consultas:</div>
            <div class="review-value">{{ appointmentDurationMinutes }} minutos</div>
          </div>

          <div class="review-item">
            <div class="review-label">HorÃ¡rios de EmergÃªncia:</div>
            <div class="review-value">{{ allowEmergencySlots ? 'âœ“ Habilitado' : 'âœ— Desabilitado' }}</div>
          </div>

          <div class="review-item">
            <div class="review-label">Agendamento Online:</div>
            <div class="review-value">{{ enableOnlineAppointmentScheduling ? 'âœ“ Habilitado' : 'âœ— Desabilitado' }}</div>
          </div>
        </div>

        <div class="success-message">
          <span class="success-icon">ğŸ‰</span>
          <p>Sua configuraÃ§Ã£o estÃ¡ pronta! Clique em "Concluir" para aplicar.</p>
        </div>
      </div>
    </div>

    <!-- Footer Actions -->
    <div class="wizard-footer">
      <button 
        class="btn btn-secondary"
        (click)="previousStep()"
        *ngIf="currentStep > 0"
      >
        â† Voltar
      </button>

      <button 
        class="btn btn-secondary"
        (click)="onCancel()"
        *ngIf="currentStep === 0"
      >
        Cancelar
      </button>

      <div class="spacer"></div>

      <button 
        class="btn btn-primary"
        (click)="nextStep()"
        [disabled]="!canProceed()"
        *ngIf="currentStep < totalSteps - 1"
      >
        PrÃ³ximo â†’
      </button>

      <button 
        class="btn btn-success"
        (click)="finish()"
        *ngIf="currentStep === totalSteps - 1"
      >
        âœ“ Concluir ConfiguraÃ§Ã£o
      </button>
    </div>
  </div>
</div>
